!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=24)}([function(e,t,n){e.exports=n(29)()},function(e,t,n){"use strict";e.exports=n(25)},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),o=n(1),a=n.n(o),s=n(0),l=n.n(s),u=n(3),c=n.n(u),h=n(2),p=n.n(h);function f(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e){return"/"===e.charAt(0)?e:"/"+e},y=function(e){return"/"===e.charAt(0)?e.substr(1):e},v=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},b=function(e,t){return v(e,t)?e.substr(t.length):e},x=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},w=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=_({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&f(e),o=t&&f(t),a=i||o;if(e&&f(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var l=r[r.length-1];s="."===l||".."===l||""===l}else s=!1;for(var u=0,c=r.length;0<=c;c--){var h=r[c];"."===h?d(r,c):".."===h?(d(r,c),u++):u&&(d(r,c),u--)}if(!a)for(;u--;u)r.unshift("..");!a||""===r[0]||r[0]&&f(r[0])||r.unshift("");var p=r.join("/");return s&&"/"!==p.substr(-1)&&(p+="/"),p}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},S=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var r=void 0===t?"undefined":m(t);if(r!==(void 0===n?"undefined":m(n)))return!1;if("object"!==r)return!1;var i=t.valueOf(),o=n.valueOf();if(i!==t||o!==n)return e(i,o);var a=Object.keys(t),s=Object.keys(n);return a.length===s.length&&a.every(function(r){return e(t[r],n[r])})}(e.state,t.state)},E=function(){var e=null,t=[];return{setPrompt:function(t){return c()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):(c()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}},T=!("undefined"==typeof window||!window.document||!window.document.createElement),C=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},A=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},P=function(e,t){return t(window.confirm(e))},L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k="popstate",O="hashchange",F=function(){try{return window.history.state||{}}catch(e){return{}}},U=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};p()(T,"Browser history needs a DOM");var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e.forceRefresh,a=void 0!==o&&o,s=e.getUserConfirmation,l=void 0===s?P:s,u=e.keyLength,h=void 0===u?6:u,f=e.basename?x(g(e.basename)):"",d=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return c()(!f||v(o,f),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+f+'".'),f&&(o=b(o,f)),M(o,r,n)},m=function(){return Math.random().toString(36).substr(2,h)},y=E(),_=function(e){R(X,e),X.length=n.length,y.notifyListeners(X.location,X.action)},S=function(e){void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")||N(d(e.state))},U=function(){N(d(F()))},D=!1,N=function(e){D?(D=!1,_()):y.confirmTransitionTo(e,"POP",l,function(t){t?_({action:"POP",location:e}):B(e)})},B=function(e){var t=X.location,n=V.indexOf(t.key);-1===n&&(n=0);var r=V.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(D=!0,j(i))},z=d(F()),V=[z.key],I=function(e){return f+w(e)},j=function(e){n.go(e)},H=0,W=function(e){1===(H+=e)?(C(window,k,S),i&&C(window,O,U)):0===H&&(A(window,k,S),i&&A(window,O,U))},G=!1,X={length:n.length,action:"POP",location:z,createHref:I,push:function(e,t){c()(!("object"===(void 0===e?"undefined":L(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=M(e,t,m(),X.location);y.confirmTransitionTo(i,"PUSH",l,function(e){if(e){var t=I(i),o=i.key,s=i.state;if(r)if(n.pushState({key:o,state:s},null,t),a)window.location.href=t;else{var l=V.indexOf(X.location.key),u=V.slice(0,-1===l?0:l+1);u.push(i.key),V=u,_({action:"PUSH",location:i})}else c()(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function(e,t){c()(!("object"===(void 0===e?"undefined":L(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",o=M(e,t,m(),X.location);y.confirmTransitionTo(o,i,l,function(e){if(e){var t=I(o),s=o.key,l=o.state;if(r)if(n.replaceState({key:s,state:l},null,t),a)window.location.replace(t);else{var u=V.indexOf(X.location.key);-1!==u&&(V[u]=o.key),_({action:i,location:o})}else c()(void 0===l,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=y.setPrompt(e);return G||(W(1),G=!0),function(){return G&&(G=!1,W(-1)),t()}},listen:function(e){var t=y.appendListener(e);return W(1),function(){W(-1),t()}}};return X},D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N="hashchange",B={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+y(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:y,decodePath:g},slash:{encodePath:g,decodePath:g}},z=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},V=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+e)},I=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};p()(T,"Hash history needs a DOM");var t=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=e.getUserConfirmation,i=void 0===r?P:r,o=e.hashType,a=void 0===o?"slash":o,s=e.basename?x(g(e.basename)):"",l=B[a],u=l.encodePath,h=l.decodePath,f=function(){var e=h(z());return c()(!s||v(e,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+s+'".'),s&&(e=b(e,s)),M(e)},d=E(),m=function(e){D(X,e),X.length=t.length,d.notifyListeners(X.location,X.action)},y=!1,_=null,L=function(){var e=z(),t=u(e);if(e!==t)V(t);else{var n=f(),r=X.location;if(!y&&S(r,n))return;if(_===w(n))return;_=null,R(n)}},R=function(e){y?(y=!1,m()):d.confirmTransitionTo(e,"POP",i,function(t){t?m({action:"POP",location:e}):k(e)})},k=function(e){var t=X.location,n=I.lastIndexOf(w(t));-1===n&&(n=0);var r=I.lastIndexOf(w(e));-1===r&&(r=0);var i=n-r;i&&(y=!0,j(i))},O=z(),F=u(O);O!==F&&V(F);var U=f(),I=[w(U)],j=function(e){c()(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},H=0,W=function(e){1===(H+=e)?C(window,N,L):0===H&&A(window,N,L)},G=!1,X={length:t.length,action:"POP",location:U,createHref:function(e){return"#"+u(s+w(e))},push:function(e,t){c()(void 0===t,"Hash history cannot push state; it is ignored");var n=M(e,void 0,void 0,X.location);d.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t,r=w(n),i=u(s+r);if(z()!==i){_=r,t=i,window.location.hash=t;var o=I.lastIndexOf(w(X.location)),a=I.slice(0,-1===o?0:o+1);a.push(r),I=a,m({action:"PUSH",location:n})}else c()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),m()}})},replace:function(e,t){c()(void 0===t,"Hash history cannot replace state; it is ignored");var n="REPLACE",r=M(e,void 0,void 0,X.location);d.confirmTransitionTo(r,n,i,function(e){if(e){var t=w(r),i=u(s+t);z()!==i&&(_=t,V(i));var o=I.indexOf(w(X.location));-1!==o&&(I[o]=t),m({action:n,location:r})}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=d.setPrompt(e);return G||(W(1),G=!0),function(){return G&&(G=!1,W(-1)),t()}},listen:function(e){var t=d.appendListener(e);return W(1),function(){W(-1),t()}}};return X},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W=function(e,t,n){return Math.min(Math.max(e,t),n)},G=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,i=e.initialIndex,o=void 0===i?0:i,a=e.keyLength,s=void 0===a?6:a,l=E(),u=function(e){H(g,e),g.length=g.entries.length,l.notifyListeners(g.location,g.action)},h=function(){return Math.random().toString(36).substr(2,s)},p=W(o,0,r.length-1),f=r.map(function(e){return M(e,void 0,"string"==typeof e?h():e.key||h())}),d=w,m=function(e){var n=W(g.index+e,0,g.entries.length-1),r=g.entries[n];l.confirmTransitionTo(r,"POP",t,function(e){e?u({action:"POP",location:r,index:n}):u()})},g={length:f.length,action:"POP",location:f[p],index:p,entries:f,createHref:d,push:function(e,n){c()(!("object"===(void 0===e?"undefined":j(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=M(e,n,h(),g.location);l.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),u({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,n){c()(!("object"===(void 0===e?"undefined":j(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r="REPLACE",i=M(e,n,h(),g.location);l.confirmTransitionTo(i,r,t,function(e){e&&(g.entries[g.index]=i,u({action:r,location:i}))})},go:m,goBack:function(){return m(-1)},goForward:function(){return m(1)},canGo:function(e){var t=g.index+e;return 0<=t&&t<g.entries.length},block:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return g},X=n(4),q=n.n(X),Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Q=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=K(this,e.call.apply(e,[this].concat(o)))).state={match:r.computeMatch(r.props.history.location.pathname)},K(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:Y({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;p()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){q()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?a.a.Children.only(e):null},t}(a.a.Component);Q.propTypes={history:l.a.object.isRequired,children:l.a.node},Q.contextTypes={router:l.a.object},Q.childContextTypes={router:l.a.object.isRequired};var Z=Q,$=Z;function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ee=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=J(this,e.call.apply(e,[this].concat(o)))).history=U(r.props),J(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement($,{history:this.history,children:this.props.children})},t}(a.a.Component);ee.propTypes={basename:l.a.string,forceRefresh:l.a.bool,getUserConfirmation:l.a.func,keyLength:l.a.number,children:l.a.node};var te=ee;function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var re=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=ne(this,e.call.apply(e,[this].concat(o)))).history=I(r.props),ne(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement($,{history:this.history,children:this.props.children})},t}(a.a.Component);re.propTypes={basename:l.a.string,getUserConfirmation:l.a.func,hashType:l.a.oneOf(["hashbang","noslash","slash"]),children:l.a.node};var ie=re,oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var se=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=ae(this,e.call.apply(e,[this].concat(o)))).handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!(e.defaultPrevented||0!==e.button||r.props.target||(a=e).metaKey||a.altKey||a.ctrlKey||a.shiftKey)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}var a},ae(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>"),p()(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?M(t,null,null,i.location):t,s=i.createHref(o);return a.a.createElement("a",oe({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(a.a.Component);se.propTypes={onClick:l.a.func,target:l.a.string,replace:l.a.bool,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired,innerRef:l.a.oneOfType([l.a.string,l.a.func])},se.defaultProps={replace:!1},se.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired,createHref:l.a.func.isRequired}).isRequired}).isRequired};var le=se;function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ce=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=ue(this,e.call.apply(e,[this].concat(o)))).history=G(r.props),ue(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){q()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(Z,{history:this.history,children:this.props.children})},t}(a.a.Component);ce.propTypes={initialEntries:l.a.array,initialIndex:l.a.number,getUserConfirmation:l.a.func,keyLength:l.a.number,children:l.a.node};var he=ce,pe=n(10),fe=n.n(pe),de={},me=0,ge=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,l=void 0!==s&&s,u=r.sensitive;if(null==i)return n;var c=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=de[n]||(de[n]={});if(r[e])return r[e];var i=[],o={re:fe()(e,i,t),keys:i};return me<1e4&&(r[e]=o,me++),o}(i,{end:a,strict:l,sensitive:void 0!==u&&u}),h=c.re,p=c.keys,f=h.exec(e);if(!f)return null;var d=f[0],m=f.slice(1),g=e===d;return a&&!g?null:{path:i,url:"/"===i&&""===d?"/":d,isExact:g,params:p.reduce(function(e,t,n){return e[t.name]=m[n],e},{})}},ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var be=function(e){return 0===a.a.Children.count(e)},xe=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=ve(this,e.call.apply(e,[this].concat(o)))).state={match:r.computeMatch(r.props,r.context.router)},ve(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:ye({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;p()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(r||l.location).pathname;return ge(u,{path:i,strict:o,exact:a,sensitive:s},l.match)},t.prototype.componentWillMount=function(){q()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),q()(!(this.props.component&&this.props.children&&!be(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),q()(!(this.props.render&&this.props.children&&!be(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){q()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),q()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,s=o.history,l=o.route,u=o.staticContext,c={match:e,location:this.props.location||l.location,history:s,staticContext:u};return r?e?a.a.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!be(n)?a.a.Children.only(n):null},t}(a.a.Component);xe.propTypes={computedMatch:l.a.object,path:l.a.string,exact:l.a.bool,strict:l.a.bool,sensitive:l.a.bool,component:l.a.func,render:l.a.func,children:l.a.oneOfType([l.a.func,l.a.node]),location:l.a.object},xe.contextTypes={router:l.a.shape({history:l.a.object.isRequired,route:l.a.object.isRequired,staticContext:l.a.object})},xe.childContextTypes={router:l.a.object.isRequired};var we=xe,_e=we,Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,o=e.activeClassName,s=e.className,l=e.activeStyle,u=e.style,c=e.isActive,h=e["aria-current"],p=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),f="object"===(void 0===t?"undefined":Se(t))?t.pathname:t,d=f&&f.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return a.a.createElement(_e,{path:d,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return a.a.createElement(le,Me({to:t,className:i?[s,o].filter(function(e){return e}).join(" "):s,style:i?Me({},u,l):u,"aria-current":i&&h||null},p))}})};Ee.propTypes={to:le.propTypes.to,exact:l.a.bool,strict:l.a.bool,location:l.a.object,activeClassName:l.a.string,className:l.a.string,activeStyle:l.a.object,style:l.a.object,isActive:l.a.func,"aria-current":l.a.oneOf(["page","step","location","date","time","true"])},Ee.defaultProps={activeClassName:"active","aria-current":"page"};var Te=Ee,Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(a.a.Component);Ce.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},Ce.defaultProps={when:!0},Ce.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired};var Ae=Ce,Pe={},Le=0,Re=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=Pe[t]||(Pe[t]={});if(n[e])return n[e];var r=fe.a.compile(e);return Le<1e4&&(n[e]=r,Le++),r}(e)(t,{pretty:!0})},ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=M(e.to),n=M(this.props.to);S(t,n)?q()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?Re(n,t.params):ke({},n,{pathname:Re(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(a.a.Component);Oe.propTypes={computedMatch:l.a.object,push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},Oe.defaultProps={push:!1},Oe.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired};var Fe=Oe,Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function De(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ne=function(e){return"/"===e.charAt(0)?e:"/"+e},Be=function(e,t){return e?Ue({},t,{pathname:Ne(e)+t.pathname}):t},ze=function(e){return"string"==typeof e?e:w(e)},Ve=function(e){return function(){p()(!1,"You cannot %s with <StaticRouter>",e)}},Ie=function(){},je=function(e){function t(){var n,r;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r=De(this,e.call.apply(e,[this].concat(o)))).createHref=function(e){return Ne(r.props.basename+ze(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=Be(n,M(e)),i.url=ze(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=Be(n,M(e)),i.url=ze(i.location)},r.handleListen=function(){return Ie},r.handleBlock=function(){return Ie},De(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){q()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=Ne(e);return 0!==t.pathname.indexOf(n)?t:Ue({},t,{pathname:t.pathname.substr(n.length)})}(t,M(n)),push:this.handlePush,replace:this.handleReplace,go:Ve("go"),goBack:Ve("goBack"),goForward:Ve("goForward"),listen:this.handleListen,block:this.handleBlock};return a.a.createElement(Z,Ue({},r,{history:i}))},t}(a.a.Component);je.propTypes={basename:l.a.string,context:l.a.object.isRequired,location:l.a.oneOfType([l.a.string,l.a.object])},je.defaultProps={basename:"",location:"/"},je.childContextTypes={router:l.a.object.isRequired};var He=je,We=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){q()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),q()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return a.a.Children.forEach(t,function(t){if(null==r&&a.a.isValidElement(t)){var o=t.props,s=o.path,l=o.exact,u=o.strict,c=o.sensitive,h=o.from,p=s||h;i=t,r=ge(n.pathname,{path:p,exact:l,strict:u,sensitive:c},e.match)}}),r?a.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(a.a.Component);We.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},We.propTypes={children:l.a.node,location:l.a.object};var Ge=We,Xe=Re,qe=ge,Ye=n(21),Ke=n.n(Ye),Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ze=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return a.a.createElement(we,{children:function(t){return a.a.createElement(e,Qe({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:l.a.func},Ke()(t,e)};n.d(t,"BrowserRouter",function(){return te}),n.d(t,"HashRouter",function(){return ie}),n.d(t,"Link",function(){return le}),n.d(t,"MemoryRouter",function(){return he}),n.d(t,"NavLink",function(){return Te}),n.d(t,"Prompt",function(){return Ae}),n.d(t,"Redirect",function(){return Fe}),n.d(t,"Route",function(){return _e}),n.d(t,"Router",function(){return $}),n.d(t,"StaticRouter",function(){return He}),n.d(t,"Switch",function(){return Ge}),n.d(t,"generatePath",function(){return Xe}),n.d(t,"matchPath",function(){return qe}),n.d(t,"withRouter",function(){return Ze})},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}n.r(t);var i=n(1),o=n(0),a=n.n(o),s=a.a.shape({trySubscribe:a.a.func.isRequired,tryUnsubscribe:a.a.func.isRequired,notifyNestedSubs:a.a.func.isRequired,isSubscribed:a.a.func.isRequired}),l=a.a.shape({subscribe:a.a.func.isRequired,dispatch:a.a.func.isRequired,getState:a.a.func.isRequired});function u(e){var t;void 0===e&&(e="store");var n=e+"Subscription",o=function(t){r(a,t);var o=a.prototype;function a(n,r){var i;return(i=t.call(this,n,r)||this)[e]=n.store,i}return o.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},o.render=function(){return i.Children.only(this.props.children)},a}(i.Component);return o.propTypes={store:l.isRequired,children:a.a.element.isRequired},o.childContextTypes=((t={})[e]=l.isRequired,t[n]=s,t),o}var c=u();function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}var d=n(22),m=n.n(d),g=n(2),y=n.n(g),v=n(12),b={notify:function(){}},x=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=b}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){e=t=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=b)},e}(),w=0,_={};function M(){}function S(e,t){var n,o;void 0===t&&(t={});var a=t,u=a.getDisplayName,c=void 0===u?function(e){return"ConnectAdvanced("+e+")"}:u,d=a.methodName,g=void 0===d?"connectAdvanced":d,b=a.renderCountProp,S=void 0===b?void 0:b,E=a.shouldHandleStateChanges,T=void 0===E||E,C=a.storeKey,A=void 0===C?"store":C,P=a.withRef,L=void 0!==P&&P,R=f(a,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),k=A+"Subscription",O=w++,F=((n={})[A]=l,n[k]=s,n),U=((o={})[k]=s,o);return function(t){y()(Object(v.isValidElementType)(t),"You must pass a component to the function returned by "+g+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",o=c(n),a=p({},R,{getDisplayName:c,methodName:g,renderCountProp:S,shouldHandleStateChanges:T,storeKey:A,withRef:L,displayName:o,wrappedComponentName:n,WrappedComponent:t}),s=function(n){function s(e,t){var r;return(r=n.call(this,e,t)||this).version=O,r.state={},r.renderCount=0,r.store=e[A]||t[A],r.propsMode=Boolean(e[A]),r.setWrappedInstance=r.setWrappedInstance.bind(h(h(r))),y()(r.store,'Could not find "'+A+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+A+'" as a prop to "'+o+'".'),r.initSelector(),r.initSubscription(),r}r(s,n);var l=s.prototype;return l.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[k]=t||this.context[k],e},l.componentDidMount=function(){T&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},l.componentWillReceiveProps=function(e){this.selector.run(e)},l.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},l.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=M,this.store=null,this.selector.run=M,this.selector.shouldComponentUpdate=!1},l.getWrappedInstance=function(){return y()(L,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+g+"() call."),this.wrappedInstance},l.setWrappedInstance=function(e){this.wrappedInstance=e},l.initSelector=function(){var t,n,r,i=e(this.store.dispatch,a);this.selector=(t=i,n=this.store,r={run:function(e){try{var i=t(n.getState(),e);(i!==r.props||r.error)&&(r.shouldComponentUpdate=!0,r.props=i,r.error=null)}catch(e){r.shouldComponentUpdate=!0,r.error=e}}}),this.selector.run(this.props)},l.initSubscription=function(){if(T){var e=(this.propsMode?this.props:this.context)[k];this.subscription=new x(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},l.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},l.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},l.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},l.addExtraProps=function(e){if(!(L||S||this.propsMode&&this.subscription))return e;var t=p({},e);return L&&(t.ref=this.setWrappedInstance),S&&(t[S]=this.renderCount++),this.propsMode&&this.subscription&&(t[k]=this.subscription),t},l.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(i.createElement)(t,this.addExtraProps(e.props))},s}(i.Component);return s.WrappedComponent=t,s.displayName=o,s.childContextTypes=U,s.contextTypes=F,s.propTypes=F,m()(s,t)}}var E=Object.prototype.hasOwnProperty;function T(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function C(e,t){if(T(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!E.call(t,n[i])||!T(e[n[i]],t[n[i]]))return!1;return!0}var A=n(8);function P(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function L(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function R(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=L(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=L(i),i=r(t,n)),i},r}}function k(e,t,n){return p({},n,e,t)}function O(e,t,n,r,i){var o,a,s,l,u,c=i.areStatesEqual,h=i.areOwnPropsEqual,p=i.areStatePropsEqual,f=!1;return function(i,d){return f?function(i,f){var d,m,g=!h(f,a),y=!c(i,o);return o=i,a=f,g&&y?(s=e(o,a),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):g?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):(y&&(d=e(o,a),m=!p(d,s),s=d,m&&(u=n(s,l,a))),u)}(i,d):(s=e(o=i,a=d),l=t(r,a),u=n(s,l,a),f=!0,u)}}function F(e,t,n){for(var r=t.length-1;0<=r;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function U(e,t){return e===t}var D,N,B,z,V,I,j,H,W,G,X,q=(N=(D={}).connectHOC,B=void 0===N?S:N,V=void 0===(z=D.mapStateToPropsFactories)?[function(e){return"function"==typeof e?R(e):void 0},function(e){return e?void 0:P(function(){return{}})}]:z,j=void 0===(I=D.mapDispatchToPropsFactories)?[function(e){return"function"==typeof e?R(e):void 0},function(e){return e?void 0:P(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?P(function(t){return Object(A.bindActionCreators)(e,t)}):void 0}]:I,W=void 0===(H=D.mergePropsFactories)?[function(e){return"function"==typeof e?(t=e,function(e,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(e,n,s){var l=t(e,n,s);return a?i&&o(l,r)||(r=l):(a=!0,r=l),r}}):void 0;var t},function(e){return e?void 0:function(){return k}}]:H,X=void 0===(G=D.selectorFactory)?function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=f(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),l=i(e,o);return(o.pure?O:function(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}})(a,s,l,e,o)}:G,function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,l=void 0===s?U:s,u=i.areOwnPropsEqual,c=void 0===u?C:u,h=i.areStatePropsEqual,d=void 0===h?C:h,m=i.areMergedPropsEqual,g=void 0===m?C:m,y=f(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),v=F(e,V,"mapStateToProps"),b=F(t,j,"mapDispatchToProps"),x=F(n,W,"mergeProps");return B(X,p({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:v,initMapDispatchToProps:b,initMergeProps:x,pure:a,areStatesEqual:l,areOwnPropsEqual:c,areStatePropsEqual:d,areMergedPropsEqual:g},y))});n.d(t,"Provider",function(){return c}),n.d(t,"createProvider",function(){return u}),n.d(t,"connectAdvanced",function(){return S}),n.d(t,"connect",function(){return q})},function(e,t,n){var r,i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,w,_,M,S,E,T,C,A,P,L,R,k,O,F,U,D,N,B,z,V,I,j,H,W,G,X,q,Y,K,Q,Z,$,J,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,he,pe,fe,de,me,ge,ye,ve,be,xe,we,_e,Me,Se,Ee,Te,Ce,Ae,Pe,Le,Re,ke,Oe,Fe,Ue,De,Ne,Be,ze,Ve,Ie,je,He,We,Ge,Xe,qe,Ye,Ke,Qe,Ze,$e,Je,et,tt,nt,rt,it,ot,at,st,lt,ut,ct,ht,pt,ft,dt,mt,gt,yt,vt,bt,xt,wt,_t,Mt,St,Et,Tt,Ct,At,Pt,Lt,Rt,kt,Ot,Ft,Ut,Dt,Nt,Bt,zt,Vt,It,jt,Ht,Wt,Gt=Gt||{},Xt={REVISION:"71"};e.exports=Xt,void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),Xt.log=function(){console.log.apply(console,arguments)},Xt.warn=function(){console.warn.apply(console,arguments)},Xt.error=function(){console.error.apply(console,arguments)},Xt.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},Xt.CullFaceNone=0,Xt.CullFaceBack=1,Xt.CullFaceFront=2,Xt.CullFaceFrontBack=3,Xt.FrontFaceDirectionCW=0,Xt.FrontFaceDirectionCCW=1,Xt.BasicShadowMap=0,Xt.PCFShadowMap=1,Xt.PCFSoftShadowMap=2,Xt.FrontSide=0,Xt.BackSide=1,Xt.DoubleSide=2,Xt.NoShading=0,Xt.FlatShading=1,Xt.SmoothShading=2,Xt.NoColors=0,Xt.FaceColors=1,Xt.VertexColors=2,Xt.NoBlending=0,Xt.NormalBlending=1,Xt.AdditiveBlending=2,Xt.SubtractiveBlending=3,Xt.MultiplyBlending=4,Xt.CustomBlending=5,Xt.AddEquation=100,Xt.SubtractEquation=101,Xt.ReverseSubtractEquation=102,Xt.MinEquation=103,Xt.MaxEquation=104,Xt.ZeroFactor=200,Xt.OneFactor=201,Xt.SrcColorFactor=202,Xt.OneMinusSrcColorFactor=203,Xt.SrcAlphaFactor=204,Xt.OneMinusSrcAlphaFactor=205,Xt.DstAlphaFactor=206,Xt.OneMinusDstAlphaFactor=207,Xt.DstColorFactor=208,Xt.OneMinusDstColorFactor=209,Xt.SrcAlphaSaturateFactor=210,Xt.MultiplyOperation=0,Xt.MixOperation=1,Xt.AddOperation=2,Xt.UVMapping=300,Xt.CubeReflectionMapping=301,Xt.CubeRefractionMapping=302,Xt.EquirectangularReflectionMapping=303,Xt.EquirectangularRefractionMapping=304,Xt.SphericalReflectionMapping=305,Xt.RepeatWrapping=1e3,Xt.ClampToEdgeWrapping=1001,Xt.MirroredRepeatWrapping=1002,Xt.NearestFilter=1003,Xt.NearestMipMapNearestFilter=1004,Xt.NearestMipMapLinearFilter=1005,Xt.LinearFilter=1006,Xt.LinearMipMapNearestFilter=1007,Xt.LinearMipMapLinearFilter=1008,Xt.UnsignedByteType=1009,Xt.ByteType=1010,Xt.ShortType=1011,Xt.UnsignedShortType=1012,Xt.IntType=1013,Xt.UnsignedIntType=1014,Xt.FloatType=1015,Xt.HalfFloatType=1025,Xt.UnsignedShort4444Type=1016,Xt.UnsignedShort5551Type=1017,Xt.UnsignedShort565Type=1018,Xt.AlphaFormat=1019,Xt.RGBFormat=1020,Xt.RGBAFormat=1021,Xt.LuminanceFormat=1022,Xt.LuminanceAlphaFormat=1023,Xt.RGBEFormat=Xt.RGBAFormat,Xt.RGB_S3TC_DXT1_Format=2001,Xt.RGBA_S3TC_DXT1_Format=2002,Xt.RGBA_S3TC_DXT3_Format=2003,Xt.RGBA_S3TC_DXT5_Format=2004,Xt.RGB_PVRTC_4BPPV1_Format=2100,Xt.RGB_PVRTC_2BPPV1_Format=2101,Xt.RGBA_PVRTC_4BPPV1_Format=2102,Xt.RGBA_PVRTC_2BPPV1_Format=2103,Xt.Projector=function(){Xt.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){Xt.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){Xt.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){Xt.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},Xt.CanvasRenderer=function(){Xt.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Xt.Color=function(e){return 3===arguments.length?this.setRGB(e,arguments[1],arguments[2]):this.set(e)},Xt.Color.prototype={constructor:Xt.Color,r:1,g:1,b:1,set:function(e){return e instanceof Xt.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var r=function(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e},i=n<=.5?n*(1+t):n+t-n*t,o=2*n-i;this.r=r(o,i,e+1/3),this.g=r(o,i,e),this.b=r(o,i,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}return/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)?(t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e),this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(e)?(t=/^\#([0-9a-f]{6})$/i.exec(e),this.setHex(parseInt(t[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)?(t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e),this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this):/^(\w+)$/i.test(e)?(this.setHex(Xt.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),l=Math.min(i,o,a),u=(l+s)/2;if(l===s)n=t=0;else{var c=s-l;switch(n=u<=.5?c/(s+l):c/(2-s-l),s){case i:t=(o-a)/c+(o<a?6:0);break;case o:t=(a-i)/c+2;break;case a:t=(i-o)/c+4}t/=6}return r.h=t,r.s=n,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},clone:function(){return(new Xt.Color).setRGB(this.r,this.g,this.b)}},Xt.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xt.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},Xt.Quaternion.prototype={constructor:Xt.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof Xt.Euler==0)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===e.order?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===e.order?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===e.order?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===e.order?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===e.order&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],p=r+s+h;return this._z=0<p?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,(a-i)*t):s<r&&h<r?(t=2*Math.sqrt(1+r-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,(o+u)/t):h<s?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,(l+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(l+c)/t,.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){return void 0===r&&(r=new Xt.Vector3),(i=e.dot(t)+1)<1e-6?(i=0,Math.abs(e.x)>Math.abs(e.z)?r.set(-e.y,e.x,0):r.set(0,-e.z,e.y)):r.crossVectors(e,t),this._x=r.x,this._y=r.y,this._z=r.z,this._w=i,this.normalize(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return this._w=0===e?(this._x=0,this._y=0,this._z=0,1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(Xt.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this.onChangeCallback(),this},multiplyVector3:function(e){return Xt.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.sin((1-t)*s)/l,c=Math.sin(t*s)/l;return this._w=o*u+this._w*c,this._x=n*u+this._x*c,this._y=r*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new Xt.Quaternion(this._x,this._y,this._z,this._w)}},Xt.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)},Xt.Vector2=function(e,t){this.x=e||0,this.y=t||0},Xt.Vector2.prototype={constructor:Xt.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},sub:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(e,t){return void 0===o&&(o=new Xt.Vector2,a=new Xt.Vector2),o.set(e,e),a.set(t,t),this.clamp(o,a)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},clone:function(){return new Xt.Vector2(this.x,this.y)}},Xt.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},Xt.Vector3.prototype={constructor:Xt.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e instanceof Xt.Euler==0&&Xt.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===g&&(g=new Xt.Quaternion),this.applyQuaternion(g.setFromEuler(e)),this},applyAxisAngle:function(e,t){return void 0===m&&(m=new Xt.Quaternion),this.applyQuaternion(m.setFromAxisAngle(e,t)),this},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this},project:function(e){return void 0===d&&(d=new Xt.Matrix4),d.multiplyMatrices(e.projectionMatrix,d.getInverse(e.matrixWorld)),this.applyProjection(d)},unproject:function(e){return void 0===f&&(f=new Xt.Matrix4),f.multiplyMatrices(e.matrixWorld,f.getInverse(e.projectionMatrix)),this.applyProjection(f)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(e,t){return void 0===h&&(h=new Xt.Vector3,p=new Xt.Vector3),h.set(e,e,e),p.set(t,t,t),this.clamp(h,p)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},cross:function(e,t){if(void 0!==t)return Xt.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){return void 0===u&&(u=new Xt.Vector3),u.copy(e).normalize(),c=this.dot(u),this.copy(u).multiplyScalar(c)},projectOnPlane:function(e){return void 0===l&&(l=new Xt.Vector3),l.copy(this).projectOnVector(e),this.sub(l)},reflect:function(e){return void 0===s&&(s=new Xt.Vector3),this.sub(s.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(Xt.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},setEulerFromRotationMatrix:function(e,t){Xt.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){Xt.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return Xt.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return Xt.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return Xt.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this},clone:function(){return new Xt.Vector3(this.x,this.y,this.z)}},Xt.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},Xt.Vector4.prototype={constructor:Xt.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(Xt.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return this.z=t<1e-4?(this.x=1,this.y=0):(this.x=e.x/t,this.y=e.y/t,e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],c=o[5],h=o[9],p=o[2],f=o[6],d=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-p)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+p)<.1&&Math.abs(h+f)<.1&&Math.abs(a+c+d-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(c+1)/2,y=(d+1)/2,v=(s+u)/4,b=(l+p)/4,x=(h+f)/4;return g<m&&y<m?i=m<.01?(n=0,r=.707106781):(r=v/(n=Math.sqrt(m)),b/n):y<g?i=g<.01?(r=0,n=.707106781):(n=v/(r=Math.sqrt(g)),x/r):y<.01?(r=n=.707106781,i=0):(n=b/(i=Math.sqrt(y)),r=x/i),this.set(n,r,i,t),this}var w=Math.sqrt((f-h)*(f-h)+(l-p)*(l-p)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(f-h)/w,this.y=(l-p)/w,this.z=(u-s)/w,this.w=Math.acos((a+c+d-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(e,t){return void 0===y&&(y=new Xt.Vector4,v=new Xt.Vector4),y.set(e,e,e,e),v.set(t,t,t,t),this.clamp(y,v)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this},clone:function(){return new Xt.Vector4(this.x,this.y,this.z,this.w)}},Xt.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Xt.Euler.DefaultOrder},Xt.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Xt.Euler.DefaultOrder="XYZ",Xt.Euler.prototype={constructor:Xt.Euler,_x:0,_y:0,_z:0,_order:Xt.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Xt.Math.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],p=i[6],f=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,f),this._y=0)):Xt.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(e,t,n){return void 0===x&&(x=new Xt.Matrix4),x.makeRotationFromQuaternion(e),this.setFromRotationMatrix(x,t,n),this},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(b=new Xt.Quaternion,function(e){b.setFromEuler(this),this.setFromQuaternion(b,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Xt.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new Xt.Euler(this._x,this._y,this._z,this._order)}},Xt.Line3=function(e,t){this.start=void 0!==e?e:new Xt.Vector3,this.end=void 0!==t?t:new Xt.Vector3},Xt.Line3.prototype={constructor:Xt.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new Xt.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Xt.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new Xt.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(w=new Xt.Vector3,_=new Xt.Vector3,function(e,t){w.subVectors(e,this.start),_.subVectors(this.end,this.start);var n=_.dot(_),r=_.dot(w)/n;return t&&(r=Xt.Math.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new Xt.Vector3;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new Xt.Line3).copy(this)}},Xt.Box2=function(e,t){this.min=void 0!==e?e:new Xt.Vector2(1/0,1/0),this.max=void 0!==t?t:new Xt.Vector2(-1/0,-1/0)},Xt.Box2.prototype={constructor:Xt.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(S=new Xt.Vector2,function(e,t){var n=S.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new Xt.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new Xt.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new Xt.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new Xt.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:(M=new Xt.Vector2,function(e){return M.copy(e).clamp(this.min,this.max).sub(e).length()}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new Xt.Box2).copy(this)}},Xt.Box3=function(e,t){this.min=void 0!==e?e:new Xt.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new Xt.Vector3(-1/0,-1/0,-1/0)},Xt.Box3.prototype={constructor:Xt.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(P=new Xt.Vector3,function(e,t){var n=P.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),setFromObject:(A=new Xt.Vector3,function(e){var t=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n=e.geometry;if(void 0!==n)if(n instanceof Xt.Geometry)for(var r=n.vertices,i=0,o=r.length;i<o;i++)A.copy(r[i]),A.applyMatrix4(e.matrixWorld),t.expandByPoint(A);else if(n instanceof Xt.BufferGeometry&&void 0!==n.attributes.position){var a=n.attributes.position.array;for(i=0,o=a.length;i<o;i+=3)A.set(a[i],a[i+1],a[i+2]),A.applyMatrix4(e.matrixWorld),t.expandByPoint(A)}}),this}),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new Xt.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new Xt.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Xt.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new Xt.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:(C=new Xt.Vector3,function(e){return C.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(T=new Xt.Vector3,function(e){var t=e||new Xt.Sphere;return t.center=this.center(),t.radius=.5*this.size(T).length(),t}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(E=[new Xt.Vector3,new Xt.Vector3,new Xt.Vector3,new Xt.Vector3,new Xt.Vector3,new Xt.Vector3,new Xt.Vector3,new Xt.Vector3],function(e){return E[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),E[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),E[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),E[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),E[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),E[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),E[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),E[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(E),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new Xt.Box3).copy(this)}},Xt.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&Xt.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},Xt.Matrix3.prototype={constructor:Xt.Matrix3,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=i,u[7]=o,u[2]=a,u[5]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return Xt.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return Xt.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:(L=new Xt.Vector3,function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);for(var r=0,i=t;r<n;r+=3,i+=3)L.x=e[i],L.y=e[i+1],L.z=e[i+2],L.applyMatrix3(this),e[i]=L.x,e[i+1]=L.y,e[i+2]=L.z;return e}),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0!==i)return this.multiplyScalar(1/i),this;var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return Xt.warn(o),this.identity(),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new Xt.Matrix3).fromArray(this.elements)}},Xt.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&Xt.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},Xt.Matrix4.prototype={constructor:Xt.Matrix4,set:function(e,t,n,r,i,o,a,s,l,u,c,h,p,f,d,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return Xt.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){var r=this.elements;return e.set(r[0],r[1],r[2]),t.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(B=new Xt.Vector3,function(e){var t=this.elements,n=e.elements,r=1/B.set(n[0],n[1],n[2]).length(),i=1/B.set(n[4],n[5],n[6]).length(),o=1/B.set(n[8],n[9],n[10]).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,this}),makeRotationFromEuler:function(e){e instanceof Xt.Euler==0&&Xt.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*u,p=o*c,f=a*u,d=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=p+f*l,t[5]=h-d*l,t[9]=-a*s,t[2]=d-h*l,t[6]=f+p*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,g=s*c,y=l*u,v=l*c;t[0]=m+v*a,t[4]=y*a-g,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=g*a-y,t[6]=v+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*u,g=s*c,y=l*u,v=l*c,t[0]=m-v*a,t[4]=-o*c,t[8]=y+g*a,t[1]=g+y*a,t[5]=o*u,t[9]=v-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*u,p=o*c,f=a*u,d=a*c,t[0]=s*u,t[4]=f*l-p,t[8]=h*l+d,t[1]=s*c,t[5]=d*l+h,t[9]=p*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*u,t[4]=_-b*c,t[8]=w*c+x,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=x*c+w,t[10]=b-_*c}else"XZY"===e.order&&(b=o*s,x=o*l,w=a*s,_=a*l,t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=b*c+_,t[5]=o*u,t[9]=x*c-w,t[2]=w*c-x,t[6]=a*u,t[10]=_*c+b);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return Xt.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,l=i+i,u=n*a,c=n*s,h=n*l,p=r*s,f=r*l,d=i*l,m=o*a,g=o*s,y=o*l;return t[0]=1-(p+d),t[4]=c-y,t[8]=h+g,t[1]=c+y,t[5]=1-(u+d),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(u+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(U=new Xt.Vector3,D=new Xt.Vector3,N=new Xt.Vector3,function(e,t,n){var r=this.elements;return N.subVectors(e,t).normalize(),0===N.length()&&(N.z=1),U.crossVectors(n,N).normalize(),0===U.length()&&(N.x+=1e-4,U.crossVectors(n,N).normalize()),D.crossVectors(N,U),r[0]=U.x,r[4]=D.x,r[8]=N.x,r[1]=U.y,r[5]=D.y,r[9]=N.y,r[2]=U.z,r[6]=D.z,r[10]=N.z,this}),multiply:function(e,t){return void 0!==t?(Xt.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],p=n[13],f=n[2],d=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],w=r[0],_=r[4],M=r[8],S=r[12],E=r[1],T=r[5],C=r[9],A=r[13],P=r[2],L=r[6],R=r[10],k=r[14],O=r[3],F=r[7],U=r[11],D=r[15];return i[0]=o*w+a*E+s*P+l*O,i[4]=o*_+a*T+s*L+l*F,i[8]=o*M+a*C+s*R+l*U,i[12]=o*S+a*A+s*k+l*D,i[1]=u*w+c*E+h*P+p*O,i[5]=u*_+c*T+h*L+p*F,i[9]=u*M+c*C+h*R+p*U,i[13]=u*S+c*A+h*k+p*D,i[2]=f*w+d*E+m*P+g*O,i[6]=f*_+d*T+m*L+g*F,i[10]=f*M+d*C+m*R+g*U,i[14]=f*S+d*A+m*k+g*D,i[3]=y*w+v*E+b*P+x*O,i[7]=y*_+v*T+b*L+x*F,i[11]=y*M+v*C+b*R+x*U,i[15]=y*S+v*A+b*k+x*D,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return Xt.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return Xt.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return Xt.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:(F=new Xt.Vector3,function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);for(var r=0,i=t;r<n;r+=3,i+=3)F.x=e[i],F.y=e[i+1],F.z=e[i+2],F.applyMatrix4(this),e[i]=F.x,e[i+1]=F.y,e[i+2]=F.z;return e}),rotateAxis:function(e){Xt.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return Xt.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],p=e[14];return e[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*p-n*s*p)+e[7]*(+t*s*p-t*l*h+i*o*h-r*o*p+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*p-i*o*c+n*o*p+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*h+r*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:(O=new Xt.Vector3,function(){Xt.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return O.set(e[12],e[13],e[14])}),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[12],l=r[1],u=r[5],c=r[9],h=r[13],p=r[2],f=r[6],d=r[10],m=r[14],g=r[3],y=r[7],v=r[11],b=r[15];n[0]=c*m*y-h*d*y+h*f*v-u*m*v-c*f*b+u*d*b,n[4]=s*d*y-a*m*y-s*f*v+o*m*v+a*f*b-o*d*b,n[8]=a*h*y-s*c*y+s*u*v-o*h*v-a*u*b+o*c*b,n[12]=s*c*f-a*h*f-s*u*d+o*h*d+a*u*m-o*c*m,n[1]=h*d*g-c*m*g-h*p*v+l*m*v+c*p*b-l*d*b,n[5]=a*m*g-s*d*g+s*p*v-i*m*v-a*p*b+i*d*b,n[9]=s*c*g-a*h*g-s*l*v+i*h*v+a*l*b-i*c*b,n[13]=a*h*p-s*c*p+s*l*d-i*h*d-a*l*m+i*c*m,n[2]=u*m*g-h*f*g+h*p*y-l*m*y-u*p*b+l*f*b,n[6]=s*f*g-o*m*g-s*p*y+i*m*y+o*p*b-i*f*b,n[10]=o*h*g-s*u*g+s*l*y-i*h*y-o*l*b+i*u*b,n[14]=s*u*p-o*h*p-s*l*f+i*h*f+o*l*m-i*u*m,n[3]=c*f*g-u*d*g-c*p*y+l*d*y+u*p*v-l*f*v,n[7]=o*d*g-a*f*g+a*p*y-i*d*y-o*p*v+i*f*v,n[11]=a*u*g-o*c*g-a*l*y+i*c*y+o*l*v-i*u*v,n[15]=o*c*p-a*u*p+a*l*f-i*c*f-o*l*d+i*u*d;var x=i*n[0]+l*n[4]+p*n[8]+g*n[12];if(0!=x)return this.multiplyScalar(1/x),this;var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(w);return Xt.warn(w),this.identity(),this},translate:function(e){Xt.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){Xt.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){Xt.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){Xt.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){Xt.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:(R=new Xt.Vector3,k=new Xt.Matrix4,function(e,t,n){var r=this.elements,i=R.set(r[0],r[1],r[2]).length(),o=R.set(r[4],r[5],r[6]).length(),a=R.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],k.elements.set(this.elements);var s=1/i,l=1/o,u=1/a;return k.elements[0]*=s,k.elements[1]*=s,k.elements[2]*=s,k.elements[4]*=l,k.elements[5]*=l,k.elements[6]*=l,k.elements[8]*=u,k.elements[9]*=u,k.elements[10]*=u,t.setFromRotationMatrix(k),n.x=i,n.y=o,n.z=a,this}),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(Xt.Math.degToRad(.5*e)),o=-i,a=o*t,s=i*t;return this.makeFrustum(a,s,o,i,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=t-e,l=n-r,u=o-i,c=(t+e)/s,h=(n+r)/l,p=(o+i)/u;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2/u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new Xt.Matrix4).fromArray(this.elements)}},Xt.Ray=function(e,t){this.origin=void 0!==e?e:new Xt.Vector3,this.direction=void 0!==t?t:new Xt.Vector3},Xt.Ray.prototype={constructor:Xt.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Xt.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:(K=new Xt.Vector3,function(e){return this.origin.copy(this.at(e,K)),this}),closestPointToPoint:function(e,t){var n=t||new Xt.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:(Y=new Xt.Vector3,function(e){var t=Y.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceTo(e):(Y.copy(this.direction).multiplyScalar(t).add(this.origin),Y.distanceTo(e))}),distanceSqToSegment:(G=new Xt.Vector3,X=new Xt.Vector3,q=new Xt.Vector3,function(e,t,n,r){G.copy(e).add(t).multiplyScalar(.5),X.copy(t).sub(e).normalize(),q.copy(this.origin).sub(G);var i,o,a,s,l=.5*e.distanceTo(t),u=-this.direction.dot(X),c=q.dot(this.direction),h=-q.dot(X),p=q.lengthSq(),f=Math.abs(1-u*u);if(0<f)if(o=u*c-h,s=l*f,0<=(i=u*h-c))if(-s<=o)if(o<=s){var d=1/f;a=(i*=d)*(i+u*(o*=d)+2*c)+o*(u*i+o+2*h)+p}else o=l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+p;else o=-l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+p;else a=o<=-s?-(i=Math.max(0,-(-u*l+c)))*i+(o=0<i?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+p:o<=s?(i=0,(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+p):-(i=Math.max(0,-(u*l+c)))*i+(o=0<i?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+p;else o=0<u?-l:l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(X).multiplyScalar(o).add(G),a}),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:(W=new Xt.Vector3,function(e,t){W.subVectors(e.center,this.origin);var n=W.dot(this.direction),r=W.dot(W)-n*n,i=e.radius*e.radius;if(i<r)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=n?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:(H=new Xt.Vector3,function(e){return null!==this.intersectBox(e,H)}),intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return r=0<=l?(n=(e.min.x-h.x)*l,(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,(e.min.x-h.x)*l),(o=0<=u?(i=(e.min.y-h.y)*u,(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,(e.min.y-h.y)*u))<n||r<i?null:((n<i||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),(s=0<=c?(a=(e.min.z-h.z)*c,(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,(e.min.z-h.z)*c))<n||r<a?null:((n<a||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(0<=n?n:r,t)))},intersectTriangle:(z=new Xt.Vector3,V=new Xt.Vector3,I=new Xt.Vector3,j=new Xt.Vector3,function(e,t,n,r,i){V.subVectors(t,e),I.subVectors(n,e),j.crossVectors(V,I);var o,a=this.direction.dot(j);if(0<a){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}z.subVectors(this.origin,e);var s=o*this.direction.dot(I.crossVectors(z,I));if(s<0)return null;var l=o*this.direction.dot(V.cross(z));if(l<0)return null;if(a<s+l)return null;var u=-o*z.dot(j);return u<0?null:this.at(u/a,i)}),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new Xt.Ray).copy(this)}},Xt.Sphere=function(e,t){this.center=void 0!==e?e:new Xt.Vector3,this.radius=void 0!==t?t:0},Xt.Sphere.prototype={constructor:Xt.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Q=new Xt.Box3,function(e,t){var n=this.center;void 0!==t?n.copy(t):Q.setFromPoints(e).center(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new Xt.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Xt.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new Xt.Sphere).copy(this)}},Xt.Frustum=function(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Xt.Plane,void 0!==t?t:new Xt.Plane,void 0!==n?n:new Xt.Plane,void 0!==r?r:new Xt.Plane,void 0!==i?i:new Xt.Plane,void 0!==o?o:new Xt.Plane]},Xt.Frustum.prototype={constructor:Xt.Frustum,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],p=n[9],f=n[10],d=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-r,c-s,d-h,v-m).normalize(),t[1].setComponents(a+r,c+s,d+h,v+m).normalize(),t[2].setComponents(a+i,c+l,d+p,v+g).normalize(),t[3].setComponents(a-i,c-l,d-p,v-g).normalize(),t[4].setComponents(a-o,c-u,d-f,v-y).normalize(),t[5].setComponents(a+o,c+u,d+f,v+y).normalize(),this},intersectsObject:(J=new Xt.Sphere,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),J.copy(t.boundingSphere),J.applyMatrix4(e.matrixWorld),this.intersectsSphere(J)}),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Z=new Xt.Vector3,$=new Xt.Vector3,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];Z.x=0<r.normal.x?e.min.x:e.max.x,$.x=0<r.normal.x?e.max.x:e.min.x,Z.y=0<r.normal.y?e.min.y:e.max.y,$.y=0<r.normal.y?e.max.y:e.min.y,Z.z=0<r.normal.z?e.min.z:e.max.z,$.z=0<r.normal.z?e.max.z:e.min.z;var i=r.distanceToPoint(Z),o=r.distanceToPoint($);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new Xt.Frustum).copy(this)}},Xt.Plane=function(e,t){this.normal=void 0!==e?e:new Xt.Vector3(1,0,0),this.constant=void 0!==t?t:0},Xt.Plane.prototype={constructor:Xt.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(ie=new Xt.Vector3,oe=new Xt.Vector3,function(e,t,n){var r=ie.subVectors(n,t).cross(oe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new Xt.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&0<n||n<0&&0<t},intersectLine:(re=new Xt.Vector3,function(e,t){var n=t||new Xt.Vector3,r=e.delta(re),i=this.normal.dot(r);if(0==i)return 0==this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||1<o?void 0:n.copy(r).multiplyScalar(o).add(e.start)}),coplanarPoint:function(e){return(e||new Xt.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(ee=new Xt.Vector3,te=new Xt.Vector3,ne=new Xt.Matrix3,function(e,t){var n=t||ne.getNormalMatrix(e),r=ee.copy(this.normal).applyMatrix3(n),i=this.coplanarPoint(te);return i.applyMatrix4(e),this.setFromNormalAndCoplanarPoint(r,i),this}),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new Xt.Plane).copy(this)}},Xt.Math={generateUUID:(ue="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),ce=new Array(36),he=0,function(){for(var e=0;e<36;e++)ce[e]=8==e||13==e||18==e||23==e?"-":14==e?"4":(he<=2&&(he=33554432+16777216*Math.random()|0),le=15&he,he>>=4,ue[19==e?3&le|8:le]);return ce.join("")}),clamp:function(e,t,n){return e<t?t:n<e?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return Math.floor(this.randFloat(e,t))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:(se=Math.PI/180,function(e){return e*se}),radToDeg:(ae=180/Math.PI,function(e){return e*ae}),isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}},Xt.Spline=function(e){this.points=e;var t,n,r,i,o,a,s,l,u,c=[],h={x:0,y:0,z:0};function p(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return t=(this.points.length-1)*e,n=Math.floor(t),r=t-n,c[0]=0===n?n:n-1,c[1]=n,c[2]=n>this.points.length-2?this.points.length-1:n+1,c[3]=n>this.points.length-3?this.points.length-1:n+2,a=this.points[c[0]],s=this.points[c[1]],l=this.points[c[2]],u=this.points[c[3]],o=r*(i=r*r),h.x=p(a.x,s.x,l.x,u.x,r,i,o),h.y=p(a.y,s.y,l.y,u.y,r,i,o),h.z=p(a.z,s.z,l.z,u.z,r,i,o),h},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i,o=0,a=0,s=0,l=new Xt.Vector3,u=new Xt.Vector3,c=[],h=0;for(c[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;t<r;t++)n=t/r,i=this.getPoint(n),u.copy(i),h+=u.distanceTo(l),l.copy(i),o=(this.points.length-1)*n,(a=Math.floor(o))!=s&&(c[a]=h,s=a);return c[c.length]=h,{chunks:c,total:h}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,a,s,l,u=[],c=new Xt.Vector3,h=this.getLength();for(u.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=h.chunks[t]-h.chunks[t-1],s=Math.ceil(e*a/h.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<s-1;n++)r=i+n*(1/s)*(o-i),l=this.getPoint(r),u.push(c.copy(l).clone());u.push(c.copy(this.points[t]).clone())}this.points=u}},Xt.Triangle=function(e,t,n){this.a=void 0!==e?e:new Xt.Vector3,this.b=void 0!==t?t:new Xt.Vector3,this.c=void 0!==n?n:new Xt.Vector3},Xt.Triangle.normal=(pe=new Xt.Vector3,function(e,t,n,r){var i=r||new Xt.Vector3;i.subVectors(n,t),pe.subVectors(e,t),i.cross(pe);var o=i.lengthSq();return 0<o?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}),Xt.Triangle.barycoordFromPoint=(fe=new Xt.Vector3,de=new Xt.Vector3,me=new Xt.Vector3,function(e,t,n,r,i){fe.subVectors(r,t),de.subVectors(n,t),me.subVectors(e,t);var o=fe.dot(fe),a=fe.dot(de),s=fe.dot(me),l=de.dot(de),u=de.dot(me),c=o*l-a*a,h=i||new Xt.Vector3;if(0==c)return h.set(-2,-1,-1);var p=1/c,f=(l*s-a*u)*p,d=(o*u-a*s)*p;return h.set(1-f-d,d,f)}),Xt.Triangle.containsPoint=(ge=new Xt.Vector3,function(e,t,n,r){var i=Xt.Triangle.barycoordFromPoint(e,t,n,r,ge);return 0<=i.x&&0<=i.y&&i.x+i.y<=1}),Xt.Triangle.prototype={constructor:Xt.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:(ye=new Xt.Vector3,ve=new Xt.Vector3,function(){return ye.subVectors(this.c,this.b),ve.subVectors(this.a,this.b),.5*ye.cross(ve).length()}),midpoint:function(e){return(e||new Xt.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Xt.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new Xt.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Xt.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Xt.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new Xt.Triangle).copy(this)}},Xt.Clock=function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},Xt.Clock.prototype={constructor:Xt.Clock,start:function(){this.startTime=void 0!==Gt.performance&&void 0!==Gt.performance.now?Gt.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==Gt.performance&&void 0!==Gt.performance.now?Gt.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},Xt.EventDispatcher=function(){},Xt.EventDispatcher.prototype={constructor:Xt.EventDispatcher,apply:function(e){e.addEventListener=Xt.EventDispatcher.prototype.addEventListener,e.hasEventListener=Xt.EventDispatcher.prototype.hasEventListener,e.removeEventListener=Xt.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=Xt.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=[],r=t.length,i=0;i<r;i++)n[i]=t[i];for(i=0;i<r;i++)n[i].call(this,e)}}}},function(e){e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},n=function(e,t,r,i){if(e.raycast(t,r),!0===i)for(var o=e.children,a=0,s=o.length;a<s;a++)n(o[a],t,r,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.copy(n.position),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(n.position).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):e.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(r,i){var o=[];if(r instanceof Array==0)return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),o;for(var a=0,s=r.length;a<s;a++)n(r[a],this,o,i);return o.sort(t),o}}}(Xt),Xt.Object3D=function(){Object.defineProperty(this,"id",{value:Xt.Object3DIdCount++}),this.uuid=Xt.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=Xt.Object3D.DefaultUp.clone();var e=new Xt.Vector3,t=new Xt.Euler,n=new Xt.Quaternion,r=new Xt.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r}}),this.rotationAutoUpdate=!0,this.matrix=new Xt.Matrix4,this.matrixWorld=new Xt.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},Xt.Object3D.DefaultUp=new Xt.Vector3(0,1,0),Xt.Object3D.prototype={constructor:Xt.Object3D,get eulerOrder(){return Xt.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){Xt.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){Xt.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){Xt.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Fe=new Xt.Quaternion,function(e,t){return Fe.setFromAxisAngle(e,t),this.quaternion.multiply(Fe),this}),rotateX:(Oe=new Xt.Vector3(1,0,0),function(e){return this.rotateOnAxis(Oe,e)}),rotateY:(ke=new Xt.Vector3(0,1,0),function(e){return this.rotateOnAxis(ke,e)}),rotateZ:(Re=new Xt.Vector3(0,0,1),function(e){return this.rotateOnAxis(Re,e)}),translateOnAxis:(Le=new Xt.Vector3,function(e,t){return Le.copy(e).applyQuaternion(this.quaternion),this.position.add(Le.multiplyScalar(t)),this}),translate:function(e,t){return Xt.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:(Pe=new Xt.Vector3(1,0,0),function(e){return this.translateOnAxis(Pe,e)}),translateY:(Ae=new Xt.Vector3(0,1,0),function(e){return this.translateOnAxis(Ae,e)}),translateZ:(Ce=new Xt.Vector3(0,0,1),function(e){return this.translateOnAxis(Ce,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Te=new Xt.Matrix4,function(e){return e.applyMatrix4(Te.getInverse(this.matrixWorld))}),lookAt:(Ee=new Xt.Matrix4,function(e){Ee.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(Ee)}),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?Xt.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e instanceof Xt.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):Xt.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);-1!==n&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getChildByName:function(e){return Xt.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new Xt.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Me=new Xt.Vector3,Se=new Xt.Vector3,function(e){var t=e||new Xt.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Me,t,Se),t}),getWorldRotation:(_e=new Xt.Quaternion,function(e){var t=e||new Xt.Euler;return this.getWorldQuaternion(_e),t.setFromQuaternion(_e,this.rotation.order,!1)}),getWorldScale:(xe=new Xt.Vector3,we=new Xt.Quaternion,function(e){var t=e||new Xt.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(xe,we,t),t}),getWorldDirection:(be=new Xt.Quaternion,function(e){var t=e||new Xt.Vector3;return this.getWorldQuaternion(be),t.set(0,0,1).applyQuaternion(be)}),raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverseVisible(e)}},traverseAncestors:function(e){this.parent&&(e(this.parent),this.parent.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},n={},r=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===n[t.uuid]){var r=t.toJSON();delete r.metadata,n[t.uuid]=r,e.materials.push(r)}return t.uuid},i=function(n){var o={};if(o.uuid=n.uuid,o.type=n.type,""!==n.name&&(o.name=n.name),"{}"!==JSON.stringify(n.userData)&&(o.userData=n.userData),!0!==n.visible&&(o.visible=n.visible),n instanceof Xt.PerspectiveCamera?(o.fov=n.fov,o.aspect=n.aspect,o.near=n.near,o.far=n.far):n instanceof Xt.OrthographicCamera?(o.left=n.left,o.right=n.right,o.top=n.top,o.bottom=n.bottom,o.near=n.near,o.far=n.far):n instanceof Xt.AmbientLight?o.color=n.color.getHex():n instanceof Xt.DirectionalLight?(o.color=n.color.getHex(),o.intensity=n.intensity):n instanceof Xt.PointLight?(o.color=n.color.getHex(),o.intensity=n.intensity,o.distance=n.distance,o.decay=n.decay):n instanceof Xt.SpotLight?(o.color=n.color.getHex(),o.intensity=n.intensity,o.distance=n.distance,o.angle=n.angle,o.exponent=n.exponent,o.decay=n.decay):n instanceof Xt.HemisphereLight?(o.color=n.color.getHex(),o.groundColor=n.groundColor.getHex()):n instanceof Xt.Mesh||n instanceof Xt.Line||n instanceof Xt.PointCloud?(o.geometry=function(n){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[n.uuid]){var r=n.toJSON();delete r.metadata,t[n.uuid]=r,e.geometries.push(r)}return n.uuid}(n.geometry),o.material=r(n.material),n instanceof Xt.Line&&(o.mode=n.mode)):n instanceof Xt.Sprite&&(o.material=r(n.material)),o.matrix=n.matrix.toArray(),0<n.children.length){o.children=[];for(var a=0;a<n.children.length;a++)o.children.push(i(n.children[a]))}return o};return e.object=i(this),e},clone:function(e,t){if(void 0===e&&(e=new Xt.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var n=0;n<this.children.length;n++){var r=this.children[n];e.add(r.clone())}return e}},Xt.EventDispatcher.prototype.apply(Xt.Object3D.prototype),Xt.Object3DIdCount=0,Xt.Face3=function(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r instanceof Xt.Vector3?r:new Xt.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=i instanceof Xt.Color?i:new Xt.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},Xt.Face3.prototype={constructor:Xt.Face3,clone:function(){var e=new Xt.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;t<n;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,n=this.vertexColors.length;t<n;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,n=this.vertexTangents.length;t<n;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},Xt.Face4=function(e,t,n,r,i,o,a){return Xt.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Xt.Face3(e,t,n,i,o,a)},Xt.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},Xt.BufferAttribute.prototype={constructor:Xt.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return new Xt.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},Xt.Int8Attribute=function(e,t){return Xt.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Uint8Attribute=function(e,t){return Xt.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Uint8ClampedAttribute=function(e,t){return Xt.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Int16Attribute=function(e,t){return Xt.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Uint16Attribute=function(e,t){return Xt.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Int32Attribute=function(e,t){return Xt.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Uint32Attribute=function(e,t){return Xt.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Float32Attribute=function(e,t){return Xt.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.Float64Attribute=function(e,t){return Xt.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new Xt.BufferAttribute(e,t)},Xt.DynamicBufferAttribute=function(e,t){Xt.BufferAttribute.call(this,e,t),this.updateRange={offset:0,count:-1}},Xt.DynamicBufferAttribute.prototype=Object.create(Xt.BufferAttribute.prototype),Xt.DynamicBufferAttribute.prototype.constructor=Xt.DynamicBufferAttribute,Xt.DynamicBufferAttribute.prototype.clone=function(){return new Xt.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)},Xt.BufferGeometry=function(){Object.defineProperty(this,"id",{value:Xt.GeometryIdCount++}),this.uuid=Xt.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},Xt.BufferGeometry.prototype={constructor:Xt.BufferGeometry,addAttribute:function(e,t){if(t instanceof Xt.BufferAttribute==0)return Xt.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:t,itemSize:arguments[2]});this.attributes[e]=t,this.attributesKeys=Object.keys(this.attributes)},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:void 0!==n?n:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Xt.Matrix3).getNormalMatrix(e).applyToVector3Array(n.array),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new Xt.Matrix4).setPosition(e)),e},fromGeometry:function(e,t){t=t||{vertexColors:Xt.NoColors};var n=e.vertices,r=e.faces,i=e.faceVertexUvs,o=t.vertexColors,a=0<i[0].length,s=3==r[0].vertexNormals.length,l=new Float32Array(3*r.length*3);this.addAttribute("position",new Xt.BufferAttribute(l,3));var u=new Float32Array(3*r.length*3);if(this.addAttribute("normal",new Xt.BufferAttribute(u,3)),o!==Xt.NoColors){var c=new Float32Array(3*r.length*3);this.addAttribute("color",new Xt.BufferAttribute(c,3))}if(!0===a){var h=new Float32Array(3*r.length*2);this.addAttribute("uv",new Xt.BufferAttribute(h,2))}for(var p=0,f=0,d=0;p<r.length;p++,f+=6,d+=9){var m=r[p],g=n[m.a],y=n[m.b],v=n[m.c];if(l[d]=g.x,l[d+1]=g.y,l[d+2]=g.z,l[d+3]=y.x,l[d+4]=y.y,l[d+5]=y.z,l[d+6]=v.x,l[d+7]=v.y,l[d+8]=v.z,!0===s){var b=m.vertexNormals[0],x=m.vertexNormals[1],w=m.vertexNormals[2];u[d]=b.x,u[d+1]=b.y,u[d+2]=b.z,u[d+3]=x.x,u[d+4]=x.y,u[d+5]=x.z,u[d+6]=w.x,u[d+7]=w.y,u[d+8]=w.z}else{var _=m.normal;u[d]=_.x,u[d+1]=_.y,u[d+2]=_.z,u[d+3]=_.x,u[d+4]=_.y,u[d+5]=_.z,u[d+6]=_.x,u[d+7]=_.y,u[d+8]=_.z}if(o===Xt.FaceColors){var M=m.color;c[d]=M.r,c[d+1]=M.g,c[d+2]=M.b,c[d+3]=M.r,c[d+4]=M.g,c[d+5]=M.b,c[d+6]=M.r,c[d+7]=M.g,c[d+8]=M.b}else if(o===Xt.VertexColors){var S=m.vertexColors[0],E=m.vertexColors[1],T=m.vertexColors[2];c[d]=S.r,c[d+1]=S.g,c[d+2]=S.b,c[d+3]=E.r,c[d+4]=E.g,c[d+5]=E.b,c[d+6]=T.r,c[d+7]=T.g,c[d+8]=T.b}if(!0===a){var C=i[0][p][0],A=i[0][p][1],P=i[0][p][2];h[f]=C.x,h[f+1]=C.y,h[f+2]=A.x,h[f+3]=A.y,h[f+4]=P.x,h[f+5]=P.y}}return this.computeBoundingSphere(),this},computeBoundingBox:(Ne=new Xt.Vector3,function(){null===this.boundingBox&&(this.boundingBox=new Xt.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox;t.makeEmpty();for(var n=0,r=e.length;n<r;n+=3)Ne.set(e[n],e[n+1],e[n+2]),t.expandByPoint(Ne)}void 0!==e&&0!==e.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Xt.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}),computeBoundingSphere:(Ue=new Xt.Box3,De=new Xt.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new Xt.Sphere);var e=this.attributes.position.array;if(e){Ue.makeEmpty();for(var t=this.boundingSphere.center,n=0,r=e.length;n<r;n+=3)De.set(e[n],e[n+1],e[n+2]),Ue.expandByPoint(De);Ue.center(t);var i=0;for(n=0,r=e.length;n<r;n+=3)De.set(e[n],e[n+1],e[n+2]),i=Math.max(i,t.distanceToSquared(De));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Xt.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Xt.BufferAttribute(new Float32Array(t.length),3));else for(var n=0,r=(s=e.normal.array).length;n<r;n++)s[n]=0;var i,o,a,s=e.normal.array,l=new Xt.Vector3,u=new Xt.Vector3,c=new Xt.Vector3,h=new Xt.Vector3,p=new Xt.Vector3;if(e.index)for(var f=e.index.array,d=0<this.offsets.length?this.offsets:[{start:0,count:f.length,index:0}],m=0,g=d.length;m<g;++m){var y=d[m].start,v=d[m].count,b=d[m].index;for(n=y,r=y+v;n<r;n+=3)i=3*(b+f[n]),o=3*(b+f[n+1]),a=3*(b+f[n+2]),l.fromArray(t,i),u.fromArray(t,o),c.fromArray(t,a),h.subVectors(c,u),p.subVectors(l,u),h.cross(p),s[i]+=h.x,s[i+1]+=h.y,s[i+2]+=h.z,s[o]+=h.x,s[o+1]+=h.y,s[o+2]+=h.z,s[a]+=h.x,s[a+1]+=h.y,s[a+2]+=h.z}else for(n=0,r=t.length;n<r;n+=9)l.fromArray(t,n),u.fromArray(t,n+3),c.fromArray(t,n+6),h.subVectors(c,u),p.subVectors(l,u),h.cross(p),s[n]=h.x,s[n+1]=h.y,s[n+2]=h.z,s[n+3]=h.x,s[n+4]=h.y,s[n+5]=h.z,s[n+6]=h.x,s[n+7]=h.y,s[n+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){if(void 0!==this.attributes.index&&void 0!==this.attributes.position&&void 0!==this.attributes.normal&&void 0!==this.attributes.uv){var e=this.attributes.index.array,t=this.attributes.position.array,n=this.attributes.normal.array,r=this.attributes.uv.array,i=t.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new Xt.BufferAttribute(new Float32Array(4*i),4));for(var o=this.attributes.tangent.array,a=[],s=[],l=0;l<i;l++)a[l]=new Xt.Vector3,s[l]=new Xt.Vector3;var u,c,h,p,f,d,m,g,y,v,b,x,w,_,M,S,E,T,C=new Xt.Vector3,A=new Xt.Vector3,P=new Xt.Vector3,L=new Xt.Vector2,R=new Xt.Vector2,k=new Xt.Vector2,O=new Xt.Vector3,F=new Xt.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,e.length,0);var U,D,N,B=this.drawcalls;for(_=0,M=B.length;_<M;++_){var z=B[_].start,V=B[_].count,I=B[_].index;for(w=(x=z)+V;x<w;x+=3)U=S=I+e[x],D=E=I+e[x+1],N=T=I+e[x+2],C.fromArray(t,3*U),A.fromArray(t,3*D),P.fromArray(t,3*N),L.fromArray(r,2*U),R.fromArray(r,2*D),k.fromArray(r,2*N),u=A.x-C.x,c=P.x-C.x,h=A.y-C.y,p=P.y-C.y,f=A.z-C.z,d=P.z-C.z,m=R.x-L.x,g=k.x-L.x,y=R.y-L.y,b=1/(m*(v=k.y-L.y)-g*y),O.set((v*u-y*c)*b,(v*h-y*p)*b,(v*f-y*d)*b),F.set((m*c-g*u)*b,(m*p-g*h)*b,(m*d-g*f)*b),a[U].add(O),a[D].add(O),a[N].add(O),s[U].add(F),s[D].add(F),s[N].add(F)}var j,H,W,G=new Xt.Vector3,X=new Xt.Vector3,q=new Xt.Vector3,Y=new Xt.Vector3;for(_=0,M=B.length;_<M;++_)for(z=B[_].start,V=B[_].count,I=B[_].index,w=(x=z)+V;x<w;x+=3)S=I+e[x],E=I+e[x+1],T=I+e[x+2],K(S),K(E),K(T)}else Xt.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function K(e){q.fromArray(n,3*e),Y.copy(q),H=a[e],G.copy(H),G.sub(q.multiplyScalar(q.dot(H))).normalize(),X.crossVectors(Y,H),W=X.dot(s[e]),j=W<0?-1:1,o[4*e]=G.x,o[4*e+1]=G.y,o[4*e+2]=G.z,o[4*e+3]=j}},computeOffsets:function(e){void 0===e&&(e=65535);for(var t=this.attributes.index.array,n=this.attributes.position.array,r=t.length/3,i=new Uint16Array(t.length),o=0,a=0,s=[{start:0,count:0,index:0}],l=s[0],u=0,c=new Int32Array(6),h=new Int32Array(n.length),p=new Int32Array(n.length),f=0;f<n.length;f++)h[f]=-1,p[f]=-1;for(var d=0;d<r;d++){for(var m=u=0;m<3;m++)-1==h[b=t[3*d+m]]?(c[2*m]=b,c[2*m+1]=-1,u++):h[b]<l.index?(c[2*m]=b,c[2*m+1]=-1):(c[2*m]=b,c[2*m+1]=h[b]);if(a+u>l.index+e){var g={start:o,count:0,index:a};s.push(g),l=g;for(var y=0;y<6;y+=2)-1<(v=c[y+1])&&v<l.index&&(c[y+1]=-1)}for(y=0;y<6;y+=2){var v,b=c[y];-1===(v=c[y+1])&&(v=a++),p[h[b]=v]=b,i[o++]=v-l.index,l.count++}}return this.reorderBuffers(i,p,a),this.offsets=s,this.drawcalls=s},merge:function(e,t){if(e instanceof Xt.BufferGeometry!=0){void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)i[l]=a[s];return this}Xt.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},reorderBuffers:function(e,t,n){var r={};for(var i in this.attributes)if("index"!=i){var o=this.attributes[i].array;r[i]=new o.constructor(this.attributes[i].itemSize*n)}for(var a=0;a<n;a++){var s=t[a];for(var i in this.attributes)if("index"!=i)for(var l=this.attributes[i].array,u=this.attributes[i].itemSize,c=r[i],h=0;h<u;h++)c[a*u+h]=l[s*u+h]}for(var i in this.attributes.index.array=e,this.attributes)"index"!=i&&(this.attributes[i].array=r[i],this.attributes[i].numItems=this.attributes[i].itemSize*n)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,n=this.offsets,r=this.boundingSphere;for(var i in t){var o=t[i],a=Array.prototype.slice.call(o.array);e.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:a}}return 0<n.length&&(e.data.offsets=JSON.parse(JSON.stringify(n))),null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){var e=new Xt.BufferGeometry;for(var t in this.attributes){var n=this.attributes[t];e.addAttribute(t,n.clone())}for(var r=0,i=this.offsets.length;r<i;r++){var o=this.offsets[r];e.offsets.push({start:o.start,index:o.index,count:o.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},Xt.EventDispatcher.prototype.apply(Xt.BufferGeometry.prototype),Xt.Geometry=function(){Object.defineProperty(this,"id",{value:Xt.GeometryIdCount++}),this.uuid=Xt.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},Xt.Geometry.prototype={constructor:Xt.Geometry,applyMatrix:function(e){for(var t=(new Xt.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},fromBufferGeometry:function(e){for(var t=this,n=e.attributes,r=n.position.array,i=void 0!==n.index?n.index.array:void 0,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,l=[],u=[],c=0,h=0;c<r.length;c+=3,h+=2)t.vertices.push(new Xt.Vector3(r[c],r[c+1],r[c+2])),void 0!==o&&l.push(new Xt.Vector3(o[c],o[c+1],o[c+2])),void 0!==a&&t.colors.push(new Xt.Color(a[c],a[c+1],a[c+2])),void 0!==s&&u.push(new Xt.Vector2(s[h],s[h+1]));var p=function(e,n,r){var i=void 0!==o?[l[e].clone(),l[n].clone(),l[r].clone()]:[],c=void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[];t.faces.push(new Xt.Face3(e,n,r,i,c)),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[r].clone()])};if(void 0!==i){var f=e.drawcalls;if(0<f.length)for(c=0;c<f.length;c++)for(var d=f[c],m=d.start,g=d.count,y=d.index,v=(h=m,m+g);h<v;h+=3)p(y+i[h],y+i[h+1],y+i[h+2]);else for(c=0;c<i.length;c+=3)p(i[c],i[c+1],i[c+2])}else for(c=0;c<r.length/3;c+=3)p(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new Xt.Matrix4).setPosition(e)),e},computeFaceNormals:function(){for(var e=new Xt.Vector3,t=new Xt.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Xt.Vector3;if(e){var s,l,u,c=new Xt.Vector3,h=new Xt.Vector3;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++)(o=this.faces[r]).vertexNormals[0]=a[o.a].clone(),o.vertexNormals[1]=a[o.b].clone(),o.vertexNormals[2]=a[o.c].clone()},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Xt.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)l=new Xt.Vector3,u={a:new Xt.Vector3,b:new Xt.Vector3,c:new Xt.Vector3},a.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){var e,t,n,r,i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,w,_,M,S,E,T,C,A,P,L,R=[],k=[],O=new Xt.Vector3,F=new Xt.Vector3,U=new Xt.Vector3,D=new Xt.Vector3,N=new Xt.Vector3;for(n=0,r=this.vertices.length;n<r;n++)R[n]=new Xt.Vector3,k[n]=new Xt.Vector3;for(e=0,t=this.faces.length;e<t;e++)a=this.faces[e],s=this.faceVertexUvs[0][e],C=this,A=a.a,P=a.b,L=a.c,0,1,2,l=C.vertices[A],u=C.vertices[P],c=C.vertices[L],h=s[0],p=s[1],f=s[2],d=u.x-l.x,m=c.x-l.x,g=u.y-l.y,y=c.y-l.y,v=u.z-l.z,b=c.z-l.z,x=p.x-h.x,w=f.x-h.x,_=p.y-h.y,S=1/(x*(M=f.y-h.y)-w*_),O.set((M*d-_*m)*S,(M*g-_*y)*S,(M*v-_*b)*S),F.set((x*m-w*d)*S,(x*y-w*g)*S,(x*b-w*v)*S),R[A].add(O),R[P].add(O),R[L].add(O),k[A].add(F),k[P].add(F),k[L].add(F);var B=["a","b","c","d"];for(e=0,t=this.faces.length;e<t;e++)for(a=this.faces[e],i=0;i<Math.min(a.vertexNormals.length,3);i++)N.copy(a.vertexNormals[i]),E=R[o=a[B[i]]],U.copy(E),U.sub(N.multiplyScalar(N.dot(E))).normalize(),D.crossVectors(a.vertexNormals[i],E),T=D.dot(k[o])<0?-1:1,a.vertexTangents[i]=new Xt.Vector4(U.x,U.y,U.z,T);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xt.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Xt.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e instanceof Xt.Geometry!=0){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0];void 0===n&&(n=0),void 0!==t&&(r=(new Xt.Matrix3).getNormalMatrix(t));for(var h=0,p=a.length;h<p;h++){var f=a[h].clone();void 0!==t&&f.applyMatrix4(t),o.push(f)}for(h=0,p=l.length;h<p;h++){var d,m,g,y=l[h],v=y.vertexNormals,b=y.vertexColors;(d=new Xt.Face3(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var x=0,w=v.length;x<w;x++)m=v[x].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),d.vertexNormals.push(m);for(d.color.copy(y.color),x=0,w=b.length;x<w;x++)g=b[x],d.vertexColors.push(g.clone());d.materialIndex=y.materialIndex+n,s.push(d)}for(h=0,p=c.length;h<p;h++){var _=c[h],M=[];if(void 0!==_){for(x=0,w=_.length;x<w;x++)M.push(_[x].clone());u.push(M)}}}else Xt.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e instanceof Xt.Mesh!=0?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):Xt.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]==o[(f+1)%3]){p.push(n);break}}for(n=p.length-1;0<=n;n--){var d=p[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],l={},u=[],c={},h=[],p={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],m=0<f.normal.length(),g=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,v=0<f.vertexColors.length,b=0;if(b=M(b=M(b=M(b=M(b=M(b=M(b=M(b=M(b,0,0),1,!1),2,!1),3,d),4,m),5,g),6,y),7,v),a.push(b),a.push(f.a,f.b,f.c),d){var x=this.faceVertexUvs[0][i];a.push(T(x[0]),T(x[1]),T(x[2]))}if(m&&a.push(S(f.normal)),g){var w=f.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(y&&a.push(E(f.color)),v){var _=f.vertexColors;a.push(E(_[0]),E(_[1]),E(_[2]))}}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=h.length/2,h.push(e.x,e.y)),p[t]}return e.data={},e.data.vertices=r,e.data.normals=s,0<u.length&&(e.data.colors=u),0<h.length&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){for(var e=new Xt.Geometry,t=this.vertices,n=0,r=t.length;n<r;n++)e.vertices.push(t[n].clone());var i=this.faces;for(n=0,r=i.length;n<r;n++)e.faces.push(i[n].clone());for(n=0,r=this.faceVertexUvs.length;n<r;n++){var o=this.faceVertexUvs[n];void 0===e.faceVertexUvs[n]&&(e.faceVertexUvs[n]=[]);for(var a=0,s=o.length;a<s;a++){for(var l=o[a],u=[],c=0,h=l.length;c<h;c++){var p=l[c];u.push(p.clone())}e.faceVertexUvs[n].push(u)}}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},Xt.EventDispatcher.prototype.apply(Xt.Geometry.prototype),Xt.GeometryIdCount=0,Xt.Camera=function(){Xt.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Xt.Matrix4,this.projectionMatrix=new Xt.Matrix4},Xt.Camera.prototype=Object.create(Xt.Object3D.prototype),Xt.Camera.prototype.constructor=Xt.Camera,Xt.Camera.prototype.getWorldDirection=(Be=new Xt.Quaternion,function(e){var t=e||new Xt.Vector3;return this.getWorldQuaternion(Be),t.set(0,0,-1).applyQuaternion(Be)}),Xt.Camera.prototype.lookAt=(ze=new Xt.Matrix4,function(e){ze.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(ze)}),Xt.Camera.prototype.clone=function(e){return void 0===e&&(e=new Xt.Camera),Xt.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},Xt.CubeCamera=function(e,t,n){Xt.Object3D.call(this),this.type="CubeCamera";var r=new Xt.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Xt.Vector3(1,0,0)),this.add(r);var i=new Xt.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Xt.Vector3(-1,0,0)),this.add(i);var o=new Xt.PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Xt.Vector3(0,1,0)),this.add(o);var a=new Xt.PerspectiveCamera(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Xt.Vector3(0,-1,0)),this.add(a);var s=new Xt.PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Xt.Vector3(0,0,1)),this.add(s);var l=new Xt.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Xt.Vector3(0,0,-1)),this.add(l),this.renderTarget=new Xt.WebGLRenderTargetCube(n,n,{format:Xt.RGBFormat,magFilter:Xt.LinearFilter,minFilter:Xt.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,u=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.generateMipmaps=u,n.activeCubeFace=5,e.render(t,l,n)}},Xt.CubeCamera.prototype=Object.create(Xt.Object3D.prototype),Xt.CubeCamera.prototype.constructor=Xt.CubeCamera,Xt.OrthographicCamera=function(e,t,n,r,i,o){Xt.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},Xt.OrthographicCamera.prototype=Object.create(Xt.Camera.prototype),Xt.OrthographicCamera.prototype.constructor=Xt.OrthographicCamera,Xt.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)},Xt.OrthographicCamera.prototype.clone=function(){var e=new Xt.OrthographicCamera;return Xt.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},Xt.PerspectiveCamera=function(e,t,n,r){Xt.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},Xt.PerspectiveCamera.prototype=Object.create(Xt.Camera.prototype),Xt.PerspectiveCamera.prototype.constructor=Xt.PerspectiveCamera,Xt.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*Xt.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},Xt.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},Xt.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=Xt.Math.radToDeg(2*Math.atan(Math.tan(.5*Xt.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,n=Math.tan(Xt.Math.degToRad(.5*e))*this.near,r=-n,i=t*r,o=t*n,a=Math.abs(o-i),s=Math.abs(n-r);this.projectionMatrix.makeFrustum(i+this.x*a/this.fullWidth,i+(this.x+this.width)*a/this.fullWidth,n-(this.y+this.height)*s/this.fullHeight,n-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},Xt.PerspectiveCamera.prototype.clone=function(){var e=new Xt.PerspectiveCamera;return Xt.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},Xt.Light=function(e){Xt.Object3D.call(this),this.type="Light",this.color=new Xt.Color(e)},Xt.Light.prototype=Object.create(Xt.Object3D.prototype),Xt.Light.prototype.constructor=Xt.Light,Xt.Light.prototype.clone=function(e){return void 0===e&&(e=new Xt.Light),Xt.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},Xt.AmbientLight=function(e){Xt.Light.call(this,e),this.type="AmbientLight"},Xt.AmbientLight.prototype=Object.create(Xt.Light.prototype),Xt.AmbientLight.prototype.constructor=Xt.AmbientLight,Xt.AmbientLight.prototype.clone=function(){var e=new Xt.AmbientLight;return Xt.Light.prototype.clone.call(this,e),e},Xt.AreaLight=function(e,t){Xt.Light.call(this,e),this.type="AreaLight",this.normal=new Xt.Vector3(0,-1,0),this.right=new Xt.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},Xt.AreaLight.prototype=Object.create(Xt.Light.prototype),Xt.AreaLight.prototype.constructor=Xt.AreaLight,Xt.DirectionalLight=function(e,t){Xt.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new Xt.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new Xt.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},Xt.DirectionalLight.prototype=Object.create(Xt.Light.prototype),Xt.DirectionalLight.prototype.constructor=Xt.DirectionalLight,Xt.DirectionalLight.prototype.clone=function(){var e=new Xt.DirectionalLight;return Xt.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},Xt.HemisphereLight=function(e,t,n){Xt.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new Xt.Color(t),this.intensity=void 0!==n?n:1},Xt.HemisphereLight.prototype=Object.create(Xt.Light.prototype),Xt.HemisphereLight.prototype.constructor=Xt.HemisphereLight,Xt.HemisphereLight.prototype.clone=function(){var e=new Xt.HemisphereLight;return Xt.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},Xt.PointLight=function(e,t,n,r){Xt.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1},Xt.PointLight.prototype=Object.create(Xt.Light.prototype),Xt.PointLight.prototype.constructor=Xt.PointLight,Xt.PointLight.prototype.clone=function(){var e=new Xt.PointLight;return Xt.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e.decay=this.decay,e},Xt.SpotLight=function(e,t,n,r,i,o){Xt.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new Xt.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==i?i:10,this.decay=void 0!==o?o:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},Xt.SpotLight.prototype=Object.create(Xt.Light.prototype),Xt.SpotLight.prototype.constructor=Xt.SpotLight,Xt.SpotLight.prototype.clone=function(){var e=new Xt.SpotLight;return Xt.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.decay=this.decay,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},Xt.Cache={files:{},add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Xt.Loader=function(e){this.showStatus=e,this.statusDomElement=e?Xt.Loader.prototype.addStatusElement():null,this.imageLoader=new Xt.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},Xt.Loader.prototype={constructor:Xt.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";e.total?t+=(100*e.loaded/e.total).toFixed(0)+"%":t+=(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t);return n},needsTangents:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t]instanceof Xt.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){var n=this;function r(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function i(e,i,o,a,s,l,u){var c,h=t+o,p=Xt.Loader.Handlers.get(h);if(null!==p?c=p.load(h):(c=new Xt.Texture,(p=n.imageLoader).crossOrigin=n.crossOrigin,p.load(h,function(e){if(!1===Xt.Math.isPowerOfTwo(e.width)||!1===Xt.Math.isPowerOfTwo(e.height)){var t=r(e.width),n=r(e.height),i=document.createElement("canvas");i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0,t,n),c.image=i}else c.image=e;c.needsUpdate=!0})),c.sourceFile=o,a&&(c.repeat.set(a[0],a[1]),1!==a[0]&&(c.wrapS=Xt.RepeatWrapping),1!==a[1]&&(c.wrapT=Xt.RepeatWrapping)),s&&c.offset.set(s[0],s[1]),l){var f={repeat:Xt.RepeatWrapping,mirror:Xt.MirroredRepeatWrapping};void 0!==f[l[0]]&&(c.wrapS=f[l[0]]),void 0!==f[l[1]]&&(c.wrapT=f[l[1]])}u&&(c.anisotropy=u),e[i]=c}function o(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var l=e.shading.toLowerCase();"phong"===l?a="MeshPhongMaterial":"basic"===l&&(a="MeshBasicMaterial")}void 0!==e.blending&&void 0!==Xt[e.blending]&&(s.blending=Xt[e.blending]),void 0!==e.transparent&&(s.transparent=e.transparent),void 0!==e.opacity&&e.opacity<1&&(s.transparent=!0),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=Xt.BackSide),void 0!==e.doubleSided&&(s.side=Xt.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=Xt.FaceColors:e.vertexColors&&(s.vertexColors=Xt.VertexColors)),e.colorDiffuse?s.color=o(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=o(e.colorSpecular)),e.colorEmissive&&(s.emissive=o(e.colorEmissive)),void 0!==e.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),e.opacity=e.transparency),void 0!==e.opacity&&(s.opacity=e.opacity),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&i(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&i(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&i(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&i(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&i(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&i(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormalFactor&&(s.normalScale=new Xt.Vector2(e.mapNormalFactor,e.mapNormalFactor));var u=new Xt[a](s);return void 0!==e.DbgName&&(u.name=e.DbgName),u}},Xt.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;t<n;t+=2){var r=this.handlers[t],i=this.handlers[t+1];if(r.test(e))return i}return null}},Xt.XHRLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager},Xt.XHRLoader.prototype={constructor:Xt.XHRLoader,load:function(e,t,n,r){var i=this,o=Xt.Cache.get(e);if(void 0===o){var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",function(n){Xt.Cache.add(e,this.response),t&&t(this.response),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),a.send(null),i.manager.itemStart(e)}else t&&t(o)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},Xt.ImageLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager},Xt.ImageLoader.prototype={constructor:Xt.ImageLoader,load:function(e,t,n,r){var i=this,o=Xt.Cache.get(e);if(void 0===o){var a=document.createElement("img");return a.addEventListener("load",function(n){Xt.Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),void 0!==n&&a.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.src=e,i.manager.itemStart(e),a}t(o)},setCrossOrigin:function(e){this.crossOrigin=e}},Xt.JSONLoader=function(e){Xt.Loader.call(this,e),this.withCredentials=!1},Xt.JSONLoader.prototype=Object.create(Xt.Loader.prototype),Xt.JSONLoader.prototype.constructor=Xt.JSONLoader,Xt.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},Xt.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,r,i){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText),l=s.metadata;if(void 0!==l){if("object"===l.type)return void Xt.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===l.type)return void Xt.error("THREE.JSONLoader: "+t+" seems to be a Scene. Use THREE.SceneLoader instead.")}var u=e.parse(s,r);n(u.geometry,u.materials)}else Xt.error("THREE.JSONLoader: "+t+" seems to be unreachable or the file is empty.");e.onLoadComplete()}else Xt.error("THREE.JSONLoader: Couldn't load "+t+" ("+o.status+")");else o.readyState===o.LOADING?i&&(0===a&&(a=o.getResponseHeader("Content-Length")),i({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},Xt.JSONLoader.prototype.parse=function(e,t){var n=new Xt.Geometry,r=void 0!==e.scale?1/e.scale:1;if(function(t){function r(e,t){return e&1<<t}var i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,w,_,M,S,E,T,C,A,P,L,R=e.faces,k=e.vertices,O=e.normals,F=e.colors,U=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&U++;for(i=0;i<U;i++)n.faceVertexUvs[i]=[]}for(s=0,l=k.length;s<l;)(w=new Xt.Vector3).x=k[s++]*t,w.y=k[s++]*t,w.z=k[s++]*t,n.vertices.push(w);for(s=0,l=R.length;s<l;)if(d=r(f=R[s++],0),m=r(f,1),g=r(f,3),y=r(f,4),v=r(f,5),b=r(f,6),x=r(f,7),d){if((M=new Xt.Face3).a=R[s],M.b=R[s+1],M.c=R[s+3],(S=new Xt.Face3).a=R[s+1],S.b=R[s+2],S.c=R[s+3],s+=4,m&&(p=R[s++],M.materialIndex=p,S.materialIndex=p),a=n.faces.length,g)for(i=0;i<U;i++)for(C=e.uvs[i],n.faceVertexUvs[i][a]=[],n.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)P=C[2*(h=R[s++])],L=C[2*h+1],A=new Xt.Vector2(P,L),2!==o&&n.faceVertexUvs[i][a].push(A),0!==o&&n.faceVertexUvs[i][a+1].push(A);if(y&&(c=3*R[s++],M.normal.set(O[c++],O[c++],O[c]),S.normal.copy(M.normal)),v)for(i=0;i<4;i++)c=3*R[s++],T=new Xt.Vector3(O[c++],O[c++],O[c]),2!==i&&M.vertexNormals.push(T),0!==i&&S.vertexNormals.push(T);if(b&&(E=F[u=R[s++]],M.color.setHex(E),S.color.setHex(E)),x)for(i=0;i<4;i++)E=F[u=R[s++]],2!==i&&M.vertexColors.push(new Xt.Color(E)),0!==i&&S.vertexColors.push(new Xt.Color(E));n.faces.push(M),n.faces.push(S)}else{if((_=new Xt.Face3).a=R[s++],_.b=R[s++],_.c=R[s++],m&&(p=R[s++],_.materialIndex=p),a=n.faces.length,g)for(i=0;i<U;i++)for(C=e.uvs[i],n.faceVertexUvs[i][a]=[],o=0;o<3;o++)P=C[2*(h=R[s++])],L=C[2*h+1],A=new Xt.Vector2(P,L),n.faceVertexUvs[i][a].push(A);if(y&&(c=3*R[s++],_.normal.set(O[c++],O[c++],O[c])),v)for(i=0;i<3;i++)c=3*R[s++],T=new Xt.Vector3(O[c++],O[c++],O[c]),_.vertexNormals.push(T);if(b&&(u=R[s++],_.color.setHex(F[u])),x)for(i=0;i<3;i++)u=R[s++],_.vertexColors.push(new Xt.Color(F[u]));n.faces.push(_)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t){var o=e.skinWeights[r],a=1<t?e.skinWeights[r+1]:0,s=2<t?e.skinWeights[r+2]:0,l=3<t?e.skinWeights[r+3]:0;n.skinWeights.push(new Xt.Vector4(o,a,s,l))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t){var u=e.skinIndices[r],c=1<t?e.skinIndices[r+1]:0,h=2<t?e.skinIndices[r+2]:0,p=3<t?e.skinIndices[r+3]:0;n.skinIndices.push(new Xt.Vector4(u,c,h,p))}n.bones=e.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&Xt.warn("THREE.JSONLoader: When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match."),n.animation=e.animation,n.animations=e.animations}(),function(t){var r,i,o,a,s,l,u,c,h,p,f;if(void 0!==e.morphTargets)for(s=0,l=e.morphTargets.length;s<l;s++)for(n.morphTargets[s]={},n.morphTargets[s].name=e.morphTargets[s].name,n.morphTargets[s].vertices=[],o=n.morphTargets[s].vertices,r=0,i=(a=e.morphTargets[s].vertices).length;r<i;r+=3){var d=new Xt.Vector3;d.x=a[r]*t,d.y=a[r+1]*t,d.z=a[r+2]*t,o.push(d)}if(void 0!==e.morphColors)for(s=0,l=e.morphColors.length;s<l;s++)for(n.morphColors[s]={},n.morphColors[s].name=e.morphColors[s].name,n.morphColors[s].colors=[],h=n.morphColors[s].colors,u=0,c=(p=e.morphColors[s].colors).length;u<c;u+=3)(f=new Xt.Color(16755200)).setRGB(p[u],p[u+1],p[u+2]),h.push(f)}(r),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var i=this.initMaterials(e.materials,t);return this.needsTangents(i)&&n.computeTangents(),{geometry:n,materials:i}},Xt.LoadingManager=function(e,t,n){var r=this,i=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++},this.itemEnd=function(e){i++,void 0!==r.onProgress&&r.onProgress(e,i,o),i===o&&void 0!==r.onLoad&&r.onLoad()}},Xt.DefaultLoadingManager=new Xt.LoadingManager,Xt.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager},Xt.BufferGeometryLoader.prototype={constructor:Xt.BufferGeometryLoader,load:function(e,t,n,r){var i=this,o=new Xt.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new Xt.BufferGeometry,n=e.data.attributes;for(var r in n){var i=n[r],o=new Gt[i.type](i.array);t.addAttribute(r,new Xt.BufferAttribute(o,i.itemSize))}var a=e.data.offsets;void 0!==a&&(t.offsets=JSON.parse(JSON.stringify(a)));var s=e.data.boundingSphere;if(void 0!==s){var l=new Xt.Vector3;void 0!==s.center&&l.fromArray(s.center),t.boundingSphere=new Xt.Sphere(l,s.radius)}return t}},Xt.MaterialLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager},Xt.MaterialLoader.prototype={constructor:Xt.MaterialLoader,load:function(e,t,n,r){var i=this,o=new Xt.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new Xt[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.materials)for(var n=0,r=e.materials.length;n<r;n++)t.materials.push(this.parse(e.materials[n]));return t}},Xt.ObjectLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager,this.texturePath=""},Xt.ObjectLoader.prototype={constructor:Xt.ObjectLoader,load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,o=new Xt.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new Xt.JSONLoader,r=new Xt.BufferGeometryLoader,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Xt[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new Xt.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":a=new Xt.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":a=new Xt.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new Xt.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new Xt.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new Xt.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new Xt.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e)for(var r=function(e){return void 0===t[e]&&Xt.warn("THREE.ObjectLoader: Undefined texture",e),t[e]},i=new Xt.MaterialLoader,o=0,a=e.length;o<a;o++){var s=e[o],l=i.parse(s);l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.map&&(l.map=r(s.map)),void 0!==s.bumpMap&&(l.bumpMap=r(s.bumpMap),s.bumpScale&&(l.bumpScale=new Xt.Vector2(s.bumpScale,s.bumpScale))),void 0!==s.alphaMap&&(l.alphaMap=r(s.alphaMap)),void 0!==s.envMap&&(l.envMap=r(s.envMap)),void 0!==s.normalMap&&(l.normalMap=r(s.normalMap),s.normalScale&&(l.normalScale=new Xt.Vector2(s.normalScale,s.normalScale))),void 0!==s.lightMap&&(l.lightMap=r(s.lightMap)),void 0!==s.specularMap&&(l.specularMap=r(s.specularMap)),n[s.uuid]=l}return n},parseImages:function(e,t){var n=this,r={};if(void 0!==e&&0<e.length){var i=new Xt.LoadingManager(t),o=new Xt.ImageLoader(i);o.setCrossOrigin(this.crossOrigin);for(var a=function(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)})},s=0,l=e.length;s<l;s++){var u=e[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;r[u.uuid]=a(c)}}return r},parseTextures:function(e,t){var n={};if(void 0!==e)for(var r=0,i=e.length;r<i;r++){var o=e[r];void 0===o.image&&Xt.warn('THREE.ObjectLoader: No "image" speficied for',o.uuid),void 0===t[o.image]&&Xt.warn("THREE.ObjectLoader: Undefined image",o.image);var a=new Xt.Texture(t[o.image]);a.needsUpdate=!0,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.repeat&&(a.repeat=new Xt.Vector2(o.repeat[0],o.repeat[1])),void 0!==o.minFilter&&(a.minFilter=Xt[o.minFilter]),void 0!==o.magFilter&&(a.magFilter=Xt[o.magFilter]),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),o.wrap instanceof Array&&(a.wrapS=Xt[o.wrap[0]],a.wrapT=Xt[o.wrap[1]]),n[o.uuid]=a}return n},parseObject:(Ve=new Xt.Matrix4,function(e,t,n){var r,i=function(e){return void 0===t[e]&&Xt.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]},o=function(e){return void 0===n[e]&&Xt.warn("THREE.ObjectLoader: Undefined material",e),n[e]};switch(e.type){case"Scene":r=new Xt.Scene;break;case"PerspectiveCamera":r=new Xt.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":r=new Xt.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":r=new Xt.AmbientLight(e.color);break;case"DirectionalLight":r=new Xt.DirectionalLight(e.color,e.intensity);break;case"PointLight":r=new Xt.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":r=new Xt.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);break;case"HemisphereLight":r=new Xt.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":r=new Xt.Mesh(i(e.geometry),o(e.material));break;case"Line":r=new Xt.Line(i(e.geometry),o(e.material),e.mode);break;case"PointCloud":r=new Xt.PointCloud(i(e.geometry),o(e.material));break;case"Sprite":r=new Xt.Sprite(o(e.material));break;case"Group":r=new Xt.Group;break;default:r=new Xt.Object3D}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(Ve.fromArray(e.matrix),Ve.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var a in e.children)r.add(this.parseObject(e.children[a],t,n));return r})},Xt.TextureLoader=function(e){this.manager=void 0!==e?e:Xt.DefaultLoadingManager},Xt.TextureLoader.prototype={constructor:Xt.TextureLoader,load:function(e,t,n,r){var i=new Xt.ImageLoader(this.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){var n=new Xt.Texture(e);n.needsUpdate=!0,void 0!==t&&t(n)},n,r)},setCrossOrigin:function(e){this.crossOrigin=e}},Xt.DataTextureLoader=Xt.BinaryTextureLoader=function(){this._parser=null},Xt.BinaryTextureLoader.prototype={constructor:Xt.BinaryTextureLoader,load:function(e,t,n,r){var i=this,o=new Xt.DataTexture,a=new Xt.XHRLoader;return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Xt.ClampToEdgeWrapping,o.wrapT=void 0!==n.wrapT?n.wrapT:Xt.ClampToEdgeWrapping,o.magFilter=void 0!==n.magFilter?n.magFilter:Xt.LinearFilter,o.minFilter=void 0!==n.minFilter?n.minFilter:Xt.LinearMipMapLinearFilter,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Xt.LinearFilter),o.needsUpdate=!0,t&&t(o,n))},n,r),o}},Xt.CompressedTextureLoader=function(){this._parser=null},Xt.CompressedTextureLoader.prototype={constructor:Xt.CompressedTextureLoader,load:function(e,t,n){var r=this,i=[],o=new Xt.CompressedTexture;o.image=i;var a=new Xt.XHRLoader;if(a.setResponseType("arraybuffer"),e instanceof Array)for(var s=0,l=function(n){a.load(e[n],function(e){var a=r._parser(e,!0);i[n]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},6===(s+=1)&&(1==a.mipmapCount&&(o.minFilter=Xt.LinearFilter),o.format=a.format,o.needsUpdate=!0,t&&t(o))})},u=0,c=e.length;u<c;++u)l(u);else a.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var a=n.mipmaps.length/n.mipmapCount,s=0;s<a;s++){i[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)i[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),i[s].format=n.format,i[s].width=n.width,i[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Xt.LinearFilter),o.format=n.format,o.needsUpdate=!0,t&&t(o)});return o}},Xt.Material=function(){Object.defineProperty(this,"id",{value:Xt.MaterialIdCount++}),this.uuid=Xt.Math.generateUUID(),this.name="",this.type="Material",this.side=Xt.FrontSide,this.opacity=1,this.transparent=!1,this.blending=Xt.NormalBlending,this.blendSrc=Xt.SrcAlphaFactor,this.blendDst=Xt.OneMinusSrcAlphaFactor,this.blendEquation=Xt.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},Xt.Material.prototype={constructor:Xt.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){if(t in this){var r=this[t];r instanceof Xt.Color?r.set(n):r instanceof Xt.Vector3&&n instanceof Xt.Vector3?r.copy(n):this[t]="overdraw"==t?Number(n):n}}else Xt.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof Xt.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==Xt.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==Xt.NormalBlending&&(e.blending=this.blending),this.side!==Xt.FrontSide&&(e.side=this.side)):this instanceof Xt.MeshLambertMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==Xt.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==Xt.SmoothShading&&(e.shading=this.shading),this.blending!==Xt.NormalBlending&&(e.blending=this.blending),this.side!==Xt.FrontSide&&(e.side=this.side)):this instanceof Xt.MeshPhongMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==Xt.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==Xt.SmoothShading&&(e.shading=this.shading),this.blending!==Xt.NormalBlending&&(e.blending=this.blending),this.side!==Xt.FrontSide&&(e.side=this.side)):this instanceof Xt.MeshNormalMaterial?(this.blending!==Xt.NormalBlending&&(e.blending=this.blending),this.side!==Xt.FrontSide&&(e.side=this.side)):this instanceof Xt.MeshDepthMaterial?(this.blending!==Xt.NormalBlending&&(e.blending=this.blending),this.side!==Xt.FrontSide&&(e.side=this.side)):this instanceof Xt.PointCloudMaterial?(e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.color=this.color.getHex(),this.vertexColors!==Xt.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==Xt.NormalBlending&&(e.blending=this.blending)):this instanceof Xt.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof Xt.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),!1!==this.transparent&&(e.transparent=this.transparent),!1!==this.wireframe&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new Xt.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.blendSrcAlpha=this.blendSrcAlpha,e.blendDstAlpha=this.blendDstAlpha,e.blendEquationAlpha=this.blendEquationAlpha,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Xt.EventDispatcher.prototype.apply(Xt.Material.prototype),Xt.MaterialIdCount=0,Xt.LineBasicMaterial=function(e){Xt.Material.call(this),this.type="LineBasicMaterial",this.color=new Xt.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=Xt.NoColors,this.fog=!0,this.setValues(e)},Xt.LineBasicMaterial.prototype=Object.create(Xt.Material.prototype),Xt.LineBasicMaterial.prototype.constructor=Xt.LineBasicMaterial,Xt.LineBasicMaterial.prototype.clone=function(){var e=new Xt.LineBasicMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},Xt.LineDashedMaterial=function(e){Xt.Material.call(this),this.type="LineDashedMaterial",this.color=new Xt.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},Xt.LineDashedMaterial.prototype=Object.create(Xt.Material.prototype),Xt.LineDashedMaterial.prototype.constructor=Xt.LineDashedMaterial,Xt.LineDashedMaterial.prototype.clone=function(){var e=new Xt.LineDashedMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},Xt.MeshBasicMaterial=function(e){Xt.Material.call(this),this.type="MeshBasicMaterial",this.color=new Xt.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xt.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Xt.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Xt.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},Xt.MeshBasicMaterial.prototype=Object.create(Xt.Material.prototype),Xt.MeshBasicMaterial.prototype.constructor=Xt.MeshBasicMaterial,Xt.MeshBasicMaterial.prototype.clone=function(){var e=new Xt.MeshBasicMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},Xt.MeshLambertMaterial=function(e){Xt.Material.call(this),this.type="MeshLambertMaterial",this.color=new Xt.Color(16777215),this.emissive=new Xt.Color(0),this.wrapAround=!1,this.wrapRGB=new Xt.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xt.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Xt.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Xt.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},Xt.MeshLambertMaterial.prototype=Object.create(Xt.Material.prototype),Xt.MeshLambertMaterial.prototype.constructor=Xt.MeshLambertMaterial,Xt.MeshLambertMaterial.prototype.clone=function(){var e=new Xt.MeshLambertMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},Xt.MeshPhongMaterial=function(e){Xt.Material.call(this),this.type="MeshPhongMaterial",this.color=new Xt.Color(16777215),this.emissive=new Xt.Color(0),this.specular=new Xt.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new Xt.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xt.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xt.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Xt.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Xt.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},Xt.MeshPhongMaterial.prototype=Object.create(Xt.Material.prototype),Xt.MeshPhongMaterial.prototype.constructor=Xt.MeshPhongMaterial,Xt.MeshPhongMaterial.prototype.clone=function(){var e=new Xt.MeshPhongMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},Xt.MeshDepthMaterial=function(e){Xt.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},Xt.MeshDepthMaterial.prototype=Object.create(Xt.Material.prototype),Xt.MeshDepthMaterial.prototype.constructor=Xt.MeshDepthMaterial,Xt.MeshDepthMaterial.prototype.clone=function(){var e=new Xt.MeshDepthMaterial;return Xt.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},Xt.MeshNormalMaterial=function(e){Xt.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},Xt.MeshNormalMaterial.prototype=Object.create(Xt.Material.prototype),Xt.MeshNormalMaterial.prototype.constructor=Xt.MeshNormalMaterial,Xt.MeshNormalMaterial.prototype.clone=function(){var e=new Xt.MeshNormalMaterial;return Xt.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},Xt.MeshFaceMaterial=function(e){this.uuid=Xt.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},Xt.MeshFaceMaterial.prototype={constructor:Xt.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,n=this.materials.length;t<n;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new Xt.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},Xt.PointCloudMaterial=function(e){Xt.Material.call(this),this.type="PointCloudMaterial",this.color=new Xt.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=Xt.NoColors,this.fog=!0,this.setValues(e)},Xt.PointCloudMaterial.prototype=Object.create(Xt.Material.prototype),Xt.PointCloudMaterial.prototype.constructor=Xt.PointCloudMaterial,Xt.PointCloudMaterial.prototype.clone=function(){var e=new Xt.PointCloudMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},Xt.ParticleBasicMaterial=function(e){return Xt.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new Xt.PointCloudMaterial(e)},Xt.ParticleSystemMaterial=function(e){return Xt.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new Xt.PointCloudMaterial(e)},Xt.ShaderMaterial=function(e){Xt.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=Xt.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=Xt.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},Xt.ShaderMaterial.prototype=Object.create(Xt.Material.prototype),Xt.ShaderMaterial.prototype.constructor=Xt.ShaderMaterial,Xt.ShaderMaterial.prototype.clone=function(){var e=new Xt.ShaderMaterial;return Xt.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=Xt.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},Xt.RawShaderMaterial=function(e){Xt.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},Xt.RawShaderMaterial.prototype=Object.create(Xt.ShaderMaterial.prototype),Xt.RawShaderMaterial.prototype.constructor=Xt.RawShaderMaterial,Xt.RawShaderMaterial.prototype.clone=function(){var e=new Xt.RawShaderMaterial;return Xt.ShaderMaterial.prototype.clone.call(this,e),e},Xt.SpriteMaterial=function(e){Xt.Material.call(this),this.type="SpriteMaterial",this.color=new Xt.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},Xt.SpriteMaterial.prototype=Object.create(Xt.Material.prototype),Xt.SpriteMaterial.prototype.constructor=Xt.SpriteMaterial,Xt.SpriteMaterial.prototype.clone=function(){var e=new Xt.SpriteMaterial;return Xt.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},Xt.Texture=function(e,t,n,r,i,o,a,s,l){Object.defineProperty(this,"id",{value:Xt.TextureIdCount++}),this.uuid=Xt.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:Xt.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Xt.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Xt.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:Xt.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:Xt.LinearFilter,this.minFilter=void 0!==o?o:Xt.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Xt.RGBAFormat,this.type=void 0!==s?s:Xt.UnsignedByteType,this.offset=new Xt.Vector2(0,0),this.repeat=new Xt.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},Xt.Texture.DEFAULT_IMAGE=void 0,Xt.Texture.DEFAULT_MAPPING=Xt.UVMapping,Xt.Texture.prototype={constructor:Xt.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new Xt.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Xt.EventDispatcher.prototype.apply(Xt.Texture.prototype),Xt.TextureIdCount=0,Xt.CubeTexture=function(e,t,n,r,i,o,a,s,l){t=void 0!==t?t:Xt.CubeReflectionMapping,Xt.Texture.call(this,e,t,n,r,i,o,a,s,l),this.images=e},Xt.CubeTexture.prototype=Object.create(Xt.Texture.prototype),Xt.CubeTexture.prototype.constructor=Xt.CubeTexture,Xt.CubeTexture.clone=function(e){return void 0===e&&(e=new Xt.CubeTexture),Xt.Texture.prototype.clone.call(this,e),e.images=this.images,e},Xt.CompressedTexture=function(e,t,n,r,i,o,a,s,l,u,c){Xt.Texture.call(this,null,o,a,s,l,u,r,i,c),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},Xt.CompressedTexture.prototype=Object.create(Xt.Texture.prototype),Xt.CompressedTexture.prototype.constructor=Xt.CompressedTexture,Xt.CompressedTexture.prototype.clone=function(){var e=new Xt.CompressedTexture;return Xt.Texture.prototype.clone.call(this,e),e},Xt.DataTexture=function(e,t,n,r,i,o,a,s,l,u,c){Xt.Texture.call(this,null,o,a,s,l,u,r,i,c),this.image={data:e,width:t,height:n}},Xt.DataTexture.prototype=Object.create(Xt.Texture.prototype),Xt.DataTexture.prototype.constructor=Xt.DataTexture,Xt.DataTexture.prototype.clone=function(){var e=new Xt.DataTexture;return Xt.Texture.prototype.clone.call(this,e),e},Xt.VideoTexture=function(e,t,n,r,i,o,a,s,l){Xt.Texture.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1;var u=this,c=function(){requestAnimationFrame(c),e.readyState===e.HAVE_ENOUGH_DATA&&(u.needsUpdate=!0)};c()},Xt.VideoTexture.prototype=Object.create(Xt.Texture.prototype),Xt.VideoTexture.prototype.constructor=Xt.VideoTexture,Xt.Group=function(){Xt.Object3D.call(this),this.type="Group"},Xt.Group.prototype=Object.create(Xt.Object3D.prototype),Xt.Group.prototype.constructor=Xt.Group,Xt.PointCloud=function(e,t){Xt.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new Xt.Geometry,this.material=void 0!==t?t:new Xt.PointCloudMaterial({color:16777215*Math.random()})},Xt.PointCloud.prototype=Object.create(Xt.Object3D.prototype),Xt.PointCloud.prototype.constructor=Xt.PointCloud,Xt.PointCloud.prototype.raycast=(Ie=new Xt.Matrix4,je=new Xt.Ray,function(e,t){var n=this,r=n.geometry,i=e.params.PointCloud.threshold;if(Ie.getInverse(this.matrixWorld),je.copy(e.ray).applyMatrix4(Ie),null===r.boundingBox||!1!==je.isIntersectionBox(r.boundingBox)){var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=new Xt.Vector3,s=function(r,i){var a=je.distanceToPoint(r);if(a<o){var s=je.closestPointToPoint(r);s.applyMatrix4(n.matrixWorld);var l=e.ray.origin.distanceTo(s);t.push({distance:l,distanceToRay:a,point:s.clone(),index:i,face:null,object:n})}};if(r instanceof Xt.BufferGeometry){var l=r.attributes,u=l.position.array;if(void 0!==l.index){var c=l.index.array,h=r.offsets;0===h.length&&(h=[{start:0,count:c.length,index:0}]);for(var p=0,f=h.length;p<f;++p)for(var d=h[p].start,m=h[p].count,g=h[p].index,y=d,v=d+m;y<v;y++){var b=g+c[y];a.fromArray(u,3*b),s(a,b)}}else{var x=u.length/3;for(y=0;y<x;y++)a.set(u[3*y],u[3*y+1],u[3*y+2]),s(a,y)}}else{var w=this.geometry.vertices;for(y=0;y<w.length;y++)s(w[y],y)}}}),Xt.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new Xt.PointCloud(this.geometry,this.material)),Xt.Object3D.prototype.clone.call(this,e),e},Xt.ParticleSystem=function(e,t){return Xt.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new Xt.PointCloud(e,t)},Xt.Line=function(e,t,n){Xt.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new Xt.Geometry,this.material=void 0!==t?t:new Xt.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==n?n:Xt.LineStrip},Xt.LineStrip=0,Xt.LinePieces=1,Xt.Line.prototype=Object.create(Xt.Object3D.prototype),Xt.Line.prototype.constructor=Xt.Line,Xt.Line.prototype.raycast=(He=new Xt.Matrix4,We=new Xt.Ray,Ge=new Xt.Sphere,function(e,t){var n=e.linePrecision,r=n*n,i=this.geometry;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ge.copy(i.boundingSphere),Ge.applyMatrix4(this.matrixWorld),!1!==e.ray.isIntersectionSphere(Ge)){He.getInverse(this.matrixWorld),We.copy(e.ray).applyMatrix4(He);var o=new Xt.Vector3,a=new Xt.Vector3,s=new Xt.Vector3,l=new Xt.Vector3,u=this.mode===Xt.LineStrip?1:2;if(i instanceof Xt.BufferGeometry){var c=i.attributes;if(void 0!==c.index){var h=c.index.array,p=c.position.array,f=i.offsets;0===f.length&&(f=[{start:0,count:h.length,index:0}]);for(var d=0;d<f.length;d++)for(var m=f[d].start,g=f[d].count,y=f[d].index,v=m;v<m+g-1;v+=u){var b=y+h[v],x=y+h[v+1];o.fromArray(p,3*b),a.fromArray(p,3*x),r<We.distanceSqToSegment(o,a,l,s)||(M=We.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:s.clone().applyMatrix4(this.matrixWorld),index:v,offsetIndex:d,face:null,faceIndex:null,object:this})}}else for(p=c.position.array,v=0;v<p.length/3-1;v+=u)o.fromArray(p,3*v),a.fromArray(p,3*v+3),r<We.distanceSqToSegment(o,a,l,s)||(M=We.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:s.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else if(i instanceof Xt.Geometry){var w=i.vertices,_=w.length;for(v=0;v<_-1;v+=u){var M;r<We.distanceSqToSegment(w[v],w[v+1],l,s)||(M=We.origin.distanceTo(l))<e.near||M>e.far||t.push({distance:M,point:s.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}),Xt.Line.prototype.clone=function(e){return void 0===e&&(e=new Xt.Line(this.geometry,this.material,this.mode)),Xt.Object3D.prototype.clone.call(this,e),e},Xt.Mesh=function(e,t){Xt.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Xt.Geometry,this.material=void 0!==t?t:new Xt.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},Xt.Mesh.prototype=Object.create(Xt.Object3D.prototype),Xt.Mesh.prototype.constructor=Xt.Mesh,Xt.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},Xt.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(Xt.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},Xt.Mesh.prototype.raycast=(Xe=new Xt.Matrix4,qe=new Xt.Ray,Ye=new Xt.Sphere,Ke=new Xt.Vector3,Qe=new Xt.Vector3,Ze=new Xt.Vector3,function(e,t){var n=this.geometry;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ye.copy(n.boundingSphere),Ye.applyMatrix4(this.matrixWorld),!1!==e.ray.isIntersectionSphere(Ye)&&(Xe.getInverse(this.matrixWorld),qe.copy(e.ray).applyMatrix4(Xe),null===n.boundingBox||!1!==qe.isIntersectionBox(n.boundingBox)))if(n instanceof Xt.BufferGeometry){if(void 0===(E=this.material))return;var r=n.attributes,i=e.precision;if(void 0!==r.index){var o=r.index.array,a=r.position.array,s=n.offsets;0===s.length&&(s=[{start:0,count:o.length,index:0}]);for(var l=0,u=s.length;l<u;++l)for(var c=s[l].start,h=s[l].count,p=s[l].index,f=c,d=c+h;f<d;f+=3){if(y=p+o[f],v=p+o[f+1],b=p+o[f+2],Ke.fromArray(a,3*y),Qe.fromArray(a,3*v),Ze.fromArray(a,3*b),E.side===Xt.BackSide)var m=qe.intersectTriangle(Ze,Qe,Ke,!0);else m=qe.intersectTriangle(Ke,Qe,Ze,E.side!==Xt.DoubleSide);null!==m&&(m.applyMatrix4(this.matrixWorld),(O=e.ray.origin.distanceTo(m))<i||O<e.near||O>e.far||t.push({distance:O,point:m,face:new Xt.Face3(y,v,b,Xt.Triangle.normal(Ke,Qe,Ze)),faceIndex:null,object:this}))}}else{var g=f=0;for(d=(a=r.position.array).length;f<d;f+=3,g+=9)v=(y=f)+1,b=f+2,Ke.fromArray(a,g),Qe.fromArray(a,g+3),Ze.fromArray(a,g+6),null!==(m=E.side===Xt.BackSide?qe.intersectTriangle(Ze,Qe,Ke,!0):qe.intersectTriangle(Ke,Qe,Ze,E.side!==Xt.DoubleSide))&&(m.applyMatrix4(this.matrixWorld),(O=e.ray.origin.distanceTo(m))<i||O<e.near||O>e.far||t.push({distance:O,point:m,face:new Xt.Face3(y,v,b,Xt.Triangle.normal(Ke,Qe,Ze)),faceIndex:null,object:this}))}}else if(n instanceof Xt.Geometry)for(var y,v,b,x=this.material instanceof Xt.MeshFaceMaterial,w=!0===x?this.material.materials:null,_=(i=e.precision,n.vertices),M=0,S=n.faces.length;M<S;M++){var E,T=n.faces[M];if(void 0!==(E=!0===x?w[T.materialIndex]:this.material)){if(y=_[T.a],v=_[T.b],b=_[T.c],!0===E.morphTargets){var C=n.morphTargets,A=this.morphTargetInfluences;Ke.set(0,0,0),Qe.set(0,0,0),Ze.set(0,0,0);for(var P=0,L=C.length;P<L;P++){var R=A[P];if(0!==R){var k=C[P].vertices;Ke.x+=(k[T.a].x-y.x)*R,Ke.y+=(k[T.a].y-y.y)*R,Ke.z+=(k[T.a].z-y.z)*R,Qe.x+=(k[T.b].x-v.x)*R,Qe.y+=(k[T.b].y-v.y)*R,Qe.z+=(k[T.b].z-v.z)*R,Ze.x+=(k[T.c].x-b.x)*R,Ze.y+=(k[T.c].y-b.y)*R,Ze.z+=(k[T.c].z-b.z)*R}}Ke.add(y),Qe.add(v),Ze.add(b),y=Ke,v=Qe,b=Ze}var O;null!==(m=E.side===Xt.BackSide?qe.intersectTriangle(b,v,y,!0):qe.intersectTriangle(y,v,b,E.side!==Xt.DoubleSide))&&(m.applyMatrix4(this.matrixWorld),(O=e.ray.origin.distanceTo(m))<i||O<e.near||O>e.far||t.push({distance:O,point:m,face:T,faceIndex:M,object:this}))}}}),Xt.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new Xt.Mesh(this.geometry,this.material)),Xt.Object3D.prototype.clone.call(this,e,t),e},Xt.Bone=function(e){Xt.Object3D.call(this),this.type="Bone",this.skin=e},Xt.Bone.prototype=Object.create(Xt.Object3D.prototype),Xt.Bone.prototype.constructor=Xt.Bone,Xt.Skeleton=function(e,t,n){var r;if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new Xt.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(r=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new Xt.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Xt.RGBAFormat,Xt.FloatType),this.boneTexture.minFilter=Xt.NearestFilter,this.boneTexture.magFilter=Xt.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{Xt.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new Xt.Matrix4)}},Xt.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Xt.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},Xt.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},Xt.Skeleton.prototype.update=($e=new Xt.Matrix4,function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;$e.multiplyMatrices(n,this.boneInverses[e]),$e.flattenToArrayOffset(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),Xt.SkinnedMesh=function(e,t,n){Xt.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xt.Matrix4,this.bindMatrixInverse=new Xt.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a,s,l,u=0,c=this.geometry.bones.length;u<c;++u)a=(o=this.geometry.bones[u]).pos,s=o.rotq,l=o.scl,i=new Xt.Bone(this),r.push(i),i.name=o.name,i.position.set(a[0],a[1],a[2]),i.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==l?i.scale.set(l[0],l[1],l[2]):i.scale.set(1,1,1);for(u=0,c=this.geometry.bones.length;u<c;++u)-1!==(o=this.geometry.bones[u]).parent?r[o.parent].add(r[u]):this.add(r[u])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new Xt.Skeleton(r,void 0,n))},Xt.SkinnedMesh.prototype=Object.create(Xt.Mesh.prototype),Xt.SkinnedMesh.prototype.constructor=Xt.SkinnedMesh,Xt.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},Xt.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},Xt.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof Xt.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==1/0?t.multiplyScalar(n):t.set(1)}},Xt.SkinnedMesh.prototype.updateMatrixWorld=function(e){Xt.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):Xt.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},Xt.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new Xt.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),Xt.Mesh.prototype.clone.call(this,e),e},Xt.MorphAnimMesh=function(e,t){Xt.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},Xt.MorphAnimMesh.prototype=Object.create(Xt.Mesh.prototype),Xt.MorphAnimMesh.prototype.constructor=Xt.MorphAnimMesh,Xt.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},Xt.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},Xt.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},Xt.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,r=/([a-z]+)_?(\d+)/,i=0,o=e.morphTargets.length;i<o;i++){var a=e.morphTargets[i].name.match(r);if(a&&1<a.length){var s=a[1];n[s]||(n[s]={start:1/0,end:-1/0});var l=n[s];i<l.start&&(l.start=i),i>l.end&&(l.end=i),t||(t=s)}}e.firstAnimation=t},Xt.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},Xt.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=(n.end-n.start)/t*1e3,this.time=0):Xt.warn("THREE.MorphAnimMesh: animation["+e+"] undefined in .playAnimation()")},Xt.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var n=this.startKeyframe+Xt.Math.clamp(Math.floor(this.time/t),0,this.length-1);n!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[n]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=n);var r=this.time%t/t;this.directionBackwards&&(r=1-r),this.morphTargetInfluences[this.currentKeyframe]=r,this.morphTargetInfluences[this.lastKeyframe]=1-r},Xt.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){for(var r=this.morphTargetInfluences,i=0,o=r.length;i<o;i++)r[i]=0;-1<e&&(r[e]=1-n),-1<t&&(r[t]=n)},Xt.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new Xt.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,Xt.Mesh.prototype.clone.call(this,e),e},Xt.LOD=function(){Xt.Object3D.call(this),this.objects=[]},Xt.LOD.prototype=Object.create(Xt.Object3D.prototype),Xt.LOD.prototype.constructor=Xt.LOD,Xt.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;n<this.objects.length&&!(t<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},Xt.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;t<n&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},Xt.LOD.prototype.raycast=(Je=new Xt.Vector3,function(e,t){Je.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Je);this.getObjectForDistance(n).raycast(e,t)}),Xt.LOD.prototype.update=(et=new Xt.Vector3,tt=new Xt.Vector3,function(e){if(1<this.objects.length){et.setFromMatrixPosition(e.matrixWorld),tt.setFromMatrixPosition(this.matrixWorld);var t=et.distanceTo(tt);this.objects[0].object.visible=!0;for(var n=1,r=this.objects.length;n<r&&t>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;for(;n<r;n++)this.objects[n].object.visible=!1}}),Xt.LOD.prototype.clone=function(e){void 0===e&&(e=new Xt.LOD),Xt.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;t<n;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},Xt.Sprite=(nt=new Uint16Array([0,1,2,0,2,3]),rt=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),it=new Float32Array([0,0,1,0,1,1,0,1]),(ot=new Xt.BufferGeometry).addAttribute("index",new Xt.BufferAttribute(nt,1)),ot.addAttribute("position",new Xt.BufferAttribute(rt,3)),ot.addAttribute("uv",new Xt.BufferAttribute(it,2)),function(e){Xt.Object3D.call(this),this.type="Sprite",this.geometry=ot,this.material=void 0!==e?e:new Xt.SpriteMaterial}),Xt.Sprite.prototype=Object.create(Xt.Object3D.prototype),Xt.Sprite.prototype.constructor=Xt.Sprite,Xt.Sprite.prototype.raycast=(at=new Xt.Vector3,function(e,t){at.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceToPoint(at);n>this.scale.x||t.push({distance:n,point:this.position,face:null,object:this})}),Xt.Sprite.prototype.clone=function(e){return void 0===e&&(e=new Xt.Sprite(this.material)),Xt.Object3D.prototype.clone.call(this,e),e},Xt.Particle=Xt.Sprite,Xt.LensFlare=function(e,t,n,r,i){Xt.Object3D.call(this),this.lensFlares=[],this.positionScreen=new Xt.Vector3,(this.customUpdateCallback=void 0)!==e&&this.add(e,t,n,r,i)},Xt.LensFlare.prototype=Object.create(Xt.Object3D.prototype),Xt.LensFlare.prototype.constructor=Xt.LensFlare,Xt.LensFlare.prototype.add=function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new Xt.Color(16777215)),void 0===r&&(r=Xt.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:i,blending:r})},Xt.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},Xt.Scene=function(){Xt.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},Xt.Scene.prototype=Object.create(Xt.Object3D.prototype),Xt.Scene.prototype.constructor=Xt.Scene,Xt.Scene.prototype.clone=function(e){return void 0===e&&(e=new Xt.Scene),Xt.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},Xt.Fog=function(e,t,n){this.name="",this.color=new Xt.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},Xt.Fog.prototype.clone=function(){return new Xt.Fog(this.color.getHex(),this.near,this.far)},Xt.FogExp2=function(e,t){this.name="",this.color=new Xt.Color(e),this.density=void 0!==t?t:25e-5},Xt.FogExp2.prototype.clone=function(){return new Xt.FogExp2(this.color.getHex(),this.density)},Xt.ShaderChunk={},Xt.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n\tfloat distance = dot( planeNormal, point-pointOnPlane );\n\treturn point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\tif ( decayExponent > 0.0 ) {\n\t  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n\t}\n\treturn 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\n",Xt.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",Xt.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack += ambientLightColor;\n\n#endif\n",Xt.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n",Xt.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",Xt.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",Xt.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",Xt.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif",Xt.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\ttotalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\ttotalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\ttotalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\ttotalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalDiffuseLight += hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\n#ifdef METAL\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n",Xt.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",Xt.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif",Xt.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",Xt.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",Xt.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n",Xt.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif",Xt.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",Xt.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif",Xt.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif",Xt.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif",Xt.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",Xt.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",Xt.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = inputToLinear( color.xyz );\n\n#endif",Xt.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",Xt.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n",Xt.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n",Xt.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",Xt.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n",Xt.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",Xt.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",Xt.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",Xt.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",Xt.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",Xt.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n\t\tfogFactor = whiteCompliment( fogFactor );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",Xt.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",Xt.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n\tvec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n\tvec3 objectNormal = morphedNormal;\n\n#else\n\n\tvec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",Xt.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n",Xt.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",Xt.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",Xt.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\toutgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif",Xt.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",Xt.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif",Xt.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif",Xt.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n\tshadowColor = inputToLinear( shadowColor );\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n",Xt.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#elif defined( USE_MORPHTARGETS )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif",Xt.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",Xt.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif",Xt.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",Xt.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",Xt.UniformsUtils={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i instanceof Xt.Color||i instanceof Xt.Vector2||i instanceof Xt.Vector3||i instanceof Xt.Vector4||i instanceof Xt.Matrix4||i instanceof Xt.Texture?t[n][r]=i.clone():i instanceof Array?t[n][r]=i.slice():t[n][r]=i}return t}},Xt.UniformsLib={common:{diffuse:{type:"c",value:new Xt.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new Xt.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new Xt.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new Xt.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new Xt.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new Xt.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new Xt.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},Xt.ShaderLib={basic:{uniforms:Xt.UniformsUtils.merge([Xt.UniformsLib.common,Xt.UniformsLib.fog,Xt.UniformsLib.shadowmap]),vertexShader:[Xt.ShaderChunk.common,Xt.ShaderChunk.map_pars_vertex,Xt.ShaderChunk.lightmap_pars_vertex,Xt.ShaderChunk.envmap_pars_vertex,Xt.ShaderChunk.color_pars_vertex,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.skinning_pars_vertex,Xt.ShaderChunk.shadowmap_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.map_vertex,Xt.ShaderChunk.lightmap_vertex,Xt.ShaderChunk.color_vertex,Xt.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",Xt.ShaderChunk.morphnormal_vertex,Xt.ShaderChunk.skinnormal_vertex,Xt.ShaderChunk.defaultnormal_vertex,"\t#endif",Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.skinning_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,Xt.ShaderChunk.worldpos_vertex,Xt.ShaderChunk.envmap_vertex,Xt.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_fragment,Xt.ShaderChunk.map_pars_fragment,Xt.ShaderChunk.alphamap_pars_fragment,Xt.ShaderChunk.lightmap_pars_fragment,Xt.ShaderChunk.envmap_pars_fragment,Xt.ShaderChunk.fog_pars_fragment,Xt.ShaderChunk.shadowmap_pars_fragment,Xt.ShaderChunk.specularmap_pars_fragment,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,Xt.ShaderChunk.map_fragment,Xt.ShaderChunk.color_fragment,Xt.ShaderChunk.alphamap_fragment,Xt.ShaderChunk.alphatest_fragment,Xt.ShaderChunk.specularmap_fragment,"\toutgoingLight = diffuseColor.rgb;",Xt.ShaderChunk.lightmap_fragment,Xt.ShaderChunk.envmap_fragment,Xt.ShaderChunk.shadowmap_fragment,Xt.ShaderChunk.linear_to_gamma_fragment,Xt.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:Xt.UniformsUtils.merge([Xt.UniformsLib.common,Xt.UniformsLib.fog,Xt.UniformsLib.lights,Xt.UniformsLib.shadowmap,{emissive:{type:"c",value:new Xt.Color(0)},wrapRGB:{type:"v3",value:new Xt.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",Xt.ShaderChunk.common,Xt.ShaderChunk.map_pars_vertex,Xt.ShaderChunk.lightmap_pars_vertex,Xt.ShaderChunk.envmap_pars_vertex,Xt.ShaderChunk.lights_lambert_pars_vertex,Xt.ShaderChunk.color_pars_vertex,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.skinning_pars_vertex,Xt.ShaderChunk.shadowmap_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.map_vertex,Xt.ShaderChunk.lightmap_vertex,Xt.ShaderChunk.color_vertex,Xt.ShaderChunk.morphnormal_vertex,Xt.ShaderChunk.skinbase_vertex,Xt.ShaderChunk.skinnormal_vertex,Xt.ShaderChunk.defaultnormal_vertex,Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.skinning_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,Xt.ShaderChunk.worldpos_vertex,Xt.ShaderChunk.envmap_vertex,Xt.ShaderChunk.lights_lambert_vertex,Xt.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_fragment,Xt.ShaderChunk.map_pars_fragment,Xt.ShaderChunk.alphamap_pars_fragment,Xt.ShaderChunk.lightmap_pars_fragment,Xt.ShaderChunk.envmap_pars_fragment,Xt.ShaderChunk.fog_pars_fragment,Xt.ShaderChunk.shadowmap_pars_fragment,Xt.ShaderChunk.specularmap_pars_fragment,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,Xt.ShaderChunk.map_fragment,Xt.ShaderChunk.color_fragment,Xt.ShaderChunk.alphamap_fragment,Xt.ShaderChunk.alphatest_fragment,Xt.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED","\t\tif ( gl_FrontFacing )","\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;","\t\telse","\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;","\t#else","\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;","\t#endif",Xt.ShaderChunk.lightmap_fragment,Xt.ShaderChunk.envmap_fragment,Xt.ShaderChunk.shadowmap_fragment,Xt.ShaderChunk.linear_to_gamma_fragment,Xt.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:Xt.UniformsUtils.merge([Xt.UniformsLib.common,Xt.UniformsLib.bump,Xt.UniformsLib.normalmap,Xt.UniformsLib.fog,Xt.UniformsLib.lights,Xt.UniformsLib.shadowmap,{emissive:{type:"c",value:new Xt.Color(0)},specular:{type:"c",value:new Xt.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new Xt.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",Xt.ShaderChunk.common,Xt.ShaderChunk.map_pars_vertex,Xt.ShaderChunk.lightmap_pars_vertex,Xt.ShaderChunk.envmap_pars_vertex,Xt.ShaderChunk.lights_phong_pars_vertex,Xt.ShaderChunk.color_pars_vertex,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.skinning_pars_vertex,Xt.ShaderChunk.shadowmap_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.map_vertex,Xt.ShaderChunk.lightmap_vertex,Xt.ShaderChunk.color_vertex,Xt.ShaderChunk.morphnormal_vertex,Xt.ShaderChunk.skinbase_vertex,Xt.ShaderChunk.skinnormal_vertex,Xt.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif",Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.skinning_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",Xt.ShaderChunk.worldpos_vertex,Xt.ShaderChunk.envmap_vertex,Xt.ShaderChunk.lights_phong_vertex,Xt.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_fragment,Xt.ShaderChunk.map_pars_fragment,Xt.ShaderChunk.alphamap_pars_fragment,Xt.ShaderChunk.lightmap_pars_fragment,Xt.ShaderChunk.envmap_pars_fragment,Xt.ShaderChunk.fog_pars_fragment,Xt.ShaderChunk.lights_phong_pars_fragment,Xt.ShaderChunk.shadowmap_pars_fragment,Xt.ShaderChunk.bumpmap_pars_fragment,Xt.ShaderChunk.normalmap_pars_fragment,Xt.ShaderChunk.specularmap_pars_fragment,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,Xt.ShaderChunk.map_fragment,Xt.ShaderChunk.color_fragment,Xt.ShaderChunk.alphamap_fragment,Xt.ShaderChunk.alphatest_fragment,Xt.ShaderChunk.specularmap_fragment,Xt.ShaderChunk.lights_phong_fragment,Xt.ShaderChunk.lightmap_fragment,Xt.ShaderChunk.envmap_fragment,Xt.ShaderChunk.shadowmap_fragment,Xt.ShaderChunk.linear_to_gamma_fragment,Xt.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},particle_basic:{uniforms:Xt.UniformsUtils.merge([Xt.UniformsLib.particle,Xt.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_vertex,Xt.ShaderChunk.shadowmap_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\t#ifdef USE_SIZEATTENUATION","\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );","\t#else","\t\tgl_PointSize = size;","\t#endif","\tgl_Position = projectionMatrix * mvPosition;",Xt.ShaderChunk.logdepthbuf_vertex,Xt.ShaderChunk.worldpos_vertex,Xt.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_fragment,Xt.ShaderChunk.map_particle_pars_fragment,Xt.ShaderChunk.fog_pars_fragment,Xt.ShaderChunk.shadowmap_pars_fragment,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( psColor, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,Xt.ShaderChunk.map_particle_fragment,Xt.ShaderChunk.color_fragment,Xt.ShaderChunk.alphatest_fragment,"\toutgoingLight = diffuseColor.rgb;",Xt.ShaderChunk.shadowmap_fragment,Xt.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:Xt.UniformsUtils.merge([Xt.UniformsLib.common,Xt.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",Xt.ShaderChunk.common,Xt.ShaderChunk.color_pars_fragment,Xt.ShaderChunk.fog_pars_fragment,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tif ( mod( vLineDistance, totalSize ) > dashSize ) {","\t\tdiscard;","\t}","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,Xt.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",Xt.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[Xt.ShaderChunk.common,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",Xt.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );","\tgl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",Xt.ShaderChunk.common,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvNormal = normalize( normalMatrix * normal );",Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",Xt.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",Xt.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",Xt.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[Xt.ShaderChunk.common,Xt.ShaderChunk.morphtarget_pars_vertex,Xt.ShaderChunk.skinning_pars_vertex,Xt.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",Xt.ShaderChunk.skinbase_vertex,Xt.ShaderChunk.morphtarget_vertex,Xt.ShaderChunk.skinning_vertex,Xt.ShaderChunk.default_vertex,Xt.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[Xt.ShaderChunk.common,Xt.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","\tres -= res.xxyz * bit_mask;","\treturn res;","}","void main() {",Xt.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","\t#else","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","\t#endif","}"].join("\n")}},Xt.WebGLRenderer=function(e){console.log("THREE.WebGLRenderer",Xt.REVISION);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),n=void 0!==e.context?e.context:null,r=1,i=void 0!==e.precision?e.precision:"highp",o=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,l=void 0!==e.antialias&&e.antialias,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,h=void 0!==e.logarithmicDepthBuffer&&e.logarithmicDepthBuffer,p=new Xt.Color(0),f=0,d=[],m={},g=[],y=[],v=[],b=[],x=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=Xt.PCFShadowMap,this.shadowMapCullFace=Xt.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var w,_=this,M=[],S=null,E=null,T=-1,C="",A=null,P=0,L=0,R=0,k=t.width,O=t.height,F=0,U=0,D=new Xt.Frustum,N=new Xt.Matrix4,B=new Xt.Vector3,z=new Xt.Vector3,V=!0,I={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var j={alpha:o,depth:a,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:c};if(null===(w=n||t.getContext("webgl",j)||t.getContext("experimental-webgl",j)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";t.addEventListener("webglcontextlost",function(e){e.preventDefault(),q(),X(),m={}},!1)}catch(e){Xt.error("THREE.WebGLRenderer: "+e)}var H=new Xt.WebGLState(w,it);void 0===w.getShaderPrecisionFormat&&(w.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var W=new Xt.WebGLExtensions(w);W.get("OES_texture_float"),W.get("OES_texture_float_linear"),W.get("OES_texture_half_float"),W.get("OES_texture_half_float_linear"),W.get("OES_standard_derivatives"),h&&W.get("EXT_frag_depth");var G=function(e,t,n,r){!0===u&&(e*=r,t*=r,n*=r),w.clearColor(e,t,n,r)},X=function(){w.clearColor(0,0,0,1),w.clearDepth(1),w.clearStencil(0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.frontFace(w.CCW),w.cullFace(w.BACK),w.enable(w.CULL_FACE),w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),w.viewport(L,R,k,O),G(p.r,p.g,p.b,f)},q=function(){A=S=null,T=-1,V=!(C=""),H.reset()};X(),this.context=w,this.state=H;var Y,K=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS),Q=w.getParameter(w.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Z=w.getParameter(w.MAX_TEXTURE_SIZE),$=w.getParameter(w.MAX_CUBE_MAP_TEXTURE_SIZE),J=0<Q,ee=J&&W.get("OES_texture_float"),te=w.getShaderPrecisionFormat(w.VERTEX_SHADER,w.HIGH_FLOAT),ne=w.getShaderPrecisionFormat(w.VERTEX_SHADER,w.MEDIUM_FLOAT),re=w.getShaderPrecisionFormat(w.FRAGMENT_SHADER,w.HIGH_FLOAT),ie=w.getShaderPrecisionFormat(w.FRAGMENT_SHADER,w.MEDIUM_FLOAT),oe=function(){if(void 0!==Y)return Y;if(Y=[],W.get("WEBGL_compressed_texture_pvrtc")||W.get("WEBGL_compressed_texture_s3tc"))for(var e=w.getParameter(w.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)Y.push(e[t]);return Y},ae=0<te.precision&&0<re.precision,se=0<ne.precision&&0<ie.precision;"highp"!==i||ae||(se?(i="mediump",Xt.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(i="lowp",Xt.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==i||se||(i="lowp",Xt.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var le,ue=new Xt.ShadowMapPlugin(this,d,m,g),ce=new Xt.SpritePlugin(this,b),he=new Xt.LensFlarePlugin(this,x);function pe(e){e.__webglVertexBuffer=w.createBuffer(),e.__webglNormalBuffer=w.createBuffer(),e.__webglTangentBuffer=w.createBuffer(),e.__webglColorBuffer=w.createBuffer(),e.__webglUVBuffer=w.createBuffer(),e.__webglUV2Buffer=w.createBuffer(),e.__webglSkinIndicesBuffer=w.createBuffer(),e.__webglSkinWeightsBuffer=w.createBuffer(),e.__webglFaceBuffer=w.createBuffer(),e.__webglLineBuffer=w.createBuffer();var t=e.numMorphTargets;if(t){e.__webglMorphTargetsBuffers=[];for(var n=0,r=t;n<r;n++)e.__webglMorphTargetsBuffers.push(w.createBuffer())}var i=e.numMorphNormals;if(i)for(e.__webglMorphNormalsBuffers=[],n=0,r=i;n<r;n++)e.__webglMorphNormalsBuffers.push(w.createBuffer());_.info.memory.geometries++}this.getContext=function(){return w},this.forceContextLoss=function(){W.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return J},this.supportsFloatTextures=function(){return W.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return W.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return W.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return W.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return W.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return W.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){if(void 0!==le)return le;var e=W.get("EXT_texture_filter_anisotropic");return le=null!==e?w.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},this.getPrecision=function(){return i},this.getPixelRatio=function(){return r},this.setPixelRatio=function(e){r=e},this.setSize=function(e,n,i){t.width=e*r,t.height=n*r,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,i){L=e*r,R=t*r,k=n*r,O=i*r,w.viewport(L,R,k,O)},this.setScissor=function(e,t,n,i){w.scissor(e*r,t*r,n*r,i*r)},this.enableScissorTest=function(e){e?w.enable(w.SCISSOR_TEST):w.disable(w.SCISSOR_TEST)},this.getClearColor=function(){return p},this.setClearColor=function(e,t){p.set(e),f=void 0!==t?t:1,G(p.r,p.g,p.b,f)},this.getClearAlpha=function(){return f},this.setClearAlpha=function(e){f=e,G(p.r,p.g,p.b,f)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=w.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=w.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=w.STENCIL_BUFFER_BIT),w.clear(r)},this.clearColor=function(){w.clear(w.COLOR_BUFFER_BIT)},this.clearDepth=function(){w.clear(w.DEPTH_BUFFER_BIT)},this.clearStencil=function(){w.clear(w.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=q;var fe=function(e){e.target.traverse(function(e){e.removeEventListener("remove",fe),function(e){e instanceof Xt.Mesh||e instanceof Xt.PointCloud||e instanceof Xt.Line?delete m[e.id]:(e instanceof Xt.ImmediateRenderObject||e.immediateRenderCallback)&&function(e,t){for(var n=e.length-1;0<=n;n--)e[n].object===t&&e.splice(n,1)}(g,e),delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}(e)})},de=function(e){var t=e.target;t.removeEventListener("dispose",de),be(t)},me=function(e){var t=e.target;t.removeEventListener("dispose",me),xe(t),_.info.memory.textures--},ge=function(e){var t=e.target;t.removeEventListener("dispose",ge),we(t),_.info.memory.textures--},ye=function(e){var t=e.target;t.removeEventListener("dispose",ye),_e(t)},ve=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],n=0,r=t.length;n<r;n++)void 0!==e[i=t[n]]&&(w.deleteBuffer(e[i]),delete e[i]);if(void 0!==e.__webglCustomAttributesList){for(var i in e.__webglCustomAttributesList)w.deleteBuffer(e.__webglCustomAttributesList[i].buffer);delete e.__webglCustomAttributesList}_.info.memory.geometries--},be=function(e){if(delete e.__webglInit,e instanceof Xt.BufferGeometry){for(var t in e.attributes){var n=e.attributes[t];void 0!==n.buffer&&(w.deleteBuffer(n.buffer),delete n.buffer)}_.info.memory.geometries--}else{var r=Ue[e.id];if(void 0!==r){for(var i=0,o=r.length;i<o;i++){var a=r[i];if(void 0!==a.numMorphTargets){for(var s=0,l=a.numMorphTargets;s<l;s++)w.deleteBuffer(a.__webglMorphTargetsBuffers[s]);delete a.__webglMorphTargetsBuffers}if(void 0!==a.numMorphNormals){for(s=0,l=a.numMorphNormals;s<l;s++)w.deleteBuffer(a.__webglMorphNormalsBuffers[s]);delete a.__webglMorphNormalsBuffers}ve(a)}delete Ue[e.id]}else ve(e)}C=""},xe=function(e){if(e.image&&e.image.__webglTextureCube)w.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube;else{if(void 0===e.__webglInit)return;w.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},we=function(e){if(e&&void 0!==e.__webglTexture){if(w.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof Xt.WebGLRenderTargetCube)for(var t=0;t<6;t++)w.deleteFramebuffer(e.__webglFramebuffer[t]),w.deleteRenderbuffer(e.__webglRenderbuffer[t]);else w.deleteFramebuffer(e.__webglFramebuffer),w.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},_e=function(e){var t=e.program.program;if(void 0!==t){var n,r,i;e.program=void 0;var o=!1;for(n=0,r=M.length;n<r;n++)if((i=M[n]).program===t){i.usedTimes--,0===i.usedTimes&&(o=!0);break}if(!0===o){var a=[];for(n=0,r=M.length;n<r;n++)(i=M[n]).program!==t&&a.push(i);M=a,w.deleteProgram(t),_.info.memory.programs--}}};function Me(e){var t=e.geometry,n=e.material,r=t.vertices.length;if(n.attributes)for(var i in void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]),n.attributes){var o=n.attributes[i];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(r*a),o.buffer=w.createBuffer(),o.buffer.belongsToAttribute=i,o.needsUpdate=!0}t.__webglCustomAttributesList.push(o)}}function Se(e,t){var n=t.geometry,r=e.faces3,i=3*r.length,o=1*r.length,a=3*r.length,s=Ee(t,e);e.__vertexArray=new Float32Array(3*i),e.__normalArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__uvArray=new Float32Array(2*i),1<n.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*i)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*i)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*i),e.__skinWeightArray=new Float32Array(4*i));var l=null!==W.get("OES_element_index_uint")&&21845<o?Uint32Array:Uint16Array;e.__typeArray=l,e.__faceArray=new l(3*o),e.__lineArray=new l(2*a);var u=e.numMorphTargets;if(u){e.__morphTargetsArrays=[];for(var c=0,h=u;c<h;c++)e.__morphTargetsArrays.push(new Float32Array(3*i))}var p=e.numMorphNormals;if(p)for(e.__morphNormalsArrays=[],c=0,h=p;c<h;c++)e.__morphNormalsArrays.push(new Float32Array(3*i));if(e.__webglFaceCount=3*o,e.__webglLineCount=2*a,s.attributes)for(var f in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),s.attributes){var d=s.attributes[f],m={};for(var g in d)m[g]=d[g];if(!m.__webglInitialized||m.createUniqueBuffers){m.__webglInitialized=!0;var y=1;"v2"===m.type?y=2:"v3"===m.type?y=3:"v4"===m.type?y=4:"c"===m.type&&(y=3),m.size=y,m.array=new Float32Array(i*y),m.buffer=w.createBuffer(),m.buffer.belongsToAttribute=f,d.needsUpdate=!0,m.__original=d}e.__webglCustomAttributesList.push(m)}e.__inittedArrays=!0}function Ee(e,t){return e.material instanceof Xt.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function Te(e,t,n,r,i){if(e.__inittedArrays){var o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,_,M,S,E,T,C,A,P,L,R,k,O,F,U,D,N,B,z,V,I,j,H,W,G,X,q,Y=(o=i)instanceof Xt.MeshPhongMaterial==0&&o.shading===Xt.FlatShading,K=0,Q=0,Z=0,$=0,J=0,ee=0,te=0,ne=0,re=0,ie=0,oe=0,ae=0,se=e.__vertexArray,le=e.__uvArray,ue=e.__uv2Array,ce=e.__normalArray,he=e.__tangentArray,pe=e.__colorArray,fe=e.__skinIndexArray,de=e.__skinWeightArray,me=e.__morphTargetsArrays,ge=e.__morphNormalsArrays,ye=e.__webglCustomAttributesList,ve=e.__faceArray,be=e.__lineArray,xe=t.geometry,we=xe.verticesNeedUpdate,_e=xe.elementsNeedUpdate,Me=xe.uvsNeedUpdate,Se=xe.normalsNeedUpdate,Ee=xe.tangentsNeedUpdate,Te=xe.colorsNeedUpdate,Ce=xe.morphTargetsNeedUpdate,Ae=xe.vertices,Pe=e.faces3,Le=xe.faces,Re=xe.faceVertexUvs[0],ke=xe.faceVertexUvs[1],Oe=xe.skinIndices,Fe=xe.skinWeights,Ue=xe.morphTargets,De=xe.morphNormals;if(we){for(a=0,s=Pe.length;a<s;a++)g=Ae[(l=Le[Pe[a]]).a],y=Ae[l.b],v=Ae[l.c],se[Q]=g.x,se[Q+1]=g.y,se[Q+2]=g.z,se[Q+3]=y.x,se[Q+4]=y.y,se[Q+5]=y.z,se[Q+6]=v.x,se[Q+7]=v.y,se[Q+8]=v.z,Q+=9;w.bindBuffer(w.ARRAY_BUFFER,e.__webglVertexBuffer),w.bufferData(w.ARRAY_BUFFER,se,n)}if(Ce)for(V=0,I=Ue.length;V<I;V++){for(a=oe=0,s=Pe.length;a<s;a++)l=Le[W=Pe[a]],g=Ue[V].vertices[l.a],y=Ue[V].vertices[l.b],v=Ue[V].vertices[l.c],(j=me[V])[oe]=g.x,j[oe+1]=g.y,j[oe+2]=g.z,j[oe+3]=y.x,j[oe+4]=y.y,j[oe+5]=y.z,j[oe+6]=v.x,j[oe+7]=v.y,j[oe+8]=v.z,i.morphNormals&&(E=Y?S=M=De[V].faceNormals[W]:(M=(G=De[V].vertexNormals[W]).a,S=G.b,G.c),(H=ge[V])[oe]=M.x,H[oe+1]=M.y,H[oe+2]=M.z,H[oe+3]=S.x,H[oe+4]=S.y,H[oe+5]=S.z,H[oe+6]=E.x,H[oe+7]=E.y,H[oe+8]=E.z),oe+=9;w.bindBuffer(w.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[V]),w.bufferData(w.ARRAY_BUFFER,me[V],n),i.morphNormals&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[V]),w.bufferData(w.ARRAY_BUFFER,ge[V],n))}if(Fe.length){for(a=0,s=Pe.length;a<s;a++)P=Fe[(l=Le[Pe[a]]).a],L=Fe[l.b],R=Fe[l.c],de[ie]=P.x,de[ie+1]=P.y,de[ie+2]=P.z,de[ie+3]=P.w,de[ie+4]=L.x,de[ie+5]=L.y,de[ie+6]=L.z,de[ie+7]=L.w,de[ie+8]=R.x,de[ie+9]=R.y,de[ie+10]=R.z,de[ie+11]=R.w,k=Oe[l.a],O=Oe[l.b],F=Oe[l.c],fe[ie]=k.x,fe[ie+1]=k.y,fe[ie+2]=k.z,fe[ie+3]=k.w,fe[ie+4]=O.x,fe[ie+5]=O.y,fe[ie+6]=O.z,fe[ie+7]=O.w,fe[ie+8]=F.x,fe[ie+9]=F.y,fe[ie+10]=F.z,fe[ie+11]=F.w,ie+=12;0<ie&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),w.bufferData(w.ARRAY_BUFFER,fe,n),w.bindBuffer(w.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),w.bufferData(w.ARRAY_BUFFER,de,n))}if(Te){for(a=0,s=Pe.length;a<s;a++)h=(l=Le[Pe[a]]).vertexColors,p=l.color,A=3===h.length&&i.vertexColors===Xt.VertexColors?(T=h[0],C=h[1],h[2]):C=T=p,pe[re]=T.r,pe[re+1]=T.g,pe[re+2]=T.b,pe[re+3]=C.r,pe[re+4]=C.g,pe[re+5]=C.b,pe[re+6]=A.r,pe[re+7]=A.g,pe[re+8]=A.b,re+=9;0<re&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglColorBuffer),w.bufferData(w.ARRAY_BUFFER,pe,n))}if(Ee&&xe.hasTangents){for(a=0,s=Pe.length;a<s;a++)b=(f=(l=Le[Pe[a]]).vertexTangents)[0],x=f[1],_=f[2],he[te]=b.x,he[te+1]=b.y,he[te+2]=b.z,he[te+3]=b.w,he[te+4]=x.x,he[te+5]=x.y,he[te+6]=x.z,he[te+7]=x.w,he[te+8]=_.x,he[te+9]=_.y,he[te+10]=_.z,he[te+11]=_.w,te+=12;w.bindBuffer(w.ARRAY_BUFFER,e.__webglTangentBuffer),w.bufferData(w.ARRAY_BUFFER,he,n)}if(Se){for(a=0,s=Pe.length;a<s;a++)if(u=(l=Le[Pe[a]]).vertexNormals,c=l.normal,3===u.length&&!1===Y)for(U=0;U<3;U++)N=u[U],ce[ee]=N.x,ce[ee+1]=N.y,ce[ee+2]=N.z,ee+=3;else for(U=0;U<3;U++)ce[ee]=c.x,ce[ee+1]=c.y,ce[ee+2]=c.z,ee+=3;w.bindBuffer(w.ARRAY_BUFFER,e.__webglNormalBuffer),w.bufferData(w.ARRAY_BUFFER,ce,n)}if(Me&&Re){for(a=0,s=Pe.length;a<s;a++)if(void 0!==(d=Re[Pe[a]]))for(U=0;U<3;U++)B=d[U],le[Z]=B.x,le[Z+1]=B.y,Z+=2;0<Z&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglUVBuffer),w.bufferData(w.ARRAY_BUFFER,le,n))}if(Me&&ke){for(a=0,s=Pe.length;a<s;a++)if(void 0!==(m=ke[Pe[a]]))for(U=0;U<3;U++)z=m[U],ue[$]=z.x,ue[$+1]=z.y,$+=2;0<$&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglUV2Buffer),w.bufferData(w.ARRAY_BUFFER,ue,n))}if(_e){for(a=0,s=Pe.length;a<s;a++)ve[J]=K,ve[J+1]=K+1,ve[J+2]=K+2,J+=3,be[ne]=K,be[ne+1]=K+1,be[ne+2]=K,be[ne+3]=K+2,be[ne+4]=K+1,be[ne+5]=K+2,ne+=6,K+=3;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,ve,n),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,be,n)}if(ye)for(U=0,D=ye.length;U<D;U++)if((q=ye[U]).__original.needsUpdate){if(ae=0,1===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)l=Le[Pe[a]],q.array[ae]=q.value[l.a],q.array[ae+1]=q.value[l.b],q.array[ae+2]=q.value[l.c],ae+=3;else if("faces"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)X=q.value[Pe[a]],q.array[ae]=X,q.array[ae+1]=X,q.array[ae+2]=X,ae+=3}else if(2===q.size){if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)l=Le[Pe[a]],g=q.value[l.a],y=q.value[l.b],v=q.value[l.c],q.array[ae]=g.x,q.array[ae+1]=g.y,q.array[ae+2]=y.x,q.array[ae+3]=y.y,q.array[ae+4]=v.x,q.array[ae+5]=v.y,ae+=6;else if("faces"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)v=y=g=X=q.value[Pe[a]],q.array[ae]=g.x,q.array[ae+1]=g.y,q.array[ae+2]=y.x,q.array[ae+3]=y.y,q.array[ae+4]=v.x,q.array[ae+5]=v.y,ae+=6}else if(3===q.size){var Ne;if(Ne="c"===q.type?["r","g","b"]:["x","y","z"],void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)l=Le[Pe[a]],g=q.value[l.a],y=q.value[l.b],v=q.value[l.c],q.array[ae]=g[Ne[0]],q.array[ae+1]=g[Ne[1]],q.array[ae+2]=g[Ne[2]],q.array[ae+3]=y[Ne[0]],q.array[ae+4]=y[Ne[1]],q.array[ae+5]=y[Ne[2]],q.array[ae+6]=v[Ne[0]],q.array[ae+7]=v[Ne[1]],q.array[ae+8]=v[Ne[2]],ae+=9;else if("faces"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)v=y=g=X=q.value[Pe[a]],q.array[ae]=g[Ne[0]],q.array[ae+1]=g[Ne[1]],q.array[ae+2]=g[Ne[2]],q.array[ae+3]=y[Ne[0]],q.array[ae+4]=y[Ne[1]],q.array[ae+5]=y[Ne[2]],q.array[ae+6]=v[Ne[0]],q.array[ae+7]=v[Ne[1]],q.array[ae+8]=v[Ne[2]],ae+=9;else if("faceVertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)g=(X=q.value[Pe[a]])[0],y=X[1],v=X[2],q.array[ae]=g[Ne[0]],q.array[ae+1]=g[Ne[1]],q.array[ae+2]=g[Ne[2]],q.array[ae+3]=y[Ne[0]],q.array[ae+4]=y[Ne[1]],q.array[ae+5]=y[Ne[2]],q.array[ae+6]=v[Ne[0]],q.array[ae+7]=v[Ne[1]],q.array[ae+8]=v[Ne[2]],ae+=9}else if(4===q.size)if(void 0===q.boundTo||"vertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)l=Le[Pe[a]],g=q.value[l.a],y=q.value[l.b],v=q.value[l.c],q.array[ae]=g.x,q.array[ae+1]=g.y,q.array[ae+2]=g.z,q.array[ae+3]=g.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=v.x,q.array[ae+9]=v.y,q.array[ae+10]=v.z,q.array[ae+11]=v.w,ae+=12;else if("faces"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)v=y=g=X=q.value[Pe[a]],q.array[ae]=g.x,q.array[ae+1]=g.y,q.array[ae+2]=g.z,q.array[ae+3]=g.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=v.x,q.array[ae+9]=v.y,q.array[ae+10]=v.z,q.array[ae+11]=v.w,ae+=12;else if("faceVertices"===q.boundTo)for(a=0,s=Pe.length;a<s;a++)g=(X=q.value[Pe[a]])[0],y=X[1],v=X[2],q.array[ae]=g.x,q.array[ae+1]=g.y,q.array[ae+2]=g.z,q.array[ae+3]=g.w,q.array[ae+4]=y.x,q.array[ae+5]=y.y,q.array[ae+6]=y.z,q.array[ae+7]=y.w,q.array[ae+8]=v.x,q.array[ae+9]=v.y,q.array[ae+10]=v.z,q.array[ae+11]=v.w,ae+=12;w.bindBuffer(w.ARRAY_BUFFER,q.buffer),w.bufferData(w.ARRAY_BUFFER,q.array,n)}r&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function Ce(e,t,n,r){for(var i=n.attributes,o=t.attributes,a=t.attributesKeys,s=0,l=a.length;s<l;s++){var u=a[s],c=o[u];if(0<=c){var h=i[u];if(void 0!==h){var p=h.itemSize;w.bindBuffer(w.ARRAY_BUFFER,h.buffer),H.enableAttribute(c),w.vertexAttribPointer(c,p,w.FLOAT,!1,0,r*p*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[u].length?w.vertexAttrib2fv(c,e.defaultAttributeValues[u]):3===e.defaultAttributeValues[u].length&&w.vertexAttrib3fv(c,e.defaultAttributeValues[u]))}}H.disableUnusedAttributes()}function Ae(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Pe(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Le(e,t){return t[0]-e[0]}function Re(e,t,n,r,i){for(var o,a=0,s=e.length;a<s;a++){var l=e[a],u=l.object,c=l.buffer;if(Ke(u,t),i)o=i;else{if(!(o=l.material))continue;We(o)}_.setMaterialFaces(o),c instanceof Xt.BufferGeometry?_.renderBufferDirect(t,n,r,o,c,u):_.renderBuffer(t,n,r,o,c,u)}}function ke(e,t,n,r,i,o){for(var a,s=0,l=e.length;s<l;s++){var u=e[s],c=u.object;if(c.visible){if(o)a=o;else{if(!(a=u[t]))continue;We(a)}_.renderImmediateObject(n,r,i,a,c)}}}function Oe(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function Fe(e){var t=e.object,n=e.buffer,r=t.geometry,i=t.material;if(i instanceof Xt.MeshFaceMaterial){var o=r instanceof Xt.BufferGeometry?0:n.materialIndex;i=i.materials[o],(e.material=i).transparent?v.push(e):y.push(e)}else i&&((e.material=i).transparent?v.push(e):y.push(e))}this.renderBufferImmediate=function(e,t,n){if(H.initAttributes(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=w.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=w.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=w.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=w.createBuffer()),e.hasPositions&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglVertexBuffer),w.bufferData(w.ARRAY_BUFFER,e.positionArray,w.DYNAMIC_DRAW),H.enableAttribute(t.attributes.position),w.vertexAttribPointer(t.attributes.position,3,w.FLOAT,!1,0,0)),e.hasNormals){if(w.bindBuffer(w.ARRAY_BUFFER,e.__webglNormalBuffer),n instanceof Xt.MeshPhongMaterial==0&&n.shading===Xt.FlatShading){var r,i,o,a,s,l,u,c,h,p,f,d=3*e.count;for(f=0;f<d;f+=9)a=(p=e.normalArray)[f],l=p[f+1],c=p[f+2],s=p[f+3],u=p[f+4],h=p[f+5],r=(a+s+p[f+6])/3,i=(l+u+p[f+7])/3,o=(c+h+p[f+8])/3,p[f]=r,p[f+1]=i,p[f+2]=o,p[f+3]=r,p[f+4]=i,p[f+5]=o,p[f+6]=r,p[f+7]=i,p[f+8]=o}w.bufferData(w.ARRAY_BUFFER,e.normalArray,w.DYNAMIC_DRAW),H.enableAttribute(t.attributes.normal),w.vertexAttribPointer(t.attributes.normal,3,w.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglUvBuffer),w.bufferData(w.ARRAY_BUFFER,e.uvArray,w.DYNAMIC_DRAW),H.enableAttribute(t.attributes.uv),w.vertexAttribPointer(t.attributes.uv,2,w.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Xt.NoColors&&(w.bindBuffer(w.ARRAY_BUFFER,e.__webglColorBuffer),w.bufferData(w.ARRAY_BUFFER,e.colorArray,w.DYNAMIC_DRAW),H.enableAttribute(t.attributes.color),w.vertexAttribPointer(t.attributes.color,3,w.FLOAT,!1,0,0)),H.disableUnusedAttributes(),w.drawArrays(w.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,o,a){if(!1!==i.visible){ze(a);var s=Ge(e,t,n,i,a),l=!1,u=i.wireframe?1:0,c="direct_"+o.id+"_"+s.id+"_"+u;if(c!==C&&(C=c,l=!0),l&&H.initAttributes(),a instanceof Xt.Mesh){var h=!0===i.wireframe?w.LINES:w.TRIANGLES;if(g=o.attributes.index)if(v=g.array instanceof Uint32Array&&W.get("OES_element_index_uint")?(y=w.UNSIGNED_INT,4):(y=w.UNSIGNED_SHORT,2),0===(b=o.offsets).length)l&&(Ce(i,s,o,0),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,g.array.length,y,0),_.info.render.calls++,_.info.render.vertices+=g.array.length,_.info.render.faces+=g.array.length/3;else{l=!0;for(var p=0,f=b.length;p<f;p++){var d=b[p].index;l&&(Ce(i,s,o,d),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,b[p].count,y,b[p].start*v),_.info.render.calls++,_.info.render.vertices+=b[p].count,_.info.render.faces+=b[p].count/3}}else{l&&Ce(i,s,o,0);var m=o.attributes.position;w.drawArrays(h,0,m.array.length/m.itemSize),_.info.render.calls++,_.info.render.vertices+=m.array.length/m.itemSize,_.info.render.faces+=m.array.length/(3*m.itemSize)}}else if(a instanceof Xt.PointCloud)if(h=w.POINTS,g=o.attributes.index)if(v=g.array instanceof Uint32Array&&W.get("OES_element_index_uint")?(y=w.UNSIGNED_INT,4):(y=w.UNSIGNED_SHORT,2),0===(b=o.offsets).length)l&&(Ce(i,s,o,0),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,g.array.length,y,0),_.info.render.calls++,_.info.render.points+=g.array.length;else for(1<b.length&&(l=!0),p=0,f=b.length;p<f;p++)d=b[p].index,l&&(Ce(i,s,o,d),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,b[p].count,y,b[p].start*v),_.info.render.calls++,_.info.render.points+=b[p].count;else if(l&&Ce(i,s,o,0),m=o.attributes.position,0===(b=o.offsets).length)w.drawArrays(h,0,m.array.length/3),_.info.render.calls++,_.info.render.points+=m.array.length/3;else for(p=0,f=b.length;p<f;p++)w.drawArrays(h,b[p].index,b[p].count),_.info.render.calls++,_.info.render.points+=b[p].count;else if(a instanceof Xt.Line){var g,y,v,b;if(h=a.mode===Xt.LineStrip?w.LINE_STRIP:w.LINES,H.setLineWidth(i.linewidth*r),g=o.attributes.index)if(v=g.array instanceof Uint32Array?(y=w.UNSIGNED_INT,4):(y=w.UNSIGNED_SHORT,2),0===(b=o.offsets).length)l&&(Ce(i,s,o,0),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,g.array.length,y,0),_.info.render.calls++,_.info.render.vertices+=g.array.length;else for(1<b.length&&(l=!0),p=0,f=b.length;p<f;p++)d=b[p].index,l&&(Ce(i,s,o,d),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g.buffer)),w.drawElements(h,b[p].count,y,b[p].start*v),_.info.render.calls++,_.info.render.vertices+=b[p].count;else if(l&&Ce(i,s,o,0),m=o.attributes.position,0===(b=o.offsets).length)w.drawArrays(h,0,m.array.length/3),_.info.render.calls++,_.info.render.vertices+=m.array.length/3;else for(p=0,f=b.length;p<f;p++)w.drawArrays(h,b[p].index,b[p].count),_.info.render.calls++,_.info.render.vertices+=b[p].count}}},this.renderBuffer=function(e,t,n,i,o,a){if(!1!==i.visible){ze(a);var s=Ge(e,t,n,i,a),l=s.attributes,u=!1,c=i.wireframe?1:0,h=o.id+"_"+s.id+"_"+c;if(h!==C&&(C=h,u=!0),u&&H.initAttributes(),!i.morphTargets&&0<=l.position?u&&(w.bindBuffer(w.ARRAY_BUFFER,o.__webglVertexBuffer),H.enableAttribute(l.position),w.vertexAttribPointer(l.position,3,w.FLOAT,!1,0,0)):a.morphTargetBase&&function(e,t,n){var r=e.program.attributes;if(-1!==n.morphTargetBase&&0<=r.position?(w.bindBuffer(w.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[n.morphTargetBase]),H.enableAttribute(r.position),w.vertexAttribPointer(r.position,3,w.FLOAT,!1,0,0)):0<=r.position&&(w.bindBuffer(w.ARRAY_BUFFER,t.__webglVertexBuffer),H.enableAttribute(r.position),w.vertexAttribPointer(r.position,3,w.FLOAT,!1,0,0)),n.morphTargetForcedOrder.length)for(var i=0,o=n.morphTargetForcedOrder,a=n.morphTargetInfluences;i<e.numSupportedMorphTargets&&i<o.length;)0<=(s=r["morphTarget"+i])&&(w.bindBuffer(w.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[i]]),H.enableAttribute(s),w.vertexAttribPointer(s,3,w.FLOAT,!1,0,0)),0<=(s=r["morphNormal"+i])&&e.morphNormals&&(w.bindBuffer(w.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[i]]),H.enableAttribute(s),w.vertexAttribPointer(s,3,w.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[i]=a[o[i]],i++;else{var s,l=[],u=(a=n.morphTargetInfluences,n.geometry.morphTargets);a.length>u.length&&(console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),a.length=u.length);for(var c=0,h=a.length;c<h;c++){var p=a[c];l.push([p,c])}l.length>e.numSupportedMorphTargets?(l.sort(Le),l.length=e.numSupportedMorphTargets):l.length>e.numSupportedMorphNormals?l.sort(Le):0===l.length&&l.push([0,0]);i=0;for(var f=e.numSupportedMorphTargets;i<f;i++)if(l[i]){var d=l[i][1];0<=(s=r["morphTarget"+i])&&(w.bindBuffer(w.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[d]),H.enableAttribute(s),w.vertexAttribPointer(s,3,w.FLOAT,!1,0,0)),0<=(s=r["morphNormal"+i])&&e.morphNormals&&(w.bindBuffer(w.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[d]),H.enableAttribute(s),w.vertexAttribPointer(s,3,w.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[i]=a[d]}else n.__webglMorphTargetInfluences[i]=0}null!==e.program.uniforms.morphTargetInfluences&&w.uniform1fv(e.program.uniforms.morphTargetInfluences,n.__webglMorphTargetInfluences)}(i,o,a),u){if(o.__webglCustomAttributesList)for(var p=0,f=o.__webglCustomAttributesList.length;p<f;p++){var d=o.__webglCustomAttributesList[p];0<=l[d.buffer.belongsToAttribute]&&(w.bindBuffer(w.ARRAY_BUFFER,d.buffer),H.enableAttribute(l[d.buffer.belongsToAttribute]),w.vertexAttribPointer(l[d.buffer.belongsToAttribute],d.size,w.FLOAT,!1,0,0))}0<=l.color&&(0<a.geometry.colors.length||0<a.geometry.faces.length?(w.bindBuffer(w.ARRAY_BUFFER,o.__webglColorBuffer),H.enableAttribute(l.color),w.vertexAttribPointer(l.color,3,w.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&w.vertexAttrib3fv(l.color,i.defaultAttributeValues.color)),0<=l.normal&&(w.bindBuffer(w.ARRAY_BUFFER,o.__webglNormalBuffer),H.enableAttribute(l.normal),w.vertexAttribPointer(l.normal,3,w.FLOAT,!1,0,0)),0<=l.tangent&&(w.bindBuffer(w.ARRAY_BUFFER,o.__webglTangentBuffer),H.enableAttribute(l.tangent),w.vertexAttribPointer(l.tangent,4,w.FLOAT,!1,0,0)),0<=l.uv&&(a.geometry.faceVertexUvs[0]?(w.bindBuffer(w.ARRAY_BUFFER,o.__webglUVBuffer),H.enableAttribute(l.uv),w.vertexAttribPointer(l.uv,2,w.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&w.vertexAttrib2fv(l.uv,i.defaultAttributeValues.uv)),0<=l.uv2&&(a.geometry.faceVertexUvs[1]?(w.bindBuffer(w.ARRAY_BUFFER,o.__webglUV2Buffer),H.enableAttribute(l.uv2),w.vertexAttribPointer(l.uv2,2,w.FLOAT,!1,0,0)):void 0!==i.defaultAttributeValues&&w.vertexAttrib2fv(l.uv2,i.defaultAttributeValues.uv2)),i.skinning&&0<=l.skinIndex&&0<=l.skinWeight&&(w.bindBuffer(w.ARRAY_BUFFER,o.__webglSkinIndicesBuffer),H.enableAttribute(l.skinIndex),w.vertexAttribPointer(l.skinIndex,4,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,o.__webglSkinWeightsBuffer),H.enableAttribute(l.skinWeight),w.vertexAttribPointer(l.skinWeight,4,w.FLOAT,!1,0,0)),0<=l.lineDistance&&(w.bindBuffer(w.ARRAY_BUFFER,o.__webglLineDistanceBuffer),H.enableAttribute(l.lineDistance),w.vertexAttribPointer(l.lineDistance,1,w.FLOAT,!1,0,0))}if(H.disableUnusedAttributes(),a instanceof Xt.Mesh){var m=o.__typeArray===Uint32Array?w.UNSIGNED_INT:w.UNSIGNED_SHORT;i.wireframe?(H.setLineWidth(i.wireframeLinewidth*r),u&&w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,o.__webglLineBuffer),w.drawElements(w.LINES,o.__webglLineCount,m,0)):(u&&w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,o.__webglFaceBuffer),w.drawElements(w.TRIANGLES,o.__webglFaceCount,m,0)),_.info.render.calls++,_.info.render.vertices+=o.__webglFaceCount,_.info.render.faces+=o.__webglFaceCount/3}else if(a instanceof Xt.Line){var g=a.mode===Xt.LineStrip?w.LINE_STRIP:w.LINES;H.setLineWidth(i.linewidth*r),w.drawArrays(g,0,o.__webglLineCount),_.info.render.calls++}else a instanceof Xt.PointCloud&&(w.drawArrays(w.POINTS,0,o.__webglParticleCount),_.info.render.calls++,_.info.render.points+=o.__webglParticleCount)}},this.render=function(e,t,n,r){if(t instanceof Xt.Camera!=0){var i,o=e.fog;C="",T=-1,(V=!(A=null))===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof Xt.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromMatrix(N),d.length=0,y.length=0,v.length=0,b.length=0,x.length=0,function e(t){if(!1!==t.visible){if(t instanceof Xt.Scene||t instanceof Xt.Group);else if(function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new Xt.Matrix4,e._normalMatrix=new Xt.Matrix3,e.addEventListener("removed",fe));var t,n,r,i,o,a,s,l,u,c=e.geometry;if(void 0===c||void 0===c.__webglInit&&(c.__webglInit=!0,c.addEventListener("dispose",de),c instanceof Xt.BufferGeometry?_.info.memory.geometries++:e instanceof Xt.Mesh?Ne(e,c):e instanceof Xt.Line?void 0===c.__webglVertexBuffer&&((l=c).__webglVertexBuffer=w.createBuffer(),l.__webglColorBuffer=w.createBuffer(),l.__webglLineDistanceBuffer=w.createBuffer(),_.info.memory.geometries++,a=e,s=(o=c).vertices.length,o.__vertexArray=new Float32Array(3*s),o.__colorArray=new Float32Array(3*s),o.__lineDistanceArray=new Float32Array(1*s),o.__webglLineCount=s,Me(a),c.verticesNeedUpdate=!0,c.colorsNeedUpdate=!0,c.lineDistancesNeedUpdate=!0):e instanceof Xt.PointCloud&&void 0===c.__webglVertexBuffer&&((i=c).__webglVertexBuffer=w.createBuffer(),i.__webglColorBuffer=w.createBuffer(),_.info.memory.geometries++,n=e,r=(t=c).vertices.length,t.__vertexArray=new Float32Array(3*r),t.__colorArray=new Float32Array(3*r),t.__webglParticleCount=r,Me(n),c.verticesNeedUpdate=!0,c.colorsNeedUpdate=!0)),void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof Xt.Mesh){if(c instanceof Xt.BufferGeometry)Be(m,c,e);else if(c instanceof Xt.Geometry)for(var h=Ue[c.id],p=0,f=h.length;p<f;p++)Be(m,h[p],e)}else e instanceof Xt.Line||e instanceof Xt.PointCloud?Be(m,c,e):(e instanceof Xt.ImmediateRenderObject||e.immediateRenderCallback)&&(u=e,g.push({id:null,object:u,opaque:null,transparent:null,z:0}))}(t),t instanceof Xt.Light)d.push(t);else if(t instanceof Xt.Sprite)b.push(t);else if(t instanceof Xt.LensFlare)x.push(t);else{var n=m[t.id];if(n&&(!1===t.frustumCulled||!0===D.intersectsObject(t)))for(var r=0,i=n.length;r<i;r++){var o=n[r];Fe(o),(o.render=!0)===_.sortObjects&&(B.setFromMatrixPosition(t.matrixWorld),B.applyProjection(N),o.z=B.z)}}for(r=0,i=t.children.length;r<i;r++)e(t.children[r])}}(e),!0===_.sortObjects&&(y.sort(Ae),v.sort(Pe)),ue.render(e,t),_.info.render.calls=0,_.info.render.vertices=0,_.info.render.faces=0,_.info.render.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var a=0,s=g.length;a<s;a++){var l=g[a],u=l.object;u.visible&&(Ke(u,t),Oe(l))}if(e.overrideMaterial){var c=e.overrideMaterial;We(c),Re(y,t,d,o,c),Re(v,t,d,o,c),ke(g,"",t,d,o,c)}else H.setBlending(Xt.NoBlending),Re(y,t,d,o,null),ke(g,"opaque",t,d,o,null),Re(v,t,d,o,null),ke(g,"transparent",t,d,o,null);ce.render(e,t),he.render(e,t,F,U),n&&n.generateMipmaps&&n.minFilter!==Xt.NearestFilter&&n.minFilter!==Xt.LinearFilter&&((i=n)instanceof Xt.WebGLRenderTargetCube?(w.bindTexture(w.TEXTURE_CUBE_MAP,i.__webglTexture),w.generateMipmap(w.TEXTURE_CUBE_MAP),w.bindTexture(w.TEXTURE_CUBE_MAP,null)):(w.bindTexture(w.TEXTURE_2D,i.__webglTexture),w.generateMipmap(w.TEXTURE_2D),w.bindTexture(w.TEXTURE_2D,null))),H.setDepthTest(!0),H.setDepthWrite(!0),H.setColorWrite(!0)}else Xt.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.renderImmediateObject=function(e,t,n,r,i){var o=Ge(e,t,n,r,i);C="",_.setMaterialFaces(r),i.immediateRenderCallback?i.immediateRenderCallback(o,w,D):i.render(function(e){_.renderBufferImmediate(e,o,r)})};var Ue={},De=0;function Ne(e,t){var n=e.material;void 0!==Ue[t.id]&&!0!==t.groupsNeedUpdate||(delete m[e.id],Ue[t.id]=function(e,t){for(var n,r,i=W.get("OES_element_index_uint")?4294967296:65535,o={},a=e.morphTargets.length,s=e.morphNormals.length,l={},u=[],c=0,h=e.faces.length;c<h;c++){var p=e.faces[c],f=t?p.materialIndex:0;f in o||(o[f]={hash:f,counter:0}),(n=o[f].hash+"_"+o[f].counter)in l||(r={id:De++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:a,numMorphNormals:s},l[n]=r,u.push(r)),l[n].vertices+3>i&&(o[f].counter+=1,(n=o[f].hash+"_"+o[f].counter)in l||(r={id:De++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:a,numMorphNormals:s},l[n]=r,u.push(r))),l[n].faces3.push(c),l[n].vertices+=3}return u}(t,n instanceof Xt.MeshFaceMaterial),t.groupsNeedUpdate=!1);for(var r=Ue[t.id],i=0,o=r.length;i<o;i++){var a=r[i];(void 0===a.__webglVertexBuffer&&(pe(a),Se(a,e),t.verticesNeedUpdate=!0,t.morphTargetsNeedUpdate=!0,t.elementsNeedUpdate=!0,t.uvsNeedUpdate=!0,t.normalsNeedUpdate=!0,t.tangentsNeedUpdate=!0,t.colorsNeedUpdate=!0)||void 0===e.__webglActive)&&Be(m,a,e)}e.__webglActive=!0}function Be(e,t,n){var r=n.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:n,material:null,z:0})}function ze(e){var t=e.geometry;if(t instanceof Xt.BufferGeometry)for(var n=t.attributes,r=t.attributesKeys,i=0,o=r.length;i<o;i++){var a=r[i],s=n[a],l="index"===a?w.ELEMENT_ARRAY_BUFFER:w.ARRAY_BUFFER;void 0===s.buffer?(s.buffer=w.createBuffer(),w.bindBuffer(l,s.buffer),w.bufferData(l,s.array,s instanceof Xt.DynamicBufferAttribute?w.DYNAMIC_DRAW:w.STATIC_DRAW),s.needsUpdate=!1):!0===s.needsUpdate&&(w.bindBuffer(l,s.buffer),void 0===s.updateRange||-1===s.updateRange.count?w.bufferSubData(l,0,s.array):0===s.updateRange.count?console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):(w.bufferSubData(l,s.updateRange.offset*s.array.BYTES_PER_ELEMENT,s.array.subarray(s.updateRange.offset,s.updateRange.offset+s.updateRange.count)),s.updateRange.count=0),s.needsUpdate=!1)}else if(e instanceof Xt.Mesh){!0===t.groupsNeedUpdate&&Ne(e,t);for(var u=Ue[t.id],c=(i=0,u.length);i<c;i++){var h=u[i],p=(f=Ee(e,h)).attributes&&Ve(f);(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||p)&&Te(h,e,w.DYNAMIC_DRAW,!t.dynamic,f)}t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,f.attributes&&Ie(f)}else if(e instanceof Xt.Line)p=(f=Ee(e,t)).attributes&&Ve(f),(t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||p)&&function(e,t){var n,r,i,o,a,s,l,u,c,h,p,f,d=e.vertices,m=e.colors,g=e.lineDistances,y=d.length,v=m.length,b=g.length,x=e.__vertexArray,_=e.__colorArray,M=e.__lineDistanceArray,S=e.verticesNeedUpdate,E=e.colorsNeedUpdate,T=e.lineDistancesNeedUpdate,C=e.__webglCustomAttributesList;if(S){for(n=0;n<y;n++)o=d[n],x[a=3*n]=o.x,x[a+1]=o.y,x[a+2]=o.z;w.bindBuffer(w.ARRAY_BUFFER,e.__webglVertexBuffer),w.bufferData(w.ARRAY_BUFFER,x,t)}if(E){for(r=0;r<v;r++)s=m[r],_[a=3*r]=s.r,_[a+1]=s.g,_[a+2]=s.b;w.bindBuffer(w.ARRAY_BUFFER,e.__webglColorBuffer),w.bufferData(w.ARRAY_BUFFER,_,t)}if(T){for(i=0;i<b;i++)M[i]=g[i];w.bindBuffer(w.ARRAY_BUFFER,e.__webglLineDistanceBuffer),w.bufferData(w.ARRAY_BUFFER,M,t)}if(C)for(l=0,u=C.length;l<u;l++)if((f=C[l]).needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo)){if(a=0,h=f.value.length,1===f.size)for(c=0;c<h;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,a+=2;else if(3===f.size)if("c"===f.type)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.r,f.array[a+1]=p.g,f.array[a+2]=p.b,a+=3;else for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,f.array[a+2]=p.z,a+=3;else if(4===f.size)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,f.array[a+2]=p.z,f.array[a+3]=p.w,a+=4;w.bindBuffer(w.ARRAY_BUFFER,f.buffer),w.bufferData(w.ARRAY_BUFFER,f.array,t),f.needsUpdate=!1}}(t,w.DYNAMIC_DRAW),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,f.attributes&&Ie(f);else if(e instanceof Xt.PointCloud){var f;p=(f=Ee(e,t)).attributes&&Ve(f),(t.verticesNeedUpdate||t.colorsNeedUpdate||p)&&function(e,t,n){var r,i,o,a,s,l,u,c,h,p,f,d=e.vertices,m=d.length,g=e.colors,y=g.length,v=e.__vertexArray,b=e.__colorArray,x=e.verticesNeedUpdate,_=e.colorsNeedUpdate,M=e.__webglCustomAttributesList;if(x){for(r=0;r<m;r++)o=d[r],v[a=3*r]=o.x,v[a+1]=o.y,v[a+2]=o.z;w.bindBuffer(w.ARRAY_BUFFER,e.__webglVertexBuffer),w.bufferData(w.ARRAY_BUFFER,v,t)}if(_){for(i=0;i<y;i++)s=g[i],b[a=3*i]=s.r,b[a+1]=s.g,b[a+2]=s.b;w.bindBuffer(w.ARRAY_BUFFER,e.__webglColorBuffer),w.bufferData(w.ARRAY_BUFFER,b,t)}if(M)for(l=0,u=M.length;l<u;l++){if((f=M[l]).needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo))if(h=f.value.length,a=0,1===f.size)for(c=0;c<h;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,a+=2;else if(3===f.size)if("c"===f.type)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.r,f.array[a+1]=p.g,f.array[a+2]=p.b,a+=3;else for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,f.array[a+2]=p.z,a+=3;else if(4===f.size)for(c=0;c<h;c++)p=f.value[c],f.array[a]=p.x,f.array[a+1]=p.y,f.array[a+2]=p.z,f.array[a+3]=p.w,a+=4;w.bindBuffer(w.ARRAY_BUFFER,f.buffer),w.bufferData(w.ARRAY_BUFFER,f.array,t),f.needsUpdate=!1}}(t,w.DYNAMIC_DRAW),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,f.attributes&&Ie(f)}}function Ve(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function Ie(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}var je={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};function He(e,t,n,r){e.addEventListener("dispose",ye);var o=je[e.type];if(o){var a=Xt.ShaderLib[o];e.__webglShader={uniforms:Xt.UniformsUtils.clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};var s=function(e){for(var t=0,n=0,r=0,i=0,o=0,a=e.length;o<a;o++){var s=e[o];s.onlyShadow||!1===s.visible||(s instanceof Xt.DirectionalLight&&t++,s instanceof Xt.PointLight&&n++,s instanceof Xt.SpotLight&&r++,s instanceof Xt.HemisphereLight&&i++)}return{directional:t,point:n,spot:r,hemi:i}}(t),l=function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(i instanceof Xt.SpotLight&&t++,i instanceof Xt.DirectionalLight&&!i.shadowCascade&&t++)}return t}(t),u=function(e){if(ee&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=w.getParameter(w.MAX_VERTEX_UNIFORM_VECTORS),n=Math.floor((t-20)/4);return void 0!==e&&e instanceof Xt.SkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n))<e.skeleton.bones.length&&Xt.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)"),n}(r),c={precision:i,supportsVertexTextures:J,map:!!e.map,envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,combine:e.combine,vertexColors:e.vertexColors,fog:n,useFog:e.fog,fogExp:n instanceof Xt.FogExp2,flatShading:e.shading===Xt.FlatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:h,skinning:e.skinning,maxBones:u,useVertexTexture:ee&&r&&r.skeleton&&r.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:_.maxMorphTargets,maxMorphNormals:_.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:l,shadowMapEnabled:_.shadowMapEnabled&&r.receiveShadow&&0<l,shadowMapType:_.shadowMapType,shadowMapDebug:_.shadowMapDebug,shadowMapCascade:_.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===Xt.DoubleSide,flipSided:e.side===Xt.BackSide},p=[];if(o?p.push(o):(p.push(e.fragmentShader),p.push(e.vertexShader)),void 0!==e.defines)for(var f in e.defines)p.push(f),p.push(e.defines[f]);for(var f in c)p.push(f),p.push(c[f]);for(var d,m=p.join(),g=0,y=M.length;g<y;g++){var v=M[g];if(v.code===m){(d=v).usedTimes++;break}}void 0===d&&(d=new Xt.WebGLProgram(_,m,e,c),M.push(d),_.info.memory.programs=M.length);var b=(e.program=d).attributes;if(e.morphTargets)for(var x="morphTarget",S=e.numSupportedMorphTargets=0;S<_.maxMorphTargets;S++)0<=b[x+S]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(x="morphNormal",S=e.numSupportedMorphNormals=0;S<_.maxMorphNormals;S++)0<=b[x+S]&&e.numSupportedMorphNormals++;for(var E in e.uniformsList=[],e.__webglShader.uniforms){var T=e.program.uniforms[E];T&&e.uniformsList.push([e.__webglShader.uniforms[E],T])}}function We(e){!0===e.transparent?H.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):H.setBlending(Xt.NoBlending),H.setDepthTest(e.depthTest),H.setDepthWrite(e.depthWrite),H.setColorWrite(e.colorWrite),H.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function Ge(e,n,r,i,o){P=0,i.needsUpdate&&(i.program&&_e(i),He(i,n,r,o),i.needsUpdate=!1),i.morphTargets&&(o.__webglMorphTargetInfluences||(o.__webglMorphTargetInfluences=new Float32Array(_.maxMorphTargets)));var a,s,l,u,c,p,f,d,m,g,y,v,b=!1,x=!1,M=!1,E=i.program,C=E.uniforms,L=i.__webglShader.uniforms;if(E.id!==S&&(w.useProgram(E.program),S=E.id,M=x=b=!0),i.id!==T&&(-1===T&&(M=!0),T=i.id,x=!0),(b||e!==A)&&(w.uniformMatrix4fv(C.projectionMatrix,!1,e.projectionMatrix.elements),h&&w.uniform1f(C.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==A&&(A=e),(i instanceof Xt.ShaderMaterial||i instanceof Xt.MeshPhongMaterial||i.envMap)&&null!==C.cameraPosition&&(B.setFromMatrixPosition(e.matrixWorld),w.uniform3f(C.cameraPosition,B.x,B.y,B.z)),(i instanceof Xt.MeshPhongMaterial||i instanceof Xt.MeshLambertMaterial||i instanceof Xt.MeshBasicMaterial||i instanceof Xt.ShaderMaterial||i.skinning)&&null!==C.viewMatrix&&w.uniformMatrix4fv(C.viewMatrix,!1,e.matrixWorldInverse.elements)),i.skinning)if(o.bindMatrix&&null!==C.bindMatrix&&w.uniformMatrix4fv(C.bindMatrix,!1,o.bindMatrix.elements),o.bindMatrixInverse&&null!==C.bindMatrixInverse&&w.uniformMatrix4fv(C.bindMatrixInverse,!1,o.bindMatrixInverse.elements),ee&&o.skeleton&&o.skeleton.useVertexTexture){if(null!==C.boneTexture){var R=Ye();w.uniform1i(C.boneTexture,R),_.setTexture(o.skeleton.boneTexture,R)}null!==C.boneTextureWidth&&w.uniform1i(C.boneTextureWidth,o.skeleton.boneTextureWidth),null!==C.boneTextureHeight&&w.uniform1i(C.boneTextureHeight,o.skeleton.boneTextureHeight)}else o.skeleton&&o.skeleton.boneMatrices&&null!==C.boneGlobalMatrices&&w.uniformMatrix4fv(C.boneGlobalMatrices,!1,o.skeleton.boneMatrices);return x&&(r&&i.fog&&(g=r,(m=L).fogColor.value=g.color,g instanceof Xt.Fog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g instanceof Xt.FogExp2&&(m.fogDensity.value=g.density)),(i instanceof Xt.MeshPhongMaterial||i instanceof Xt.MeshLambertMaterial||i.lights)&&(V&&(M=!0,function(e){var t,n,r,i,o,a,s,l,u=0,c=0,h=0,p=I,f=p.directional.colors,d=p.directional.positions,m=p.point.colors,g=p.point.positions,y=p.point.distances,v=p.point.decays,b=p.spot.colors,x=p.spot.positions,w=p.spot.distances,_=p.spot.directions,M=p.spot.anglesCos,S=p.spot.exponents,E=p.spot.decays,T=p.hemi.skyColors,C=p.hemi.groundColors,A=p.hemi.positions,P=0,L=0,R=0,k=0,O=0,F=0,U=0,D=0,N=0,V=0,j=0,H=0;for(t=0,n=e.length;t<n;t++)if(!(r=e[t]).onlyShadow)if(i=r.color,s=r.intensity,l=r.distance,r instanceof Xt.AmbientLight){if(!r.visible)continue;u+=i.r,c+=i.g,h+=i.b}else if(r instanceof Xt.DirectionalLight){if(O+=1,!r.visible)continue;z.setFromMatrixPosition(r.matrixWorld),B.setFromMatrixPosition(r.target.matrixWorld),z.sub(B),z.normalize(),d[N=3*P]=z.x,d[N+1]=z.y,d[N+2]=z.z,Qe(f,N,i,s),P+=1}else if(r instanceof Xt.PointLight){if(F+=1,!r.visible)continue;Qe(m,V=3*L,i,s),B.setFromMatrixPosition(r.matrixWorld),g[V]=B.x,g[V+1]=B.y,g[V+2]=B.z,y[L]=l,v[L]=0===r.distance?0:r.decay,L+=1}else if(r instanceof Xt.SpotLight){if(U+=1,!r.visible)continue;Qe(b,j=3*R,i,s),z.setFromMatrixPosition(r.matrixWorld),x[j]=z.x,x[j+1]=z.y,x[j+2]=z.z,w[R]=l,B.setFromMatrixPosition(r.target.matrixWorld),z.sub(B),z.normalize(),_[j]=z.x,_[j+1]=z.y,_[j+2]=z.z,M[R]=Math.cos(r.angle),S[R]=r.exponent,E[R]=0===r.distance?0:r.decay,R+=1}else if(r instanceof Xt.HemisphereLight){if(D+=1,!r.visible)continue;z.setFromMatrixPosition(r.matrixWorld),z.normalize(),A[H=3*k]=z.x,A[H+1]=z.y,A[H+2]=z.z,o=r.color,a=r.groundColor,Qe(T,H,o,s),Qe(C,H,a,s),k+=1}for(t=3*P,n=Math.max(f.length,3*O);t<n;t++)f[t]=0;for(t=3*L,n=Math.max(m.length,3*F);t<n;t++)m[t]=0;for(t=3*R,n=Math.max(b.length,3*U);t<n;t++)b[t]=0;for(t=3*k,n=Math.max(T.length,3*D);t<n;t++)T[t]=0;for(t=3*k,n=Math.max(C.length,3*D);t<n;t++)C[t]=0;p.directional.length=P,p.point.length=L,p.spot.length=R,p.hemi.length=k,p.ambient[0]=u,p.ambient[1]=c,p.ambient[2]=h}(n),V=!1),M?(d=I,(f=L).ambientLightColor.value=d.ambient,f.directionalLightColor.value=d.directional.colors,f.directionalLightDirection.value=d.directional.positions,f.pointLightColor.value=d.point.colors,f.pointLightPosition.value=d.point.positions,f.pointLightDistance.value=d.point.distances,f.pointLightDecay.value=d.point.decays,f.spotLightColor.value=d.spot.colors,f.spotLightPosition.value=d.spot.positions,f.spotLightDistance.value=d.spot.distances,f.spotLightDirection.value=d.spot.directions,f.spotLightAngleCos.value=d.spot.anglesCos,f.spotLightExponent.value=d.spot.exponents,f.spotLightDecay.value=d.spot.decays,f.hemisphereLightSkyColor.value=d.hemi.skyColors,f.hemisphereLightGroundColor.value=d.hemi.groundColors,f.hemisphereLightDirection.value=d.hemi.positions,qe(L,!0)):qe(L,!1)),(i instanceof Xt.MeshBasicMaterial||i instanceof Xt.MeshLambertMaterial||i instanceof Xt.MeshPhongMaterial)&&function(e,t){var n;if(e.opacity.value=t.opacity,e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.map?n=t.map:t.specularMap?n=t.specularMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.alphaMap&&(n=t.alphaMap),void 0!==n){var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof Xt.WebGLRenderTargetCube?1:-1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(L,i),i instanceof Xt.LineBasicMaterial?Xe(L,i):i instanceof Xt.LineDashedMaterial?(Xe(L,i),p=i,(c=L).dashSize.value=p.dashSize,c.totalSize.value=p.dashSize+p.gapSize,c.scale.value=p.scale):i instanceof Xt.PointCloudMaterial?function(e,n){if(e.psColor.value=n.color,e.opacity.value=n.opacity,e.size.value=n.size,e.scale.value=t.height/2,e.map.value=n.map,null!==n.map){var r=n.map.offset,i=n.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}(L,i):i instanceof Xt.MeshPhongMaterial?(u=i,(l=L).shininess.value=u.shininess,l.emissive.value=u.emissive,l.specular.value=u.specular,u.wrapAround&&l.wrapRGB.value.copy(u.wrapRGB)):i instanceof Xt.MeshLambertMaterial?(s=i,(a=L).emissive.value=s.emissive,s.wrapAround&&a.wrapRGB.value.copy(s.wrapRGB)):i instanceof Xt.MeshDepthMaterial?(L.mNear.value=e.near,L.mFar.value=e.far,L.opacity.value=i.opacity):i instanceof Xt.MeshNormalMaterial&&(L.opacity.value=i.opacity),o.receiveShadow&&!i._shadowPass&&function(e,t){if(e.shadowMatrix)for(var n=0,r=0,i=t.length;r<i;r++){var o=t[r];o.castShadow&&(o instanceof Xt.SpotLight||o instanceof Xt.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[n]=o.shadowMap,e.shadowMapSize.value[n]=o.shadowMapSize,e.shadowMatrix.value[n]=o.shadowMatrix,e.shadowDarkness.value[n]=o.shadowDarkness,e.shadowBias.value[n]=o.shadowBias,n++)}}(L,n),function(e){for(var t,n,r,i=0,o=e.length;i<o;i++){var a=e[i][0];if(!1!==a.needsUpdate){var s=a.type,l=a.value,u=e[i][1];switch(s){case"1i":w.uniform1i(u,l);break;case"1f":w.uniform1f(u,l);break;case"2f":w.uniform2f(u,l[0],l[1]);break;case"3f":w.uniform3f(u,l[0],l[1],l[2]);break;case"4f":w.uniform4f(u,l[0],l[1],l[2],l[3]);break;case"1iv":w.uniform1iv(u,l);break;case"3iv":w.uniform3iv(u,l);break;case"1fv":w.uniform1fv(u,l);break;case"2fv":w.uniform2fv(u,l);break;case"3fv":w.uniform3fv(u,l);break;case"4fv":w.uniform4fv(u,l);break;case"Matrix3fv":w.uniformMatrix3fv(u,!1,l);break;case"Matrix4fv":w.uniformMatrix4fv(u,!1,l);break;case"i":w.uniform1i(u,l);break;case"f":w.uniform1f(u,l);break;case"v2":w.uniform2f(u,l.x,l.y);break;case"v3":w.uniform3f(u,l.x,l.y,l.z);break;case"v4":w.uniform4f(u,l.x,l.y,l.z,l.w);break;case"c":w.uniform3f(u,l.r,l.g,l.b);break;case"iv1":w.uniform1iv(u,l);break;case"iv":w.uniform3iv(u,l);break;case"fv1":w.uniform1fv(u,l);break;case"fv":w.uniform3fv(u,l);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*l.length));for(var c=0,h=l.length;c<h;c++)r=2*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y;w.uniform2fv(u,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*l.length));for(c=0,h=l.length;c<h;c++)r=3*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y,a._array[r+2]=l[c].z;w.uniform3fv(u,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*l.length));for(c=0,h=l.length;c<h;c++)r=4*c,a._array[r]=l[c].x,a._array[r+1]=l[c].y,a._array[r+2]=l[c].z,a._array[r+3]=l[c].w;w.uniform4fv(u,a._array);break;case"m3":w.uniformMatrix3fv(u,!1,l.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*l.length));for(c=0,h=l.length;c<h;c++)l[c].flattenToArrayOffset(a._array,9*c);w.uniformMatrix3fv(u,!1,a._array);break;case"m4":w.uniformMatrix4fv(u,!1,l.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*l.length));for(c=0,h=l.length;c<h;c++)l[c].flattenToArrayOffset(a._array,16*c);w.uniformMatrix4fv(u,!1,a._array);break;case"t":if(t=l,n=Ye(),w.uniform1i(u,n),!t)continue;t instanceof Xt.CubeTexture||t.image instanceof Array&&6===t.image.length?Je(t,n):t instanceof Xt.WebGLRenderTargetCube?et(t,n):_.setTexture(t,n);break;case"tv":void 0===a._array&&(a._array=[]);for(c=0,h=a.value.length;c<h;c++)a._array[c]=Ye();w.uniform1iv(u,a._array);for(c=0,h=a.value.length;c<h;c++)t=a.value[c],n=a._array[c],t&&_.setTexture(t,n);break;default:Xt.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}(i.uniformsList)),y=C,v=o,w.uniformMatrix4fv(y.modelViewMatrix,!1,v._modelViewMatrix.elements),y.normalMatrix&&w.uniformMatrix3fv(y.normalMatrix,!1,v._normalMatrix.elements),null!==C.modelMatrix&&w.uniformMatrix4fv(C.modelMatrix,!1,o.matrixWorld.elements),E}function Xe(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function qe(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.pointLightDecay.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.spotLightDecay.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function Ye(){var e=P;return K<=e&&Xt.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+K),P+=1,e}function Ke(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function Qe(e,t,n,r){e[t]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function Ze(e,t,n){var r;n?(w.texParameteri(e,w.TEXTURE_WRAP_S,it(t.wrapS)),w.texParameteri(e,w.TEXTURE_WRAP_T,it(t.wrapT)),w.texParameteri(e,w.TEXTURE_MAG_FILTER,it(t.magFilter)),w.texParameteri(e,w.TEXTURE_MIN_FILTER,it(t.minFilter))):(w.texParameteri(e,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(e,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),t.wrapS===Xt.ClampToEdgeWrapping&&t.wrapT===Xt.ClampToEdgeWrapping||Xt.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+t.sourceFile+" )"),w.texParameteri(e,w.TEXTURE_MAG_FILTER,rt(t.magFilter)),w.texParameteri(e,w.TEXTURE_MIN_FILTER,rt(t.minFilter)),t.minFilter!==Xt.NearestFilter&&t.minFilter!==Xt.LinearFilter&&Xt.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+t.sourceFile+" )")),(r=W.get("EXT_texture_filter_anisotropic"))&&t.type!==Xt.FloatType&&t.type!==Xt.HalfFloatType&&(1<t.anisotropy||t.__currentAnisotropy)&&(w.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,_.getMaxAnisotropy())),t.__currentAnisotropy=t.anisotropy)}function $e(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),Xt.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function Je(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",me),e.image.__webglTextureCube=w.createTexture(),_.info.memory.textures++),w.activeTexture(w.TEXTURE0+t),w.bindTexture(w.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var n=e instanceof Xt.CompressedTexture,r=e.image[0]instanceof Xt.DataTexture,i=[],o=0;o<6;o++)!_.autoScaleCubemaps||n||r?i[o]=r?e.image[o].image:e.image[o]:i[o]=$e(e.image[o],$);var a=i[0],s=Xt.Math.isPowerOfTwo(a.width)&&Xt.Math.isPowerOfTwo(a.height),l=it(e.format),u=it(e.type);for(Ze(w.TEXTURE_CUBE_MAP,e,s),o=0;o<6;o++)if(n)for(var c,h=i[o].mipmaps,p=0,f=h.length;p<f;p++)c=h[p],e.format!==Xt.RGBAFormat&&e.format!==Xt.RGBFormat?-1<oe().indexOf(l)?w.compressedTexImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,l,c.width,c.height,0,c.data):Xt.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):w.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,l,c.width,c.height,0,l,u,c.data);else r?w.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,i[o].width,i[o].height,0,l,u,i[o].data):w.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,u,i[o]);e.generateMipmaps&&s&&w.generateMipmap(w.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else w.activeTexture(w.TEXTURE0+t),w.bindTexture(w.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function et(e,t){w.activeTexture(w.TEXTURE0+t),w.bindTexture(w.TEXTURE_CUBE_MAP,e.__webglTexture)}function tt(e,t,n){w.bindFramebuffer(w.FRAMEBUFFER,e),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,n,t.__webglTexture,0)}function nt(e,t){w.bindRenderbuffer(w.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,t.width,t.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,t.width,t.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,e)):w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,t.width,t.height)}function rt(e){return e===Xt.NearestFilter||e===Xt.NearestMipMapNearestFilter||e===Xt.NearestMipMapLinearFilter?w.NEAREST:w.LINEAR}function it(e){var t;if(e===Xt.RepeatWrapping)return w.REPEAT;if(e===Xt.ClampToEdgeWrapping)return w.CLAMP_TO_EDGE;if(e===Xt.MirroredRepeatWrapping)return w.MIRRORED_REPEAT;if(e===Xt.NearestFilter)return w.NEAREST;if(e===Xt.NearestMipMapNearestFilter)return w.NEAREST_MIPMAP_NEAREST;if(e===Xt.NearestMipMapLinearFilter)return w.NEAREST_MIPMAP_LINEAR;if(e===Xt.LinearFilter)return w.LINEAR;if(e===Xt.LinearMipMapNearestFilter)return w.LINEAR_MIPMAP_NEAREST;if(e===Xt.LinearMipMapLinearFilter)return w.LINEAR_MIPMAP_LINEAR;if(e===Xt.UnsignedByteType)return w.UNSIGNED_BYTE;if(e===Xt.UnsignedShort4444Type)return w.UNSIGNED_SHORT_4_4_4_4;if(e===Xt.UnsignedShort5551Type)return w.UNSIGNED_SHORT_5_5_5_1;if(e===Xt.UnsignedShort565Type)return w.UNSIGNED_SHORT_5_6_5;if(e===Xt.ByteType)return w.BYTE;if(e===Xt.ShortType)return w.SHORT;if(e===Xt.UnsignedShortType)return w.UNSIGNED_SHORT;if(e===Xt.IntType)return w.INT;if(e===Xt.UnsignedIntType)return w.UNSIGNED_INT;if(e===Xt.FloatType)return w.FLOAT;if(null!==(t=W.get("OES_texture_half_float"))&&e===Xt.HalfFloatType)return t.HALF_FLOAT_OES;if(e===Xt.AlphaFormat)return w.ALPHA;if(e===Xt.RGBFormat)return w.RGB;if(e===Xt.RGBAFormat)return w.RGBA;if(e===Xt.LuminanceFormat)return w.LUMINANCE;if(e===Xt.LuminanceAlphaFormat)return w.LUMINANCE_ALPHA;if(e===Xt.AddEquation)return w.FUNC_ADD;if(e===Xt.SubtractEquation)return w.FUNC_SUBTRACT;if(e===Xt.ReverseSubtractEquation)return w.FUNC_REVERSE_SUBTRACT;if(e===Xt.ZeroFactor)return w.ZERO;if(e===Xt.OneFactor)return w.ONE;if(e===Xt.SrcColorFactor)return w.SRC_COLOR;if(e===Xt.OneMinusSrcColorFactor)return w.ONE_MINUS_SRC_COLOR;if(e===Xt.SrcAlphaFactor)return w.SRC_ALPHA;if(e===Xt.OneMinusSrcAlphaFactor)return w.ONE_MINUS_SRC_ALPHA;if(e===Xt.DstAlphaFactor)return w.DST_ALPHA;if(e===Xt.OneMinusDstAlphaFactor)return w.ONE_MINUS_DST_ALPHA;if(e===Xt.DstColorFactor)return w.DST_COLOR;if(e===Xt.OneMinusDstColorFactor)return w.ONE_MINUS_DST_COLOR;if(e===Xt.SrcAlphaSaturateFactor)return w.SRC_ALPHA_SATURATE;if(null!==(t=W.get("WEBGL_compressed_texture_s3tc"))){if(e===Xt.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Xt.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Xt.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Xt.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(null!==(t=W.get("WEBGL_compressed_texture_pvrtc"))){if(e===Xt.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Xt.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Xt.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Xt.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(null!==(t=W.get("EXT_blend_minmax"))){if(e===Xt.MinEquation)return t.MIN_EXT;if(e===Xt.MaxEquation)return t.MAX_EXT}return 0}this.setFaceCulling=function(e,t){e===Xt.CullFaceNone?w.disable(w.CULL_FACE):(t===Xt.FrontFaceDirectionCW?w.frontFace(w.CW):w.frontFace(w.CCW),e===Xt.CullFaceBack?w.cullFace(w.BACK):e===Xt.CullFaceFront?w.cullFace(w.FRONT):w.cullFace(w.FRONT_AND_BACK),w.enable(w.CULL_FACE))},this.setMaterialFaces=function(e){H.setDoubleSided(e.side===Xt.DoubleSide),H.setFlipSided(e.side===Xt.BackSide)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",me),e.__webglTexture=w.createTexture(),_.info.memory.textures++),w.bindTexture(w.TEXTURE_2D,e.__webglTexture),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,e.flipY),w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),w.pixelStorei(w.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=$e(e.image,Z);var t=e.image,n=Xt.Math.isPowerOfTwo(t.width)&&Xt.Math.isPowerOfTwo(t.height),r=it(e.format),i=it(e.type);Ze(w.TEXTURE_2D,e,n);var o,a=e.mipmaps;if(e instanceof Xt.DataTexture)if(0<a.length&&n){for(var s=0,l=a.length;s<l;s++)o=a[s],w.texImage2D(w.TEXTURE_2D,s,r,o.width,o.height,0,r,i,o.data);e.generateMipmaps=!1}else w.texImage2D(w.TEXTURE_2D,0,r,t.width,t.height,0,r,i,t.data);else if(e instanceof Xt.CompressedTexture)for(s=0,l=a.length;s<l;s++)o=a[s],e.format!==Xt.RGBAFormat&&e.format!==Xt.RGBFormat?-1<oe().indexOf(r)?w.compressedTexImage2D(w.TEXTURE_2D,s,r,o.width,o.height,0,o.data):Xt.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w.texImage2D(w.TEXTURE_2D,s,r,o.width,o.height,0,r,i,o.data);else if(0<a.length&&n){for(s=0,l=a.length;s<l;s++)o=a[s],w.texImage2D(w.TEXTURE_2D,s,r,r,i,o);e.generateMipmaps=!1}else w.texImage2D(w.TEXTURE_2D,0,r,r,i,e.image);e.generateMipmaps&&n&&w.generateMipmap(w.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){w.activeTexture(w.TEXTURE0+t),e.needsUpdate?_.uploadTexture(e):w.bindTexture(w.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t,n,r,i,o,a=e instanceof Xt.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",ge),e.__webglTexture=w.createTexture(),_.info.memory.textures++;var s=Xt.Math.isPowerOfTwo(e.width)&&Xt.Math.isPowerOfTwo(e.height),l=it(e.format),u=it(e.type);if(a){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],w.bindTexture(w.TEXTURE_CUBE_MAP,e.__webglTexture),Ze(w.TEXTURE_CUBE_MAP,e,s);for(var c=0;c<6;c++)e.__webglFramebuffer[c]=w.createFramebuffer(),e.__webglRenderbuffer[c]=w.createRenderbuffer(),w.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,l,e.width,e.height,0,l,u,null),tt(e.__webglFramebuffer[c],e,w.TEXTURE_CUBE_MAP_POSITIVE_X+c),nt(e.__webglRenderbuffer[c],e);s&&w.generateMipmap(w.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=w.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=w.createRenderbuffer(),w.bindTexture(w.TEXTURE_2D,e.__webglTexture),Ze(w.TEXTURE_2D,e,s),w.texImage2D(w.TEXTURE_2D,0,l,e.width,e.height,0,l,u,null),tt(e.__webglFramebuffer,e,w.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,e.__webglRenderbuffer):nt(e.__webglRenderbuffer,e),s&&w.generateMipmap(w.TEXTURE_2D);a?w.bindTexture(w.TEXTURE_CUBE_MAP,null):w.bindTexture(w.TEXTURE_2D,null),w.bindRenderbuffer(w.RENDERBUFFER,null),w.bindFramebuffer(w.FRAMEBUFFER,null)}o=e?(t=a?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,n=e.width,r=e.height,i=0):(t=null,n=k,r=O,i=L,R),t!==E&&(w.bindFramebuffer(w.FRAMEBUFFER,t),w.viewport(i,o,n,r),E=t),F=n,U=r},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e instanceof Xt.WebGLRenderTarget){if(e.__webglFramebuffer){if(e.format!==Xt.RGBAFormat)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");var a=!1;e.__webglFramebuffer!==E&&(w.bindFramebuffer(w.FRAMEBUFFER,e.__webglFramebuffer),a=!0),w.checkFramebufferStatus(w.FRAMEBUFFER)===w.FRAMEBUFFER_COMPLETE?w.readPixels(t,n,r,i,w.RGBA,w.UNSIGNED_BYTE,o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),a&&w.bindFramebuffer(w.FRAMEBUFFER,E)}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.initMaterial=function(){Xt.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){Xt.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){Xt.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){Xt.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},Xt.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:Xt.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:Xt.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:Xt.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:Xt.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new Xt.Vector2(0,0),this.repeat=new Xt.Vector2(1,1),this.format=void 0!==n.format?n.format:Xt.RGBAFormat,this.type=void 0!==n.type?n.type:Xt.UnsignedByteType,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=void 0!==n.shareDepthFrom?n.shareDepthFrom:null},Xt.WebGLRenderTarget.prototype={constructor:Xt.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new Xt.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},Xt.EventDispatcher.prototype.apply(Xt.WebGLRenderTarget.prototype),Xt.WebGLRenderTargetCube=function(e,t,n){Xt.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},Xt.WebGLRenderTargetCube.prototype=Object.create(Xt.WebGLRenderTarget.prototype),Xt.WebGLRenderTargetCube.prototype.constructor=Xt.WebGLRenderTargetCube,Xt.WebGLExtensions=function(e){var t={};this.get=function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&Xt.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r}},Xt.WebGLProgram=(st=0,function(e,t,n,r){var i=e,o=i.context,a=n.defines,s=n.__webglShader.uniforms,l=n.attributes,u=n.__webglShader.vertexShader,c=n.__webglShader.fragmentShader,h=n.index0AttributeName;void 0===h&&!0===r.morphTargets&&(h="position");var p="SHADOWMAP_TYPE_BASIC";r.shadowMapType===Xt.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":r.shadowMapType===Xt.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case Xt.CubeReflectionMapping:case Xt.CubeRefractionMapping:f="ENVMAP_TYPE_CUBE";break;case Xt.EquirectangularReflectionMapping:case Xt.EquirectangularRefractionMapping:f="ENVMAP_TYPE_EQUIREC";break;case Xt.SphericalReflectionMapping:f="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case Xt.CubeRefractionMapping:case Xt.EquirectangularRefractionMapping:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case Xt.MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case Xt.MixOperation:m="ENVMAP_BLENDING_MIX";break;case Xt.AddOperation:m="ENVMAP_BLENDING_ADD"}}var g,y,v=0<e.gammaFactor?e.gammaFactor:1,b=function(e){var t,n,r=[];for(var i in e)!1!==(t=e[i])&&(n="#define "+i+" "+t,r.push(n));return r.join("\n")}(a),x=o.createProgram();y=n instanceof Xt.RawShaderMaterial?g="":(g=["precision "+r.precision+" float;","precision "+r.precision+" int;",b,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,"#define MAX_DIR_LIGHTS "+r.maxDirLights,"#define MAX_POINT_LIGHTS "+r.maxPointLights,"#define MAX_SPOT_LIGHTS "+r.maxSpotLights,"#define MAX_HEMI_LIGHTS "+r.maxHemiLights,"#define MAX_SHADOWS "+r.maxShadows,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals?"#define USE_MORPHNORMALS":"",r.wrapAround?"#define WRAP_AROUND":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+p:"",r.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",r.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif",""].join("\n"),["precision "+r.precision+" float;","precision "+r.precision+" int;",r.bumpMap||r.normalMap||r.flatShading?"#extension GL_OES_standard_derivatives : enable":"",b,"#define MAX_DIR_LIGHTS "+r.maxDirLights,"#define MAX_POINT_LIGHTS "+r.maxPointLights,"#define MAX_SPOT_LIGHTS "+r.maxSpotLights,"#define MAX_HEMI_LIGHTS "+r.maxHemiLights,"#define MAX_SHADOWS "+r.maxShadows,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+v,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.envMap?"#define "+d:"",r.envMap?"#define "+m:"",r.lightMap?"#define USE_LIGHTMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.metal?"#define METAL":"",r.wrapAround?"#define WRAP_AROUND":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+p:"",r.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",r.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var w=new Xt.WebGLShader(o,o.VERTEX_SHADER,g+u),_=new Xt.WebGLShader(o,o.FRAGMENT_SHADER,y+c);o.attachShader(x,w),o.attachShader(x,_),void 0!==h&&o.bindAttribLocation(x,0,h),o.linkProgram(x);var M=o.getProgramInfoLog(x);!1===o.getProgramParameter(x,o.LINK_STATUS)&&Xt.error("THREE.WebGLProgram: shader error: "+o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(x,o.VALIDATE_STATUS),"gl.getPRogramInfoLog",M),""!==M&&Xt.warn("THREE.WebGLProgram: gl.getProgramInfoLog()"+M),o.deleteShader(w),o.deleteShader(_);var S=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];for(var E in r.useVertexTexture?(S.push("boneTexture"),S.push("boneTextureWidth"),S.push("boneTextureHeight")):S.push("boneGlobalMatrices"),r.logarithmicDepthBuffer&&S.push("logDepthBufFC"),s)S.push(E);this.uniforms=function(e,t,n){for(var r={},i=0,o=n.length;i<o;i++){var a=n[i];r[a]=e.getUniformLocation(t,a)}return r}(o,x,S),S=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var T=0;T<r.maxMorphTargets;T++)S.push("morphTarget"+T);for(T=0;T<r.maxMorphNormals;T++)S.push("morphNormal"+T);for(var C in l)S.push(C);return this.attributes=function(e,t,n){for(var r={},i=0,o=n.length;i<o;i++){var a=n[i];r[a]=e.getAttribLocation(t,a)}return r}(o,x,S),this.attributesKeys=Object.keys(this.attributes),this.id=st++,this.code=t,this.usedTimes=1,this.program=x,this.vertexShader=w,this.fragmentShader=_,this}),Xt.WebGLShader=function(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&Xt.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&Xt.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r},Xt.WebGLState=function(e,t){var n=new Uint8Array(16),r=new Uint8Array(16),i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null,p=null,f=null,d=null,m=null,g=null,y=null,v=null,b=null;this.initAttributes=function(){for(var e=0,t=n.length;e<t;e++)n[e]=0},this.enableAttribute=function(t){n[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1)},this.disableUnusedAttributes=function(){for(var t=0,i=r.length;t<i;t++)r[t]!==n[t]&&(e.disableVertexAttribArray(t),r[t]=0)},this.setBlending=function(n,r,h,p,f,d,m){n!==i&&(n===Xt.NoBlending?e.disable(e.BLEND):n===Xt.AdditiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):n===Xt.SubtractiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):n===Xt.MultiplyBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):n===Xt.CustomBlending?e.enable(e.BLEND):(e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),i=n),n===Xt.CustomBlending?(f=f||r,d=d||h,m=m||p,r===o&&f===l||(e.blendEquationSeparate(t(r),t(f)),o=r,l=f),h===a&&p===s&&d===u&&m===c||(e.blendFuncSeparate(t(h),t(p),t(d),t(m)),a=h,s=p,u=d,c=m)):c=u=l=s=a=o=null},this.setDepthTest=function(t){h!==t&&(t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),h=t)},this.setDepthWrite=function(t){p!==t&&(e.depthMask(t),p=t)},this.setColorWrite=function(t){f!==t&&(e.colorMask(t,t,t,t),f=t)},this.setDoubleSided=function(t){d!==t&&(t?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),d=t)},this.setFlipSided=function(t){m!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),m=t)},this.setLineWidth=function(t){t!==g&&(e.lineWidth(t),g=t)},this.setPolygonOffset=function(t,n,r){y!==t&&(t?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL),y=t),!t||v===n&&b===r||(e.polygonOffset(n,r),v=n,b=r)},this.reset=function(){for(var e=0;e<r.length;e++)r[e]=0;m=d=f=p=h=i=null}},Xt.LensFlarePlugin=function(e,t){var n,r,i,o,a,s,l,u,c=e.context;this.render=function(h,p,f,d){if(0!==t.length){var m=new Xt.Vector3,g=d/f,y=.5*f,v=.5*d,b=16/d,x=new Xt.Vector2(b*g,b),w=new Xt.Vector3(1,1,0),_=new Xt.Vector2(1,1);void 0===i&&function(){var t,h,p,f,d,m=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),g=new Uint16Array([0,1,2,0,2,3]);n=c.createBuffer(),r=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,m,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW),l=c.createTexture(),u=c.createTexture(),c.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),t=(s=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},h=c.createProgram(),p=c.createShader(c.FRAGMENT_SHADER),f=c.createShader(c.VERTEX_SHADER),d="precision "+e.getPrecision()+" float;\n",c.shaderSource(p,d+t.fragmentShader),c.shaderSource(f,d+t.vertexShader),c.compileShader(p),c.compileShader(f),c.attachShader(h,p),c.attachShader(h,f),c.linkProgram(h),i=h,o={vertex:c.getAttribLocation(i,"position"),uv:c.getAttribLocation(i,"uv")},a={renderType:c.getUniformLocation(i,"renderType"),map:c.getUniformLocation(i,"map"),occlusionMap:c.getUniformLocation(i,"occlusionMap"),opacity:c.getUniformLocation(i,"opacity"),color:c.getUniformLocation(i,"color"),scale:c.getUniformLocation(i,"scale"),rotation:c.getUniformLocation(i,"rotation"),screenPosition:c.getUniformLocation(i,"screenPosition")}}(),c.useProgram(i),c.enableVertexAttribArray(o.vertex),c.enableVertexAttribArray(o.uv),c.uniform1i(a.occlusionMap,0),c.uniform1i(a.map,1),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(o.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(o.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.disable(c.CULL_FACE),c.depthMask(!1);for(var M=0,S=t.length;M<S;M++){b=16/d,x.set(b*g,b);var E=t[M];if(m.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]),m.applyMatrix4(p.matrixWorldInverse),m.applyProjection(p.projectionMatrix),w.copy(m),_.x=w.x*y+y,_.y=w.y*v+v,s||0<_.x&&_.x<f&&0<_.y&&_.y<d){c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,l),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,_.x-8,_.y-8,16,16,0),c.uniform1i(a.renderType,0),c.uniform2f(a.scale,x.x,x.y),c.uniform3f(a.screenPosition,w.x,w.y,w.z),c.disable(c.BLEND),c.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,_.x-8,_.y-8,16,16,0),c.uniform1i(a.renderType,1),c.disable(c.DEPTH_TEST),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,l),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),E.positionScreen.copy(w),E.customUpdateCallback?E.customUpdateCallback(E):E.updateLensFlares(),c.uniform1i(a.renderType,2),c.enable(c.BLEND);for(var T=0,C=E.lensFlares.length;T<C;T++){var A=E.lensFlares[T];.001<A.opacity&&.001<A.scale&&(w.x=A.x,w.y=A.y,w.z=A.z,b=A.size*A.scale/d,x.x=b*g,x.y=b,c.uniform3f(a.screenPosition,w.x,w.y,w.z),c.uniform2f(a.scale,x.x,x.y),c.uniform1f(a.rotation,A.rotation),c.uniform1f(a.opacity,A.opacity),c.uniform3f(a.color,A.color.r,A.color.g,A.color.b),e.state.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),e.setTexture(A.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}c.enable(c.CULL_FACE),c.enable(c.DEPTH_TEST),c.depthMask(!0),e.resetGLState()}}},Xt.ShadowMapPlugin=function(e,t,n,r){var i,o,a,s,l=e.context,u=new Xt.Frustum,c=new Xt.Matrix4,h=new Xt.Vector3,p=new Xt.Vector3,f=new Xt.Vector3,d=[],m=Xt.ShaderLib.depthRGBA,g=Xt.UniformsUtils.clone(m.uniforms);function y(e,t,r){if(t.visible){var i=n[t.id];if(i&&t.castShadow&&(!1===t.frustumCulled||!0===u.intersectsObject(t)))for(var o=0,a=i.length;o<a;o++){var s=i[o];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),d.push(s)}for(o=0,a=t.children.length;o<a;o++)y(e,t.children[o],r)}}function v(e,t){var n=new Xt.DirectionalLight;n.isVirtual=!0,n.onlyShadow=!0,n.castShadow=!0,n.shadowCameraNear=e.shadowCameraNear,n.shadowCameraFar=e.shadowCameraFar,n.shadowCameraLeft=e.shadowCameraLeft,n.shadowCameraRight=e.shadowCameraRight,n.shadowCameraBottom=e.shadowCameraBottom,n.shadowCameraTop=e.shadowCameraTop,n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t],n.shadowMapWidth=e.shadowCascadeWidth[t],n.shadowMapHeight=e.shadowCascadeHeight[t],n.pointsWorld=[],n.pointsFrustum=[];for(var r=n.pointsWorld,i=n.pointsFrustum,o=0;o<8;o++)r[o]=new Xt.Vector3,i[o]=new Xt.Vector3;var a=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return i[0].set(-1,-1,a),i[1].set(1,-1,a),i[2].set(-1,1,a),i[3].set(1,1,a),i[4].set(-1,-1,s),i[5].set(1,-1,s),i[6].set(-1,1,s),i[7].set(1,1,s),n}function b(e,t){var n=e.shadowCascadeArray[t];n.position.copy(e.position),n.target.position.copy(e.target.position),n.lookAt(n.target),n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t],i=e.shadowCascadeFarZ[t],o=n.pointsFrustum;o[0].z=r,o[1].z=r,o[2].z=r,o[3].z=r,o[4].z=i,o[5].z=i,o[6].z=i,o[7].z=i}function x(e,t){var n=t.shadowCamera,r=t.pointsFrustum,i=t.pointsWorld;h.set(1/0,1/0,1/0),p.set(-1/0,-1/0,-1/0);for(var o=0;o<8;o++){var a=i[o];a.copy(r[o]),a.unproject(e),a.applyMatrix4(n.matrixWorldInverse),a.x<h.x&&(h.x=a.x),a.x>p.x&&(p.x=a.x),a.y<h.y&&(h.y=a.y),a.y>p.y&&(p.y=a.y),a.z<h.z&&(h.z=a.z),a.z>p.z&&(p.z=a.z)}n.left=h.x,n.right=p.x,n.top=p.y,n.bottom=h.y,n.updateProjectionMatrix()}i=new Xt.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}),o=new Xt.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0}),a=new Xt.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,skinning:!0}),s=new Xt.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0,skinning:!0}),i._shadowPass=!0,o._shadowPass=!0,a._shadowPass=!0,s._shadowPass=!0,this.render=function(n,h){if(!1!==e.shadowMapEnabled){var p,m,g,w,_,M,S,E,T,C,A,P,L,R,k=[],O=0;for(l.clearColor(1,1,1,1),l.disable(l.BLEND),l.enable(l.CULL_FACE),l.frontFace(l.CCW),e.shadowMapCullFace===Xt.CullFaceFront?l.cullFace(l.FRONT):l.cullFace(l.BACK),e.state.setDepthTest(!0),p=0,m=t.length;p<m;p++)if((L=t[p]).castShadow)if(L instanceof Xt.DirectionalLight&&L.shadowCascade)for(_=0;_<L.shadowCascadeCount;_++){var F;if(L.shadowCascadeArray[_])F=L.shadowCascadeArray[_];else{(F=v(L,_)).originalCamera=h;var U=new Xt.Gyroscope;U.position.copy(L.shadowCascadeOffset),U.add(F),U.add(F.target),h.add(U),L.shadowCascadeArray[_]=F}b(L,_),k[O]=F,O++}else k[O]=L,O++;for(p=0,m=k.length;p<m;p++){if(!(L=k[p]).shadowMap){var D=Xt.LinearFilter;e.shadowMapType===Xt.PCFSoftShadowMap&&(D=Xt.NearestFilter);var N={minFilter:D,magFilter:D,format:Xt.RGBAFormat};L.shadowMap=new Xt.WebGLRenderTarget(L.shadowMapWidth,L.shadowMapHeight,N),L.shadowMapSize=new Xt.Vector2(L.shadowMapWidth,L.shadowMapHeight),L.shadowMatrix=new Xt.Matrix4}if(!L.shadowCamera){if(L instanceof Xt.SpotLight)L.shadowCamera=new Xt.PerspectiveCamera(L.shadowCameraFov,L.shadowMapWidth/L.shadowMapHeight,L.shadowCameraNear,L.shadowCameraFar);else{if(!(L instanceof Xt.DirectionalLight)){Xt.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",L);continue}L.shadowCamera=new Xt.OrthographicCamera(L.shadowCameraLeft,L.shadowCameraRight,L.shadowCameraTop,L.shadowCameraBottom,L.shadowCameraNear,L.shadowCameraFar)}n.add(L.shadowCamera),!0===n.autoUpdate&&n.updateMatrixWorld()}var B,z,V;for(L.shadowCameraVisible&&!L.cameraHelper&&(L.cameraHelper=new Xt.CameraHelper(L.shadowCamera),n.add(L.cameraHelper)),L.isVirtual&&F.originalCamera==h&&x(h,L),M=L.shadowMap,S=L.shadowMatrix,(E=L.shadowCamera).position.setFromMatrixPosition(L.matrixWorld),f.setFromMatrixPosition(L.target.matrixWorld),E.lookAt(f),E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld),L.cameraHelper&&(L.cameraHelper.visible=L.shadowCameraVisible),L.shadowCameraVisible&&L.cameraHelper.update(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(E.projectionMatrix),S.multiply(E.matrixWorldInverse),c.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),u.setFromMatrix(c),e.setRenderTarget(M),e.clear(),d.length=0,y(n,n,E),g=0,w=d.length;g<w;g++)P=(A=d[g]).object,T=A.buffer,B=(R=P).material instanceof Xt.MeshFaceMaterial?R.material.materials[0]:R.material,z=void 0!==P.geometry.morphTargets&&0<P.geometry.morphTargets.length&&B.morphTargets,V=P instanceof Xt.SkinnedMesh&&B.skinning,C=P.customDepthMaterial?P.customDepthMaterial:V?z?s:a:z?o:i,e.setMaterialFaces(B),T instanceof Xt.BufferGeometry?e.renderBufferDirect(E,t,null,C,T,P):e.renderBuffer(E,t,null,C,T,P);for(g=0,w=r.length;g<w;g++)(P=(A=r[g]).object).visible&&P.castShadow&&(P._modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,P.matrixWorld),e.renderImmediateObject(E,t,null,i,P))}var I=e.getClearColor(),j=e.getClearAlpha();l.clearColor(I.r,I.g,I.b,j),l.enable(l.BLEND),e.shadowMapCullFace===Xt.CullFaceFront&&l.cullFace(l.BACK),e.resetGLState()}}},Xt.SpritePlugin=function(e,t){var n,r,i,o,a,s,l=e.context,u=new Xt.Vector3,c=new Xt.Quaternion,h=new Xt.Vector3;function p(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(f,d){if(0!==t.length){void 0===i&&function(){var t,u,c,h=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),p=new Uint16Array([0,1,2,0,2,3]);n=l.createBuffer(),r=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,n),l.bufferData(l.ARRAY_BUFFER,h,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),l.bufferData(l.ELEMENT_ARRAY_BUFFER,p,l.STATIC_DRAW),t=l.createProgram(),u=l.createShader(l.VERTEX_SHADER),c=l.createShader(l.FRAGMENT_SHADER),l.shaderSource(u,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),l.shaderSource(c,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),l.compileShader(u),l.compileShader(c),l.attachShader(t,u),l.attachShader(t,c),l.linkProgram(t),i=t,o={position:l.getAttribLocation(i,"position"),uv:l.getAttribLocation(i,"uv")},a={uvOffset:l.getUniformLocation(i,"uvOffset"),uvScale:l.getUniformLocation(i,"uvScale"),rotation:l.getUniformLocation(i,"rotation"),scale:l.getUniformLocation(i,"scale"),color:l.getUniformLocation(i,"color"),map:l.getUniformLocation(i,"map"),opacity:l.getUniformLocation(i,"opacity"),modelViewMatrix:l.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:l.getUniformLocation(i,"projectionMatrix"),fogType:l.getUniformLocation(i,"fogType"),fogDensity:l.getUniformLocation(i,"fogDensity"),fogNear:l.getUniformLocation(i,"fogNear"),fogFar:l.getUniformLocation(i,"fogFar"),fogColor:l.getUniformLocation(i,"fogColor"),alphaTest:l.getUniformLocation(i,"alphaTest")};var f=document.createElement("canvas");f.width=8,f.height=8;var d=f.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),(s=new Xt.Texture(f)).needsUpdate=!0}(),l.useProgram(i),l.enableVertexAttribArray(o.position),l.enableVertexAttribArray(o.uv),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.bindBuffer(l.ARRAY_BUFFER,n),l.vertexAttribPointer(o.position,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(o.uv,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),l.uniformMatrix4fv(a.projectionMatrix,!1,d.projectionMatrix.elements),l.activeTexture(l.TEXTURE0),l.uniform1i(a.map,0);var m=0,g=0,y=f.fog;y?(l.uniform3f(a.fogColor,y.color.r,y.color.g,y.color.b),y instanceof Xt.Fog?(l.uniform1f(a.fogNear,y.near),l.uniform1f(a.fogFar,y.far),l.uniform1i(a.fogType,1),g=m=1):y instanceof Xt.FogExp2&&(l.uniform1f(a.fogDensity,y.density),l.uniform1i(a.fogType,2),g=m=2)):(l.uniform1i(a.fogType,0),g=m=0);for(var v=0,b=t.length;v<b;v++)(w=t[v])._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,w.matrixWorld),w.z=-w._modelViewMatrix.elements[14];t.sort(p);var x=[];for(v=0,b=t.length;v<b;v++){var w,_=(w=t[v]).material;l.uniform1f(a.alphaTest,_.alphaTest),l.uniformMatrix4fv(a.modelViewMatrix,!1,w._modelViewMatrix.elements),w.matrixWorld.decompose(u,c,h),x[0]=h.x,x[1]=h.y;var M=0;f.fog&&_.fog&&(M=g),m!==M&&(l.uniform1i(a.fogType,M),m=M),null!==_.map?(l.uniform2f(a.uvOffset,_.map.offset.x,_.map.offset.y),l.uniform2f(a.uvScale,_.map.repeat.x,_.map.repeat.y)):(l.uniform2f(a.uvOffset,0,0),l.uniform2f(a.uvScale,1,1)),l.uniform1f(a.opacity,_.opacity),l.uniform3f(a.color,_.color.r,_.color.g,_.color.b),l.uniform1f(a.rotation,_.rotation),l.uniform2fv(a.scale,x),e.state.setBlending(_.blending,_.blendEquation,_.blendSrc,_.blendDst),e.state.setDepthTest(_.depthTest),e.state.setDepthWrite(_.depthWrite),_.map&&_.map.image&&_.map.image.width?e.setTexture(_.map,0):e.setTexture(s,0),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0)}l.enable(l.CULL_FACE),e.resetGLState()}}},Xt.GeometryUtils={merge:function(e,t,n){var r;Xt.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t instanceof Xt.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return Xt.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Xt.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){var i=new Xt.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new Xt.Texture(void 0,t);return i.load(e,function(e){o.image=e,o.needsUpdate=!0,n&&n(o)},void 0,function(e){r&&r(e)}),o.sourceFile=e,o},loadTextureCube:function(e,t,n,r){var i=new Xt.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new Xt.CubeTexture([],t);o.flipY=!1;for(var a=0,s=function(t){i.load(e[t],function(e){o.images[t]=e,6===(a+=1)&&(o.needsUpdate=!0,n&&n(o))},void 0,r)},l=0,u=e.length;l<u;++l)s(l);return o},loadCompressedTexture:function(){Xt.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){Xt.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var n=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]};t|=1;var r=e.width,i=e.height,o=document.createElement("canvas");o.width=r,o.height=i;var a=o.getContext("2d");a.drawImage(e,0,0);for(var s,l,u,c,h=a.getImageData(0,0,r,i).data,p=a.createImageData(r,i),f=p.data,d=0;d<r;d++)for(var m=0;m<i;m++){var g=m-1<0?0:m-1,y=i-1<m+1?i-1:m+1,v=d-1<0?0:d-1,b=r-1<d+1?r-1:d+1,x=[],w=[0,0,h[4*(m*r+d)]/255*t];x.push([-1,0,h[4*(m*r+v)]/255*t]),x.push([-1,-1,h[4*(g*r+v)]/255*t]),x.push([0,-1,h[4*(g*r+d)]/255*t]),x.push([1,-1,h[4*(g*r+b)]/255*t]),x.push([1,0,h[4*(m*r+b)]/255*t]),x.push([1,1,h[4*(y*r+b)]/255*t]),x.push([0,1,h[4*(y*r+d)]/255*t]),x.push([-1,1,h[4*(y*r+v)]/255*t]);for(var _=[],M=x.length,S=0;S<M;S++){var E=x[S],T=x[(S+1)%M];E=n(E,w),T=n(T,w),_.push((c=T,s=[(u=E)[1]*c[2]-u[2]*c[1],u[2]*c[0]-u[0]*c[2],u[0]*c[1]-u[1]*c[0]],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),[s[0]/l,s[1]/l,s[2]/l]))}var C=[0,0,0];for(S=0;S<_.length;S++)C[0]+=_[S][0],C[1]+=_[S][1],C[2]+=_[S][2];C[0]/=_.length,C[1]/=_.length,C[2]/=_.length;var A=4*(m*r+d);f[A]=(C[0]+1)/2*255|0,f[A+1]=(C[1]+1)/2*255|0,f[A+2]=255*C[2]|0,f[A+3]=255}return a.putImageData(p,0,0),o},generateDataTexture:function(e,t,n){for(var r=e*t,i=new Uint8Array(3*r),o=Math.floor(255*n.r),a=Math.floor(255*n.g),s=Math.floor(255*n.b),l=0;l<r;l++)i[3*l]=o,i[3*l+1]=a,i[3*l+2]=s;var u=new Xt.DataTexture(i,e,t,Xt.RGBFormat);return u.needsUpdate=!0,u}},Xt.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new Xt.Object3D,r=0,i=t.length;r<i;r++)n.add(new Xt.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new Xt.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},Xt.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();return this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e,this.faces[t][e.cssFontWeight][e.cssFontStyle]=e},drawText:function(e){var t,n=this.getFace(),r=this.size/n.resolution,i=0,o=String(e).split(""),a=o.length,s=[];for(t=0;t<a;t++){var l=new Xt.Path,u=this.extractGlyphPoints(o[t],n,r,i,l);i+=u.offset,s.push(u.path)}return{paths:s,offset:i/2}},extractGlyphPoints:function(e,t,n,r,i){var o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,w,_,M=[],S=t.glyphs[e]||t.glyphs["?"];if(S){if(S.o)for(u=(l=S._cachedOutline||(S._cachedOutline=S.o.split(" "))).length,h=c=n,o=0;o<u;)switch(l[o++]){case"m":p=l[o++]*c+r,f=l[o++]*h,i.moveTo(p,f);break;case"l":p=l[o++]*c+r,f=l[o++]*h,i.lineTo(p,f);break;case"q":if(d=l[o++]*c+r,m=l[o++]*h,v=l[o++]*c+r,b=l[o++]*h,i.quadraticCurveTo(v,b,d,m),_=M[M.length-1])for(g=_.x,y=_.y,a=1,s=this.divisions;a<=s;a++){var E=a/s;Xt.Shape.Utils.b2(E,g,v,d),Xt.Shape.Utils.b2(E,y,b,m)}break;case"b":if(d=l[o++]*c+r,m=l[o++]*h,v=l[o++]*c+r,b=l[o++]*h,x=l[o++]*c+r,w=l[o++]*h,i.bezierCurveTo(v,b,x,w,d,m),_=M[M.length-1])for(g=_.x,y=_.y,a=1,s=this.divisions;a<=s;a++)E=a/s,Xt.Shape.Utils.b3(E,g,v,x,d),Xt.Shape.Utils.b3(E,y,b,w,m)}return{offset:S.ha*n,path:i}}}},Xt.FontUtils.generateShapes=function(e,t){var n=void 0!==(t=t||{}).size?t.size:100,r=void 0!==t.curveSegments?t.curveSegments:4,i=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";Xt.FontUtils.size=n,Xt.FontUtils.divisions=r,Xt.FontUtils.face=i,Xt.FontUtils.weight=o,Xt.FontUtils.style=a;for(var s=Xt.FontUtils.drawText(e).paths,l=[],u=0,c=s.length;u<c;u++)Array.prototype.push.apply(l,s[u].toShapes());return l},lt=Xt.FontUtils,ut=function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},ct=function(e,t,n,r,i,o){var a,s,l,u,c,h,p,f,d,m,g,y,v,b,x;if(s=e[o[t]].x,l=e[o[t]].y,u=e[o[n]].x,c=e[o[n]].y,h=e[o[r]].x,(u-s)*((p=e[o[r]].y)-l)-(c-l)*(h-s)<1e-10)return!1;for(m=h-u,g=p-c,y=s-h,v=l-p,b=u-s,x=c-l,a=0;a<i;a++)if(f=e[o[a]].x,d=e[o[a]].y,!(f===s&&d===l||f===u&&d===c||f===h&&d===p)&&-1e-10<=m*(d-c)-g*(f-u)&&-1e-10<=y*(d-p)-v*(f-h)&&-1e-10<=b*(d-l)-x*(f-s))return!1;return!0},lt.Triangulate=function(e,t){var n=e.length;if(n<3)return null;var r,i,o,a=[],s=[],l=[];if(0<ut(e))for(i=0;i<n;i++)s[i]=i;else for(i=0;i<n;i++)s[i]=n-1-i;var u=n,c=2*u;for(i=u-1;2<u;){if(c--<=0)return Xt.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"),t?l:a;if(u<=(r=i)&&(r=0),u<=(i=r+1)&&(i=0),u<=(o=i+1)&&(o=0),ct(e,r,i,o,u,s)){var h,p,f,d,m;for(h=s[r],p=s[i],f=s[o],a.push([e[h],e[p],e[f]]),l.push([s[r],s[i],s[o]]),m=(d=i)+1;m<u;d++,m++)s[d]=s[m];c=2*--u}}return t?l:a},lt.Triangulate.area=ut,Gt._typeface_js={faces:Xt.FontUtils.faces,loadFace:Xt.FontUtils.loadFace},Xt.typeface_js=Gt._typeface_js,Xt.Audio=function(e){Xt.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.isPlaying=!1},Xt.Audio.prototype=Object.create(Xt.Object3D.prototype),Xt.Audio.prototype.constructor=Xt.Audio,Xt.Audio.prototype.load=function(e){var t=this,n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.autoplay&&t.play()})},n.send(),this},Xt.Audio.prototype.play=function(){if(!0!==this.isPlaying){var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.connect(this.panner),e.start(0,this.startTime),this.isPlaying=!0,this.source=e}else Xt.warn("THREE.Audio: Audio is already playing.")},Xt.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},Xt.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},Xt.Audio.prototype.onEnded=function(){this.isPlaying=!1},Xt.Audio.prototype.setLoop=function(e){this.source.loop=e},Xt.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},Xt.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},Xt.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},Xt.Audio.prototype.updateMatrixWorld=(ht=new Xt.Vector3,function(e){Xt.Object3D.prototype.updateMatrixWorld.call(this,e),ht.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(ht.x,ht.y,ht.z)}),Xt.AudioListener=function(){Xt.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},Xt.AudioListener.prototype=Object.create(Xt.Object3D.prototype),Xt.AudioListener.prototype.constructor=Xt.AudioListener,Xt.AudioListener.prototype.updateMatrixWorld=(pt=new Xt.Vector3,ft=new Xt.Quaternion,dt=new Xt.Vector3,mt=new Xt.Vector3,gt=new Xt.Vector3,yt=new Xt.Vector3,function(e){Xt.Object3D.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;this.matrixWorld.decompose(pt,ft,dt),mt.set(0,0,-1).applyQuaternion(ft),gt.subVectors(pt,yt),t.setPosition(pt.x,pt.y,pt.z),t.setOrientation(mt.x,mt.y,mt.z,n.x,n.y,n.z),t.setVelocity(gt.x,gt.y,gt.z),yt.copy(pt)}),Xt.Curve=function(){},Xt.Curve.prototype.getPoint=function(e){return Xt.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},Xt.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},Xt.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},Xt.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},Xt.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},Xt.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r},Xt.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},Xt.Curve.prototype.getUtoTmapping=function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(0<a)){l=i;break}l=i-1}if(r[i=l]==n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},Xt.Curve.prototype.getTangent=function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),1<n&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},Xt.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},Xt.Curve.Utils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}},Xt.Curve.create=function(e,t){return e.prototype=Object.create(Xt.Curve.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Xt.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},Xt.CurvePath.prototype=Object.create(Xt.Curve.prototype),Xt.CurvePath.prototype.constructor=Xt.CurvePath,Xt.CurvePath.prototype.add=function(e){this.curves.push(e)},Xt.CurvePath.prototype.checkConnection=function(){},Xt.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Xt.LineCurve(t,e))},Xt.CurvePath.prototype.getPoint=function(e){for(var t,n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=1-(r[i]-n)/(t=this.curves[i]).getLength();return t.getPointAt(o)}i++}return null},Xt.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},Xt.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],n=0,r=this.curves.length;for(e=0;e<r;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t},Xt.CurvePath.prototype.getBoundingBox=function(){var e,t,n,r,i,o,a,s,l,u,c=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=i=Number.POSITIVE_INFINITY;var h=c[0]instanceof Xt.Vector3;for(u=h?new Xt.Vector3:new Xt.Vector2,s=0,l=c.length;s<l;s++)(a=c[s]).x>e?e=a.x:a.x<r&&(r=a.x),a.y>t?t=a.y:a.y<i&&(i=a.y),h&&(a.z>n?n=a.z:a.z<o&&(o=a.z)),u.add(a);var p={minX:r,minY:i,maxX:e,maxY:t};return h&&(p.maxZ=n,p.minZ=o),p},Xt.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},Xt.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},Xt.CurvePath.prototype.createGeometry=function(e){for(var t=new Xt.Geometry,n=0;n<e.length;n++)t.vertices.push(new Xt.Vector3(e[n].x,e[n].y,e[n].z||0));return t},Xt.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},Xt.CurvePath.prototype.getTransformedPoints=function(e,t){var n,r,i=this.getPoints(e);for(t||(t=this.bends),n=0,r=t.length;n<r;n++)i=this.getWrapPoints(i,t[n]);return i},Xt.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n,r,i=this.getSpacedPoints(e);for(t||(t=this.bends),n=0,r=t.length;n<r;n++)i=this.getWrapPoints(i,t[n]);return i},Xt.CurvePath.prototype.getWrapPoints=function(e,t){var n,r,i,o,a,s,l=this.getBoundingBox();for(n=0,r=e.length;n<r;n++){o=(i=e[n]).x,a=i.y,s=o/l.maxX,s=t.getUtoTmapping(s,o);var u=t.getPoint(s),c=t.getTangent(s);c.set(-c.y,c.x).multiplyScalar(a),i.x=u.x+c.x,i.y=u.y+c.y}return e},Xt.Gyroscope=function(){Xt.Object3D.call(this)},Xt.Gyroscope.prototype=Object.create(Xt.Object3D.prototype),Xt.Gyroscope.prototype.constructor=Xt.Gyroscope,Xt.Gyroscope.prototype.updateMatrixWorld=(vt=new Xt.Vector3,bt=new Xt.Quaternion,xt=new Xt.Vector3,wt=new Xt.Vector3,_t=new Xt.Quaternion,Mt=new Xt.Vector3,function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(wt,_t,Mt),this.matrix.decompose(vt,bt,xt),this.matrixWorld.compose(wt,bt,Mt)):this.matrixWorld.copy(this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}),Xt.Path=function(e){Xt.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},Xt.Path.prototype=Object.create(Xt.CurvePath.prototype),Xt.Path.prototype.constructor=Xt.Path,Xt.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},Xt.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},Xt.Path.prototype.moveTo=function(e,t){var n=Array.prototype.slice.call(arguments);this.actions.push({action:Xt.PathActions.MOVE_TO,args:n})},Xt.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,i=r[r.length-2],o=r[r.length-1],a=new Xt.LineCurve(new Xt.Vector2(i,o),new Xt.Vector2(e,t));this.curves.push(a),this.actions.push({action:Xt.PathActions.LINE_TO,args:n})},Xt.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],l=new Xt.QuadraticBezierCurve(new Xt.Vector2(a,s),new Xt.Vector2(e,t),new Xt.Vector2(n,r));this.curves.push(l),this.actions.push({action:Xt.PathActions.QUADRATIC_CURVE_TO,args:i})},Xt.Path.prototype.bezierCurveTo=function(e,t,n,r,i,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],u=s[s.length-1],c=new Xt.CubicBezierCurve(new Xt.Vector2(l,u),new Xt.Vector2(e,t),new Xt.Vector2(n,r),new Xt.Vector2(i,o));this.curves.push(c),this.actions.push({action:Xt.PathActions.BEZIER_CURVE_TO,args:a})},Xt.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],i=n[n.length-1],o=[new Xt.Vector2(r,i)];Array.prototype.push.apply(o,e);var a=new Xt.SplineCurve(o);this.curves.push(a),this.actions.push({action:Xt.PathActions.CSPLINE_THRU,args:t})},Xt.Path.prototype.arc=function(e,t,n,r,i,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(e+s,t+l,n,r,i,o)},Xt.Path.prototype.absarc=function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},Xt.Path.prototype.ellipse=function(e,t,n,r,i,o,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],u=s[s.length-1];this.absellipse(e+l,t+u,n,r,i,o,a)},Xt.Path.prototype.absellipse=function(e,t,n,r,i,o,a){var s=Array.prototype.slice.call(arguments),l=new Xt.EllipseCurve(e,t,n,r,i,o,a);this.curves.push(l);var u=l.getPoint(1);s.push(u.x),s.push(u.y),this.actions.push({action:Xt.PathActions.ELLIPSE,args:s})},Xt.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var n=[],r=0;r<e;r++)n.push(this.getPoint(r/e));return n},Xt.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var n,r,i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,b,x=[];for(n=0,r=this.actions.length;n<r;n++)switch(o=(i=this.actions[n]).action,a=i.args,o){case Xt.PathActions.MOVE_TO:case Xt.PathActions.LINE_TO:x.push(new Xt.Vector2(a[0],a[1]));break;case Xt.PathActions.QUADRATIC_CURVE_TO:for(s=a[2],l=a[3],h=a[0],p=a[1],d=0<x.length?(f=(m=x[x.length-1]).x,m.y):(f=(m=this.actions[n-1].args)[m.length-2],m[m.length-1]),g=1;g<=e;g++)y=g/e,v=Xt.Shape.Utils.b2(y,f,h,s),b=Xt.Shape.Utils.b2(y,d,p,l),x.push(new Xt.Vector2(v,b));break;case Xt.PathActions.BEZIER_CURVE_TO:for(s=a[4],l=a[5],h=a[0],p=a[1],u=a[2],c=a[3],d=0<x.length?(f=(m=x[x.length-1]).x,m.y):(f=(m=this.actions[n-1].args)[m.length-2],m[m.length-1]),g=1;g<=e;g++)y=g/e,v=Xt.Shape.Utils.b3(y,f,h,u,s),b=Xt.Shape.Utils.b3(y,d,p,c,l),x.push(new Xt.Vector2(v,b));break;case Xt.PathActions.CSPLINE_THRU:m=this.actions[n-1].args;var w=[new Xt.Vector2(m[m.length-2],m[m.length-1])],_=e*a[0].length;w=w.concat(a[0]);var M=new Xt.SplineCurve(w);for(g=1;g<=_;g++)x.push(M.getPointAt(g/_));break;case Xt.PathActions.ARC:var S=a[0],E=a[1],T=a[2],C=a[3],A=a[4],P=!!a[5],L=A-C,R=2*e;for(g=1;g<=R;g++)y=g/R,P||(y=1-y),k=C+y*L,v=S+T*Math.cos(k),b=E+T*Math.sin(k),x.push(new Xt.Vector2(v,b));break;case Xt.PathActions.ELLIPSE:S=a[0],E=a[1];var k,O=a[2],F=a[3];for(C=a[4],A=a[5],P=!!a[6],L=A-C,R=2*e,g=1;g<=R;g++)y=g/R,P||(y=1-y),k=C+y*L,v=S+O*Math.cos(k),b=E+F*Math.sin(k),x.push(new Xt.Vector2(v,b))}var U=x[x.length-1];return Math.abs(U.x-x[0].x)<1e-10&&Math.abs(U.y-x[0].y)<1e-10&&x.splice(x.length-1,1),t&&x.push(x[0]),x},Xt.Path.prototype.toShapes=function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Xt.Shape;o.actions=i.actions,o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(1e-10<Math.abs(u)){if(u<0&&(a=t[o],l=-l,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y==a.y){if(e.x==a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0==c)return!0;if(c<0)continue;r=!r}}else{if(e.y!=a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=function(e){var t,n,r,i,o,a=[],s=new Xt.Path;for(t=0,n=e.length;t<n;t++)o=(r=e[t]).args,(i=r.action)==Xt.PathActions.MOVE_TO&&0!=s.actions.length&&(a.push(s),s=new Xt.Path),s[i].apply(s,o);return 0!=s.actions.length&&a.push(s),a}(this.actions);if(0==i.length)return[];if(!0===t)return n(i);var o,a,s,l=[];if(1==i.length)return a=i[0],(s=new Xt.Shape).actions=a.actions,s.curves=a.curves,l.push(s),l;var u=!Xt.Shape.Utils.isClockWise(i[0].getPoints());u=e?!u:u;var c,h,p,f,d,m,g=[],y=[],v=[],b=0;for(y[b]=void 0,v[b]=[],h=0,p=i.length;h<p;h++)c=(a=i[h]).getPoints(),o=Xt.Shape.Utils.isClockWise(c),(o=e?!o:o)?(!u&&y[b]&&b++,y[b]={s:new Xt.Shape,p:c},y[b].s.actions=a.actions,y[b].s.curves=a.curves,u&&b++,v[b]=[]):v[b].push({h:a,p:c[0]});if(!y[0])return n(i);if(1<y.length){for(var x=!1,w=[],_=0,M=y.length;_<M;_++)g[_]=[];for(_=0,M=y.length;_<M;_++)for(var S=v[_],E=0;E<S.length;E++){for(var T=S[E],C=!0,A=0;A<y.length;A++)r(T.p,y[A].p)&&(_!=A&&w.push({froms:_,tos:A,hole:E}),C?(C=!1,g[A].push(T)):x=!0);C&&g[_].push(T)}0<w.length&&(x||(v=g))}for(h=0,p=y.length;h<p;h++)for(s=y[h].s,l.push(s),d=0,m=(f=v[h]).length;d<m;d++)s.holes.push(f[d].h);return l},Xt.Shape=function(){Xt.Path.apply(this,arguments),this.holes=[]},Xt.Shape.prototype=Object.create(Xt.Path.prototype),Xt.Shape.prototype.constructor=Xt.Shape,Xt.Shape.prototype.extrude=function(e){return new Xt.ExtrudeGeometry(this,e)},Xt.Shape.prototype.makeGeometry=function(e){return new Xt.ShapeGeometry(this,e)},Xt.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},Xt.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},Xt.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},Xt.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},Xt.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},Xt.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){return e.x!=t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,o){var a=t.x-e.x,s=t.y-e.y,l=i.x-r.x,u=i.y-r.y,c=e.x-r.x,h=e.y-r.y,p=s*l-a*u,f=s*c-a*h;if(1e-10<Math.abs(p)){var d;if(0<p){if(f<0||p<f)return[];if((d=u*c-l*h)<0||p<d)return[]}else{if(0<f||f<p)return[];if(0<(d=u*c-l*h)||d<p)return[]}if(0==d)return!o||0!=f&&f!=p?[e]:[];if(d==p)return!o||0!=f&&f!=p?[t]:[];if(0==f)return[r];if(f==p)return[i];var m=d/p;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!=f||u*c!=l*h)return[];var g,y,v,b,x,w,_,M,S=0==a&&0==s,E=0==l&&0==u;return S&&E?e.x!=r.x||e.y!=r.y?[]:[e]:S?n(r,i,e)?[e]:[]:E?n(e,t,r)?[r]:[]:(M=0!=a?(b=e.x<t.x?(v=(g=e).x,(y=t).x):(v=(g=t).x,(y=e).x),r.x<i.x?(_=(x=r).x,(w=i).x):(_=(x=i).x,(w=r).x)):(b=e.y<t.y?(v=(g=e).y,(y=t).y):(v=(g=t).y,(y=e).y),r.y<i.y?(_=(x=r).y,(w=i).y):(_=(x=i).y,(w=r).y)),v<=_?b<_?[]:b==_?o?[]:[x]:b<=M?[x,y]:[x,w]:M<v?[]:v==M?o?[]:[g]:b<=M?[g,y]:[g,w])}function i(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=r.x-e.x,u=r.y-e.y,c=i*s-o*a,h=i*u-o*l;if(1e-10<Math.abs(c)){var p=l*s-u*a;return 0<c?0<=h&&0<=p:0<=h||0<=p}return 0<h}for(var o,a,s,l,u,c,h={},p=e.concat(),f=0,d=t.length;f<d;f++)Array.prototype.push.apply(p,t[f]);for(o=0,a=p.length;o<a;o++)void 0!==h[u=p[o].x+":"+p[o].y]&&Xt.warn("THREE.Shape: Duplicate point",u),h[u]=o;var m=function(e,t){var n,o=e.concat();function a(e,t){var r=o.length-1,a=e-1;a<0&&(a=r);var s=e+1;r<s&&(s=0);var l=i(o[e],o[a],o[s],n[t]);if(!l)return!1;var u=n.length-1,c=t-1;c<0&&(c=u);var h=t+1;return u<h&&(h=0),!!(l=i(n[t],n[c],n[h],o[e]))}function s(e,t){var n,i;for(n=0;n<o.length;n++)if(i=n+1,i%=o.length,0<r(e,t,o[n],o[i],!0).length)return!0;return!1}var l=[];function u(e,n){var i,o,a,s;for(i=0;i<l.length;i++)for(o=t[l[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,0<r(e,n,o[a],o[s],!0).length)return!0;return!1}for(var c,h,p,f,d,m,g,y,v,b,x=[],w=0,_=t.length;w<_;w++)l.push(w);for(var M=0,S=2*l.length;0<l.length;){if(--S<0){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(h=M;h<o.length;h++){for(p=o[h],c=-1,w=0;w<l.length;w++)if(d=l[w],void 0===x[m=p.x+":"+p.y+":"+d]){n=t[d];for(var E=0;E<n.length;E++)if(f=n[E],a(h,E)&&!s(p,f)&&!u(p,f)){c=E,l.splice(w,1),g=o.slice(0,h+1),y=o.slice(h),v=n.slice(c),b=n.slice(0,c+1),o=g.concat(v).concat(b).concat(y),M=h;break}if(0<=c)break;x[m]=!0}if(0<=c)break}}return o}(e,t),g=Xt.FontUtils.Triangulate(m,!1);for(o=0,a=g.length;o<a;o++)for(l=g[o],s=0;s<3;s++)void 0!==(c=h[u=l[s].x+":"+l[s].y])&&(l[s]=c);return g.concat()},isClockWise:function(e){return Xt.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,r){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,r)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,r,i){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,r)+this.b3p3(e,i)}},Xt.LineCurve=function(e,t){this.v1=e,this.v2=t},Xt.LineCurve.prototype=Object.create(Xt.Curve.prototype),Xt.LineCurve.prototype.constructor=Xt.LineCurve,Xt.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},Xt.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},Xt.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},Xt.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},Xt.QuadraticBezierCurve.prototype=Object.create(Xt.Curve.prototype),Xt.QuadraticBezierCurve.prototype.constructor=Xt.QuadraticBezierCurve,Xt.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new Xt.Vector2;return t.x=Xt.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=Xt.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},Xt.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new Xt.Vector2;return t.x=Xt.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=Xt.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},Xt.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},Xt.CubicBezierCurve.prototype=Object.create(Xt.Curve.prototype),Xt.CubicBezierCurve.prototype.constructor=Xt.CubicBezierCurve,Xt.CubicBezierCurve.prototype.getPoint=function(e){var t,n;return t=Xt.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=Xt.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Xt.Vector2(t,n)},Xt.CubicBezierCurve.prototype.getTangent=function(e){var t,n;t=Xt.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=Xt.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new Xt.Vector2(t,n);return r.normalize(),r},Xt.SplineCurve=function(e){this.points=null==e?[]:e},Xt.SplineCurve.prototype=Object.create(Xt.Curve.prototype),Xt.SplineCurve.prototype.constructor=Xt.SplineCurve,Xt.SplineCurve.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],u=new Xt.Vector2;return u.x=Xt.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),u.y=Xt.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),u},Xt.EllipseCurve=function(e,t,n,r,i,o,a){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a},Xt.EllipseCurve.prototype=Object.create(Xt.Curve.prototype),Xt.EllipseCurve.prototype.constructor=Xt.EllipseCurve,Xt.EllipseCurve.prototype.getPoint=function(e){var t,n=this.aEndAngle-this.aStartAngle;n<0&&(n+=2*Math.PI),n>2*Math.PI&&(n-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-n):this.aStartAngle+e*n;var r=new Xt.Vector2;return r.x=this.aX+this.xRadius*Math.cos(t),r.y=this.aY+this.yRadius*Math.sin(t),r},Xt.ArcCurve=function(e,t,n,r,i,o){Xt.EllipseCurve.call(this,e,t,n,n,r,i,o)},Xt.ArcCurve.prototype=Object.create(Xt.EllipseCurve.prototype),Xt.ArcCurve.prototype.constructor=Xt.ArcCurve,Xt.LineCurve3=Xt.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new Xt.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),Xt.QuadraticBezierCurve3=Xt.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=new Xt.Vector3;return t.x=Xt.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=Xt.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=Xt.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),Xt.CubicBezierCurve3=Xt.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=new Xt.Vector3;return t.x=Xt.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=Xt.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=Xt.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),Xt.SplineCurve3=Xt.Curve.create(function(e){this.points=null==e?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],u=new Xt.Vector3;return u.x=Xt.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),u.y=Xt.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),u.z=Xt.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,i),u}),Xt.ClosedSplineCurve3=Xt.Curve.create(function(e){this.points=null==e?[]:e},function(e){var t=this.points,n=(t.length-0)*e,r=Math.floor(n),i=n-r,o=t[((r+=0<r?0:(Math.floor(Math.abs(r)/t.length)+1)*t.length)-1)%t.length],a=t[r%t.length],s=t[(r+1)%t.length],l=t[(r+2)%t.length],u=new Xt.Vector3;return u.x=Xt.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),u.y=Xt.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),u.z=Xt.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,i),u}),Xt.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){Xt.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){Xt.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){Xt.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(!0===e.initialized)return e;for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++)if(e.hierarchy[t].keys[n].time<0&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof Xt.Quaternion)){var r=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new Xt.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){var i={};for(n=0;n<e.hierarchy[t].keys.length;n++)for(var o=0;o<e.hierarchy[t].keys[n].morphTargets.length;o++)i[s=e.hierarchy[t].keys[n].morphTargets[o]]=-1;for(e.hierarchy[t].usedMorphTargets=i,n=0;n<e.hierarchy[t].keys.length;n++){var a={};for(var s in i){for(o=0;o<e.hierarchy[t].keys[n].morphTargets.length;o++)if(e.hierarchy[t].keys[n].morphTargets[o]===s){a[s]=e.hierarchy[t].keys[n].morphTargetsInfluences[o];break}o===e.hierarchy[t].keys[n].morphTargets.length&&(a[s]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=a}}for(n=1;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(n=0;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].index=n}return e.initialized=!0,e},parse:function(e){var t=function(e,n){n.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],n)},n=[];if(e instanceof Xt.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)n.push(e.skeleton.bones[r]);else t(e,n);return n},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(t=0;t<this.animations.length;t++)this.animations[t].update(e)}},Xt.Animation=function(e,t){this.root=e,this.data=Xt.AnimationHandler.init(t),this.hierarchy=Xt.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=Xt.AnimationHandler.LINEAR},Xt.Animation.prototype={constructor:Xt.Animation,keyTypes:["pos","rot","scl"],play:function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),Xt.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,Xt.AnimationHandler.stop(this)},reset:function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];void 0===n.animationCache&&(n.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var r=this.data.name,i=n.animationCache.animations,o=i[r];void 0===o&&(o={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:n.matrix},i[r]=o);for(var a=0;a<3;a++){for(var s=this.keyTypes[a],l=this.data.hierarchy[e].keys[0],u=this.getNextKeyWith(s,e,1);u.time<this.currentTime&&u.index>l.index;)l=u,u=this.getNextKeyWith(s,e,u.index+1);o.prevKey[s]=l,o.nextKey[s]=u}}},resetBlendWeights:function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e].animationCache;if(void 0!==n){var r=n.blending;r.positionWeight=0,r.quaternionWeight=0,r.scaleWeight=0}}},update:(St=[],Et=new Xt.Vector3,Tt=new Xt.Vector3,Ct=new Xt.Quaternion,At=function(e,t){var n,r,i,o,a,s,l,u,c,h=[],p=[];return i=(n=(e.length-1)*t)-(r=Math.floor(n)),h[0]=0===r?r:r-1,h[1]=r,h[2]=r>e.length-2?r:r+1,h[3]=r>e.length-3?r:r+2,s=e[h[0]],l=e[h[1]],u=e[h[2]],c=e[h[3]],a=i*(o=i*i),p[0]=Pt(s[0],l[0],u[0],c[0],i,o,a),p[1]=Pt(s[1],l[1],u[1],c[1],i,o,a),p[2]=Pt(s[2],l[2],u[2],c[2],i,o,a),p},Pt=function(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t},function(e){if(!1!==this.isPlaying&&(this.currentTime+=e*this.timeScale,0!==this.weight)){var t=this.data.length;(this.currentTime>t||this.currentTime<0)&&(this.loop?(this.currentTime%=t,this.currentTime<0&&(this.currentTime+=t),this.reset()):this.stop());for(var n=0,r=this.hierarchy.length;n<r;n++)for(var i=this.hierarchy[n],o=i.animationCache.animations[this.data.name],a=i.animationCache.blending,s=0;s<3;s++){var l=this.keyTypes[s],u=o.prevKey[l],c=o.nextKey[l];if(0<this.timeScale&&c.time<=this.currentTime||this.timeScale<0&&u.time>=this.currentTime){for(u=this.data.hierarchy[n].keys[0],c=this.getNextKeyWith(l,n,1);c.time<this.currentTime&&c.index>u.index;)u=c,c=this.getNextKeyWith(l,n,c.index+1);o.prevKey[l]=u,o.nextKey[l]=c}var h=(this.currentTime-u.time)/(c.time-u.time),p=u[l],f=c[l];if(h<0&&(h=0),1<h&&(h=1),"pos"===l){if(this.interpolationType===Xt.AnimationHandler.LINEAR){Tt.x=p[0]+(f[0]-p[0])*h,Tt.y=p[1]+(f[1]-p[1])*h,Tt.z=p[2]+(f[2]-p[2])*h;var d=this.weight/(this.weight+a.positionWeight);i.position.lerp(Tt,d),a.positionWeight+=this.weight}else if(this.interpolationType===Xt.AnimationHandler.CATMULLROM||this.interpolationType===Xt.AnimationHandler.CATMULLROM_FORWARD){St[0]=this.getPrevKeyWith("pos",n,u.index-1).pos,St[1]=p,St[2]=f,St[3]=this.getNextKeyWith("pos",n,c.index+1).pos;var m=At(St,h=.33*h+.33);d=this.weight/(this.weight+a.positionWeight),a.positionWeight+=this.weight;var g=i.position;if(g.x=g.x+(m[0]-g.x)*d,g.y=g.y+(m[1]-g.y)*d,g.z=g.z+(m[2]-g.z)*d,this.interpolationType===Xt.AnimationHandler.CATMULLROM_FORWARD){var y=At(St,1.01*h);Et.set(y[0],y[1],y[2]),Et.sub(g),Et.y=0,Et.normalize();var v=Math.atan2(Et.x,Et.z);i.rotation.set(0,v,0)}}}else"rot"===l?(Xt.Quaternion.slerp(p,f,Ct,h),0===a.quaternionWeight?(i.quaternion.copy(Ct),a.quaternionWeight=this.weight):(d=this.weight/(this.weight+a.quaternionWeight),Xt.Quaternion.slerp(i.quaternion,Ct,i.quaternion,d),a.quaternionWeight+=this.weight)):"scl"===l&&(Tt.x=p[0]+(f[0]-p[0])*h,Tt.y=p[1]+(f[1]-p[1])*h,Tt.z=p[2]+(f[2]-p[2])*h,d=this.weight/(this.weight+a.scaleWeight),i.scale.lerp(Tt,d),a.scaleWeight+=this.weight)}return!0}}),getNextKeyWith:function(e,t,n){var r=this.data.hierarchy[t].keys;for(this.interpolationType===Xt.AnimationHandler.CATMULLROM||this.interpolationType===Xt.AnimationHandler.CATMULLROM_FORWARD?n=n<r.length-1?n:r.length-1:n%=r.length;n<r.length;n++)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[0]},getPrevKeyWith:function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===Xt.AnimationHandler.CATMULLROM||this.interpolationType===Xt.AnimationHandler.CATMULLROM_FORWARD?0<n?n:0:0<=n?n:n+r.length;0<=n;n--)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[r.length-1]}},Xt.KeyFrameAnimation=function(e){this.root=e.node,this.data=Xt.AnimationHandler.init(e),this.hierarchy=Xt.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,n=this.hierarchy.length;t<n;t++){var r=this.data.hierarchy[t].keys,i=this.data.hierarchy[t].sids,o=this.hierarchy[t];if(r.length&&i){for(var a=0;a<i.length;a++){var s=i[a],l=this.getNextKeyWith(s,t,0);l&&l.apply(s)}o.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},Xt.KeyFrameAnimation.prototype={constructor:Xt.KeyFrameAnimation,play:function(e){if(this.currentTime=void 0!==e?e:0,!1===this.isPlaying){this.isPlaying=!0;var t,n,r,i=this.hierarchy.length;for(t=0;t<i;t++){n=this.hierarchy[t],void 0===(r=this.data.hierarchy[t]).animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=n.matrix);var o=this.data.hierarchy[t].keys;o.length&&(r.animationCache.prevKey=o[0],r.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,Xt.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,this.isPaused=!1,Xt.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var r=n.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete n.animationCache}}},update:function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale;var t=this.data.length;!0===this.loop&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var n=0,r=this.hierarchy.length;n<r;n++){var i=this.hierarchy[n],o=this.data.hierarchy[n],a=o.keys,s=o.animationCache;if(a.length){var l=s.prevKey,u=s.nextKey;if(u.time<=this.currentTime){for(;u.time<this.currentTime&&u.index>l.index;)u=a[(l=u).index+1];s.prevKey=l,s.nextKey=u}u.time>=this.currentTime?l.interpolate(u,this.currentTime):l.interpolate(u,u.time),this.data.hierarchy[n].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(e,t,n){var r=this.data.hierarchy[t].keys;for(n%=r.length;n<r.length;n++)if(r[n].hasTarget(e))return r[n];return r[0]},getPrevKeyWith:function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=0<=n?n:n+r.length;0<=n;n--)if(r[n].hasTarget(e))return r[n];return r[r.length-1]}},Xt.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.lastFrame=0,this.currentFrame=0,this.isPlaying=!1},Xt.MorphAnimation.prototype={constructor:Xt.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(e){if(!1!==this.isPlaying){this.currentTime+=e,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var t=this.duration/this.frames,n=Math.floor(this.currentTime/t),r=this.mesh.morphTargetInfluences;n!=this.currentFrame&&(r[this.lastFrame]=0,r[this.currentFrame]=1,r[n]=0,this.lastFrame=this.currentFrame,this.currentFrame=n),r[n]=this.currentTime%t/t,r[this.lastFrame]=1-r[n]}}},Xt.BoxGeometry=function(e,t,n,r,i,o){Xt.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.widthSegments=r||1,this.heightSegments=i||1,this.depthSegments=o||1;var a=this,s=e/2,l=t/2,u=n/2;function c(e,t,n,r,i,o,s,l){var u,c,h,p=a.widthSegments,f=a.heightSegments,d=i/2,m=o/2,g=a.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",f=a.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",p=a.depthSegments);var y=p+1,v=f+1,b=i/p,x=o/f,w=new Xt.Vector3;for(w[u]=0<s?1:-1,h=0;h<v;h++)for(c=0;c<y;c++){var _=new Xt.Vector3;_[e]=(c*b-d)*n,_[t]=(h*x-m)*r,_[u]=s,a.vertices.push(_)}for(h=0;h<f;h++)for(c=0;c<p;c++){var M=c+y*h,S=c+y*(h+1),E=c+1+y*(h+1),T=c+1+y*h,C=new Xt.Vector2(c/p,1-h/f),A=new Xt.Vector2(c/p,1-(h+1)/f),P=new Xt.Vector2((c+1)/p,1-(h+1)/f),L=new Xt.Vector2((c+1)/p,1-h/f),R=new Xt.Face3(M+g,S+g,T+g);R.normal.copy(w),R.vertexNormals.push(w.clone(),w.clone(),w.clone()),R.materialIndex=l,a.faces.push(R),a.faceVertexUvs[0].push([C,A,L]),(R=new Xt.Face3(S+g,E+g,T+g)).normal.copy(w),R.vertexNormals.push(w.clone(),w.clone(),w.clone()),R.materialIndex=l,a.faces.push(R),a.faceVertexUvs[0].push([A.clone(),P,L.clone()])}}c("z","y",-1,-1,n,t,s,0),c("z","y",1,-1,n,t,-s,1),c("x","z",1,1,e,n,l,2),c("x","z",1,-1,e,n,-l,3),c("x","y",1,-1,e,t,u,4),c("x","y",-1,-1,e,t,-u,5),this.mergeVertices()},Xt.BoxGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.BoxGeometry.prototype.constructor=Xt.BoxGeometry,Xt.CircleGeometry=function(e,t,n,r){Xt.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o=[],a=new Xt.Vector3,s=new Xt.Vector2(.5,.5);for(this.vertices.push(a),o.push(s),i=0;i<=t;i++){var l=new Xt.Vector3,u=n+i/t*r;l.x=e*Math.cos(u),l.y=e*Math.sin(u),this.vertices.push(l),o.push(new Xt.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var c=new Xt.Vector3(0,0,1);for(i=1;i<=t;i++)this.faces.push(new Xt.Face3(i,i+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([o[i].clone(),o[i+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new Xt.Sphere(new Xt.Vector3,e)},Xt.CircleGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.CircleGeometry.prototype.constructor=Xt.CircleGeometry,Xt.CubeGeometry=function(e,t,n,r,i,o){return Xt.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new Xt.BoxGeometry(e,t,n,r,i,o)},Xt.CylinderGeometry=function(e,t,n,r,i,o,a,s){Xt.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=r||8,i=i||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l,u,c=n/2,h=[],p=[];for(u=0;u<=i;u++){var f=[],d=[],m=u/i,g=m*(t-e)+e;for(l=0;l<=r;l++){var y=l/r,v=new Xt.Vector3;v.x=g*Math.sin(y*s+a),v.y=-m*n+c,v.z=g*Math.cos(y*s+a),this.vertices.push(v),f.push(this.vertices.length-1),d.push(new Xt.Vector2(y,1-m))}h.push(f),p.push(d)}var b,x,w=(t-e)/n;for(l=0;l<r;l++)for(x=0!==e?(b=this.vertices[h[0][l]].clone(),this.vertices[h[0][l+1]].clone()):(b=this.vertices[h[1][l]].clone(),this.vertices[h[1][l+1]].clone()),b.setY(Math.sqrt(b.x*b.x+b.z*b.z)*w).normalize(),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*w).normalize(),u=0;u<i;u++){var _=h[u][l],M=h[u+1][l],S=h[u+1][l+1],E=h[u][l+1],T=b.clone(),C=b.clone(),A=x.clone(),P=x.clone(),L=p[u][l].clone(),R=p[u+1][l].clone(),k=p[u+1][l+1].clone(),O=p[u][l+1].clone();this.faces.push(new Xt.Face3(_,M,E,[T,C,P])),this.faceVertexUvs[0].push([L,R,O]),this.faces.push(new Xt.Face3(M,S,E,[C.clone(),A,P.clone()])),this.faceVertexUvs[0].push([R.clone(),k,O.clone()])}if(!1===o&&0<e)for(this.vertices.push(new Xt.Vector3(0,c,0)),l=0;l<r;l++)_=h[0][l],M=h[0][l+1],S=this.vertices.length-1,T=new Xt.Vector3(0,1,0),C=new Xt.Vector3(0,1,0),A=new Xt.Vector3(0,1,0),L=p[0][l].clone(),R=p[0][l+1].clone(),k=new Xt.Vector2(R.x,0),this.faces.push(new Xt.Face3(_,M,S,[T,C,A])),this.faceVertexUvs[0].push([L,R,k]);if(!1===o&&0<t)for(this.vertices.push(new Xt.Vector3(0,-c,0)),l=0;l<r;l++)_=h[i][l+1],M=h[i][l],S=this.vertices.length-1,T=new Xt.Vector3(0,-1,0),C=new Xt.Vector3(0,-1,0),A=new Xt.Vector3(0,-1,0),L=p[i][l+1].clone(),R=p[i][l].clone(),k=new Xt.Vector2(R.x,1),this.faces.push(new Xt.Face3(_,M,S,[T,C,A])),this.faceVertexUvs[0].push([L,R,k]);this.computeFaceNormals()},Xt.CylinderGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.CylinderGeometry.prototype.constructor=Xt.CylinderGeometry,Xt.ExtrudeGeometry=function(e,t){void 0!==e?(Xt.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]},Xt.ExtrudeGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.ExtrudeGeometry.prototype.constructor=Xt.ExtrudeGeometry,Xt.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},Xt.ExtrudeGeometry.prototype.addShape=function(e,t){var n,r,i,o,a,s,l,u,c=void 0!==t.amount?t.amount:100,h=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:h-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,d=void 0===t.bevelEnabled||t.bevelEnabled,m=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,y=t.extrudePath,v=!1,b=t.material,x=t.extrudeMaterial,w=void 0!==t.UVGenerator?t.UVGenerator:Xt.ExtrudeGeometry.WorldUVGenerator;y&&(n=y.getSpacedPoints(g),d=!(v=!0),r=void 0!==t.frames?t.frames:new Xt.TubeGeometry.FrenetFrames(y,g,!1),i=new Xt.Vector3,o=new Xt.Vector3,a=new Xt.Vector3),d||(p=h=f=0);var _=this,M=this.vertices.length,S=e.extractPoints(m),E=S.shape,T=S.holes,C=!Xt.Shape.Utils.isClockWise(E);if(C){for(E=E.reverse(),l=0,u=T.length;l<u;l++)s=T[l],Xt.Shape.Utils.isClockWise(s)&&(T[l]=s.reverse());C=!1}var A=Xt.Shape.Utils.triangulateShape(E,T),P=E;for(l=0,u=T.length;l<u;l++)s=T[l],E=E.concat(s);function L(e,t,n){return t||Xt.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var R,k,O,F,U,D,N=E.length,B=A.length;function z(e,t,n){var r,i,o=1,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,h=a*u-s*l;if(1e-10<Math.abs(h)){var p=Math.sqrt(c),f=Math.sqrt(l*l+u*u),d=t.x-s/p,m=t.y+a/p,g=((n.x-u/f-d)*u-(n.y+l/f-m)*l)/(a*u-s*l),y=(r=d+a*g-e.x)*r+(i=m+s*g-e.y)*i;if(y<=2)return new Xt.Vector2(r,i);o=Math.sqrt(y/2)}else{var v=!1;1e-10<a?1e-10<l&&(v=!0):a<-1e-10?l<-1e-10&&(v=!0):Math.sign(s)==Math.sign(u)&&(v=!0),o=v?(r=-s,i=a,Math.sqrt(c)):(r=a,i=s,Math.sqrt(c/2))}return new Xt.Vector2(r/o,i/o)}for(var V=[],I=0,j=P.length,H=j-1,W=I+1;I<j;I++,H++,W++)H===j&&(H=0),W===j&&(W=0),V[I]=z(P[I],P[H],P[W]);var G,X,q=[],Y=V.concat();for(l=0,u=T.length;l<u;l++){for(s=T[l],G=[],I=0,H=(j=s.length)-1,W=I+1;I<j;I++,H++,W++)H===j&&(H=0),W===j&&(W=0),G[I]=z(s[I],s[H],s[W]);q.push(G),Y=Y.concat(G)}for(R=0;R<f;R++){for(F=h*(1-(O=R/f)),k=p*Math.sin(O*Math.PI/2),I=0,j=P.length;I<j;I++)Q((U=L(P[I],V[I],k)).x,U.y,-F);for(l=0,u=T.length;l<u;l++)for(s=T[l],G=q[l],I=0,j=s.length;I<j;I++)Q((U=L(s[I],G[I],k)).x,U.y,-F)}for(k=p,I=0;I<N;I++)U=d?L(E[I],Y[I],k):E[I],v?(o.copy(r.normals[0]).multiplyScalar(U.x),i.copy(r.binormals[0]).multiplyScalar(U.y),a.copy(n[0]).add(o).add(i),Q(a.x,a.y,a.z)):Q(U.x,U.y,0);for(X=1;X<=g;X++)for(I=0;I<N;I++)U=d?L(E[I],Y[I],k):E[I],v?(o.copy(r.normals[X]).multiplyScalar(U.x),i.copy(r.binormals[X]).multiplyScalar(U.y),a.copy(n[X]).add(o).add(i),Q(a.x,a.y,a.z)):Q(U.x,U.y,c/g*X);for(R=f-1;0<=R;R--){for(F=h*(1-(O=R/f)),k=p*Math.sin(O*Math.PI/2),I=0,j=P.length;I<j;I++)Q((U=L(P[I],V[I],k)).x,U.y,c+F);for(l=0,u=T.length;l<u;l++)for(s=T[l],G=q[l],I=0,j=s.length;I<j;I++)U=L(s[I],G[I],k),v?Q(U.x,U.y+n[g-1].y,n[g-1].x+F):Q(U.x,U.y,c+F)}function K(e,t){var n,r;for(I=e.length;0<=--I;){(r=(n=I)-1)<0&&(r=e.length-1);var i=0,o=g+2*f;for(i=0;i<o;i++){var a=N*i,s=N*(i+1);$(t+n+a,t+r+a,t+r+s,t+n+s,e,i,o,n,r)}}}function Q(e,t,n){_.vertices.push(new Xt.Vector3(e,t,n))}function Z(e,t,n){e+=M,t+=M,n+=M,_.faces.push(new Xt.Face3(e,t,n,null,null,b));var r=w.generateTopUV(_,e,t,n);_.faceVertexUvs[0].push(r)}function $(e,t,n,r,i,o,a,s,l){e+=M,t+=M,n+=M,r+=M,_.faces.push(new Xt.Face3(e,t,r,null,null,x)),_.faces.push(new Xt.Face3(t,n,r,null,null,x));var u=w.generateSideWallUV(_,e,t,n,r);_.faceVertexUvs[0].push([u[0],u[1],u[3]]),_.faceVertexUvs[0].push([u[1],u[2],u[3]])}!function(){if(d){var e=0,t=N*e;for(I=0;I<B;I++)Z((D=A[I])[2]+t,D[1]+t,D[0]+t);for(t=N*(e=g+2*f),I=0;I<B;I++)Z((D=A[I])[0]+t,D[1]+t,D[2]+t)}else{for(I=0;I<B;I++)Z((D=A[I])[2],D[1],D[0]);for(I=0;I<B;I++)Z((D=A[I])[0]+N*g,D[1]+N*g,D[2]+N*g)}}(),function(){var e=0;for(K(P,e),e+=P.length,l=0,u=T.length;l<u;l++)K(s=T[l],e),e+=s.length}()},Xt.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices,o=i[t],a=i[n],s=i[r];return[new Xt.Vector2(o.x,o.y),new Xt.Vector2(a.x,a.y),new Xt.Vector2(s.x,s.y)]},generateSideWallUV:function(e,t,n,r,i){var o=e.vertices,a=o[t],s=o[n],l=o[r],u=o[i];return Math.abs(a.y-s.y)<.01?[new Xt.Vector2(a.x,1-a.z),new Xt.Vector2(s.x,1-s.z),new Xt.Vector2(l.x,1-l.z),new Xt.Vector2(u.x,1-u.z)]:[new Xt.Vector2(a.y,1-a.z),new Xt.Vector2(s.y,1-s.z),new Xt.Vector2(l.y,1-l.z),new Xt.Vector2(u.y,1-u.z)]}},Xt.ShapeGeometry=function(e,t){Xt.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==0&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},Xt.ShapeGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.ShapeGeometry.prototype.constructor=Xt.ShapeGeometry,Xt.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},Xt.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?Xt.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,u=e.extractPoints(o),c=u.shape,h=u.holes,p=!Xt.Shape.Utils.isClockWise(c);if(p){for(c=c.reverse(),n=0,r=h.length;n<r;n++)i=h[n],Xt.Shape.Utils.isClockWise(i)&&(h[n]=i.reverse());p=!1}var f=Xt.Shape.Utils.triangulateShape(c,h);for(n=0,r=h.length;n<r;n++)i=h[n],c=c.concat(i);var d,m,g=c.length,y=f.length;for(n=0;n<g;n++)d=c[n],this.vertices.push(new Xt.Vector3(d.x,d.y,0));for(n=0;n<y;n++){var v=(m=f[n])[0]+l,b=m[1]+l,x=m[2]+l;this.faces.push(new Xt.Face3(v,b,x,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,v,b,x))}},Xt.LatheGeometry=function(e,t,n,r){Xt.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=t||12,n=n||0,r=r||2*Math.PI;for(var i=1/(e.length-1),o=1/t,a=0,s=t;a<=s;a++)for(var l=n+a*o*r,u=Math.cos(l),c=Math.sin(l),h=0,p=e.length;h<p;h++){var f=e[h],d=new Xt.Vector3;d.x=u*f.x-c*f.y,d.y=c*f.x+u*f.y,d.z=f.z,this.vertices.push(d)}var m=e.length;for(a=0,s=t;a<s;a++)for(h=0,p=e.length-1;h<p;h++){var g=h+m*a,y=g,v=g+m,b=(u=g+1+m,g+1),x=a*o,w=h*i,_=x+o,M=w+i;this.faces.push(new Xt.Face3(y,v,b)),this.faceVertexUvs[0].push([new Xt.Vector2(x,w),new Xt.Vector2(_,w),new Xt.Vector2(x,M)]),this.faces.push(new Xt.Face3(v,u,b)),this.faceVertexUvs[0].push([new Xt.Vector2(_,w),new Xt.Vector2(_,M),new Xt.Vector2(x,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},Xt.LatheGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.LatheGeometry.prototype.constructor=Xt.LatheGeometry,Xt.PlaneGeometry=function(e,t,n,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),Xt.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Xt.PlaneBufferGeometry(e,t,n,r))},Xt.PlaneGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.PlaneGeometry.prototype.constructor=Xt.PlaneGeometry,Xt.PlaneBufferGeometry=function(e,t,n,r){Xt.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=e/2,o=t/2,a=n||1,s=r||1,l=a+1,u=s+1,c=e/a,h=t/s,p=new Float32Array(l*u*3),f=new Float32Array(l*u*3),d=new Float32Array(l*u*2),m=0,g=0,y=0;y<u;y++)for(var v=y*h-o,b=0;b<l;b++){var x=b*c-i;p[m]=x,p[m+1]=-v,f[m+2]=1,d[g]=b/a,d[g+1]=1-y/s,m+=3,g+=2}m=0;var w=new(65535<p.length/3?Uint32Array:Uint16Array)(a*s*6);for(y=0;y<s;y++)for(b=0;b<a;b++){var _=b+l*y,M=b+l*(y+1),S=b+1+l*(y+1),E=b+1+l*y;w[m]=_,w[m+1]=M,w[m+2]=E,w[m+3]=M,w[m+4]=S,w[m+5]=E,m+=6}this.addAttribute("index",new Xt.BufferAttribute(w,1)),this.addAttribute("position",new Xt.BufferAttribute(p,3)),this.addAttribute("normal",new Xt.BufferAttribute(f,3)),this.addAttribute("uv",new Xt.BufferAttribute(d,2))},Xt.PlaneBufferGeometry.prototype=Object.create(Xt.BufferGeometry.prototype),Xt.PlaneBufferGeometry.prototype.constructor=Xt.PlaneBufferGeometry,Xt.RingGeometry=function(e,t,n,r,i,o){Xt.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||0,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l=[],u=e,c=(t-e)/(r=void 0!==r?Math.max(1,r):8);for(a=0;a<r+1;a++){for(s=0;s<n+1;s++){var h=new Xt.Vector3,p=i+s/n*o;h.x=u*Math.cos(p),h.y=u*Math.sin(p),this.vertices.push(h),l.push(new Xt.Vector2((h.x/t+1)/2,(h.y/t+1)/2))}u+=c}var f=new Xt.Vector3(0,0,1);for(a=0;a<r;a++){var d=a*(n+1);for(s=0;s<n;s++){var m=p=s+d,g=p+n+1,y=p+n+2;this.faces.push(new Xt.Face3(m,g,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[y].clone()]),g=(m=p)+n+2,y=p+1,this.faces.push(new Xt.Face3(m,g,y,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[y].clone()])}}this.computeFaceNormals(),this.boundingSphere=new Xt.Sphere(new Xt.Vector3,u)},Xt.RingGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.RingGeometry.prototype.constructor=Xt.RingGeometry,Xt.SphereGeometry=function(e,t,n,r,i,o,a){Xt.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,u=[],c=[];for(l=0;l<=n;l++){var h=[],p=[];for(s=0;s<=t;s++){var f=s/t,d=l/n,m=new Xt.Vector3;m.x=-e*Math.cos(r+f*i)*Math.sin(o+d*a),m.y=e*Math.cos(o+d*a),m.z=e*Math.sin(r+f*i)*Math.sin(o+d*a),this.vertices.push(m),h.push(this.vertices.length-1),p.push(new Xt.Vector2(f,1-d))}u.push(h),c.push(p)}for(l=0;l<n;l++)for(s=0;s<t;s++){var g=u[l][s+1],y=u[l][s],v=u[l+1][s],b=u[l+1][s+1],x=this.vertices[g].clone().normalize(),w=this.vertices[y].clone().normalize(),_=this.vertices[v].clone().normalize(),M=this.vertices[b].clone().normalize(),S=c[l][s+1].clone(),E=c[l][s].clone(),T=c[l+1][s].clone(),C=c[l+1][s+1].clone();Math.abs(this.vertices[g].y)===e?(S.x=(S.x+E.x)/2,this.faces.push(new Xt.Face3(g,v,b,[x,_,M])),this.faceVertexUvs[0].push([S,T,C])):Math.abs(this.vertices[v].y)===e?(T.x=(T.x+C.x)/2,this.faces.push(new Xt.Face3(g,y,v,[x,w,_])),this.faceVertexUvs[0].push([S,E,T])):(this.faces.push(new Xt.Face3(g,y,b,[x,w,M])),this.faceVertexUvs[0].push([S,E,C]),this.faces.push(new Xt.Face3(y,v,b,[w.clone(),_,M.clone()])),this.faceVertexUvs[0].push([E.clone(),T,C.clone()]))}this.computeFaceNormals(),this.boundingSphere=new Xt.Sphere(new Xt.Vector3,e)},Xt.SphereGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.SphereGeometry.prototype.constructor=Xt.SphereGeometry,Xt.TextGeometry=function(e,t){t=t||{};var n=Xt.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Xt.ExtrudeGeometry.call(this,n,t),this.type="TextGeometry"},Xt.TextGeometry.prototype=Object.create(Xt.ExtrudeGeometry.prototype),Xt.TextGeometry.prototype.constructor=Xt.TextGeometry,Xt.TorusGeometry=function(e,t,n,r,i){Xt.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=n||8,r=r||6,i=i||2*Math.PI;for(var o=new Xt.Vector3,a=[],s=[],l=0;l<=n;l++)for(var u=0;u<=r;u++){var c=u/r*i,h=l/n*Math.PI*2;o.x=e*Math.cos(c),o.y=e*Math.sin(c);var p=new Xt.Vector3;p.x=(e+t*Math.cos(h))*Math.cos(c),p.y=(e+t*Math.cos(h))*Math.sin(c),p.z=t*Math.sin(h),this.vertices.push(p),a.push(new Xt.Vector2(u/r,l/n)),s.push(p.clone().sub(o).normalize())}for(l=1;l<=n;l++)for(u=1;u<=r;u++){var f=(r+1)*l+u-1,d=(r+1)*(l-1)+u-1,m=(r+1)*(l-1)+u,g=(r+1)*l+u,y=new Xt.Face3(f,d,g,[s[f].clone(),s[d].clone(),s[g].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([a[f].clone(),a[d].clone(),a[g].clone()]),y=new Xt.Face3(d,m,g,[s[d].clone(),s[m].clone(),s[g].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([a[d].clone(),a[m].clone(),a[g].clone()])}this.computeFaceNormals()},Xt.TorusGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.TorusGeometry.prototype.constructor=Xt.TorusGeometry,Xt.TorusKnotGeometry=function(e,t,n,r,i,o,a){Xt.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:o,heightScale:a},e=e||100,t=t||40,n=n||64,r=r||8,i=i||2,o=o||3,a=a||1;for(var s=new Array(n),l=new Xt.Vector3,u=new Xt.Vector3,c=new Xt.Vector3,h=0;h<n;++h){s[h]=new Array(r);var p=h/n*2*i*Math.PI,f=L(p,o,i,e,a),d=L(p+.01,o,i,e,a);l.subVectors(d,f),u.addVectors(d,f),c.crossVectors(l,u),u.crossVectors(c,l),c.normalize(),u.normalize();for(var m=0;m<r;++m){var g=m/r*2*Math.PI,y=-t*Math.cos(g),v=t*Math.sin(g),b=new Xt.Vector3;b.x=f.x+y*u.x+v*c.x,b.y=f.y+y*u.y+v*c.y,b.z=f.z+y*u.z+v*c.z,s[h][m]=this.vertices.push(b)-1}}for(h=0;h<n;++h)for(m=0;m<r;++m){var x=(h+1)%n,w=(m+1)%r,_=s[h][m],M=s[x][m],S=s[x][w],E=s[h][w],T=new Xt.Vector2(h/n,m/r),C=new Xt.Vector2((h+1)/n,m/r),A=new Xt.Vector2((h+1)/n,(m+1)/r),P=new Xt.Vector2(h/n,(m+1)/r);this.faces.push(new Xt.Face3(_,M,E)),this.faceVertexUvs[0].push([T,C,P]),this.faces.push(new Xt.Face3(M,S,E)),this.faceVertexUvs[0].push([C.clone(),A,P.clone()])}function L(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=t/n*e,l=Math.cos(s),u=r*(2+l)*.5*o,c=r*(2+l)*a*.5,h=i*r*Math.sin(s)*.5;return new Xt.Vector3(u,c,h)}this.computeFaceNormals(),this.computeVertexNormals()},Xt.TorusKnotGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.TorusKnotGeometry.prototype.constructor=Xt.TorusKnotGeometry,Xt.TubeGeometry=function(e,t,n,r,i,o){Xt.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1,o=o||Xt.TubeGeometry.NoTaper;var a,s,l,u,c,h,p,f,d,m,g,y,v,b,x,w,_,M,S,E,T,C,A,P=[],L=t+1,R=new Xt.Vector3,k=new Xt.TubeGeometry.FrenetFrames(e,t,i),O=k.tangents,F=k.normals,U=k.binormals;for(this.tangents=O,this.normals=F,this.binormals=U,d=0;d<L;d++)for(P[d]=[],l=d/(L-1),f=e.getPointAt(l),O[d],a=F[d],s=U[d],c=n*o(l),m=0;m<r;m++)u=m/r*2*Math.PI,h=-c*Math.cos(u),p=c*Math.sin(u),R.copy(f),R.x+=h*a.x+p*s.x,R.y+=h*a.y+p*s.y,R.z+=h*a.z+p*s.z,P[d][m]=(T=R.x,C=R.y,A=R.z,this.vertices.push(new Xt.Vector3(T,C,A))-1);for(d=0;d<t;d++)for(m=0;m<r;m++)g=i?(d+1)%t:d+1,y=(m+1)%r,v=P[d][m],b=P[g][m],x=P[g][y],w=P[d][y],_=new Xt.Vector2(d/t,m/r),M=new Xt.Vector2((d+1)/t,m/r),S=new Xt.Vector2((d+1)/t,(m+1)/r),E=new Xt.Vector2(d/t,(m+1)/r),this.faces.push(new Xt.Face3(v,b,w)),this.faceVertexUvs[0].push([_,M,E]),this.faces.push(new Xt.Face3(b,x,w)),this.faceVertexUvs[0].push([M.clone(),S,E.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},Xt.TubeGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.TubeGeometry.prototype.constructor=Xt.TubeGeometry,Xt.TubeGeometry.NoTaper=function(e){return 1},Xt.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},Xt.TubeGeometry.FrenetFrames=function(e,t,n){var r,i,o,a,s,l,u,c=new Xt.Vector3,h=[],p=[],f=[],d=new Xt.Vector3,m=new Xt.Matrix4,g=t+1;for(this.tangents=h,this.normals=p,this.binormals=f,l=0;l<g;l++)u=l/(g-1),h[l]=e.getTangentAt(u),h[l].normalize();for(p[0]=new Xt.Vector3,f[0]=new Xt.Vector3,i=Number.MAX_VALUE,o=Math.abs(h[0].x),a=Math.abs(h[0].y),s=Math.abs(h[0].z),o<=i&&(i=o,c.set(1,0,0)),a<=i&&(i=a,c.set(0,1,0)),s<=i&&c.set(0,0,1),d.crossVectors(h[0],c).normalize(),p[0].crossVectors(h[0],d),f[0].crossVectors(h[0],p[0]),l=1;l<g;l++)p[l]=p[l-1].clone(),f[l]=f[l-1].clone(),d.crossVectors(h[l-1],h[l]),1e-4<d.length()&&(d.normalize(),r=Math.acos(Xt.Math.clamp(h[l-1].dot(h[l]),-1,1)),p[l].applyMatrix4(m.makeRotationAxis(d,r))),f[l].crossVectors(h[l],p[l]);if(n)for(r=Math.acos(Xt.Math.clamp(p[0].dot(p[g-1]),-1,1)),r/=g-1,0<h[0].dot(d.crossVectors(p[0],p[g-1]))&&(r=-r),l=1;l<g;l++)p[l].applyMatrix4(m.makeRotationAxis(h[l],r*l)),f[l].crossVectors(h[l],p[l])},Xt.PolyhedronGeometry=function(e,t,n,r){Xt.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;for(var i=this,o=0,a=e.length;o<a;o+=3)x(new Xt.Vector3(e[o],e[o+1],e[o+2]));var s=this.vertices,l=[],u=(o=0,0);for(a=t.length;o<a;o+=3,u++){var c=s[t[o]],h=s[t[o+1]],p=s[t[o+2]];l[u]=new Xt.Face3(c.index,h.index,p.index,[c.clone(),h.clone(),p.clone()])}var f=new Xt.Vector3;for(o=0,a=l.length;o<a;o++)_(l[o],r);for(o=0,a=this.faceVertexUvs[0].length;o<a;o++){var d=this.faceVertexUvs[0][o],m=d[0].x,g=d[1].x,y=d[2].x,v=Math.max(m,Math.max(g,y)),b=Math.min(m,Math.min(g,y));.9<v&&b<.1&&(m<.2&&(d[0].x+=1),g<.2&&(d[1].x+=1),y<.2&&(d[2].x+=1))}for(o=0,a=this.vertices.length;o<a;o++)this.vertices[o].multiplyScalar(n);function x(e){var t=e.normalize().clone();t.index=i.vertices.push(t)-1;var n,r=M(e)/2/Math.PI+.5,o=(n=e,Math.atan2(-n.y,Math.sqrt(n.x*n.x+n.z*n.z))/Math.PI+.5);return t.uv=new Xt.Vector2(r,1-o),t}function w(e,t,n){var r=new Xt.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);i.faces.push(r),f.copy(e).add(t).add(n).divideScalar(3);var o=M(f);i.faceVertexUvs[0].push([S(e.uv,e,o),S(t.uv,t,o),S(n.uv,n,o)])}function _(e,t){for(var n=Math.pow(2,t),r=x(i.vertices[e.a]),o=x(i.vertices[e.b]),a=x(i.vertices[e.c]),s=[],l=0;l<=n;l++){s[l]=[];for(var u=x(r.clone().lerp(a,l/n)),c=x(o.clone().lerp(a,l/n)),h=n-l,p=0;p<=h;p++)s[l][p]=0==p&&l==n?u:x(u.clone().lerp(c,p/h))}for(l=0;l<n;l++)for(p=0;p<2*(n-l)-1;p++){var f=Math.floor(p/2);p%2==0?w(s[l][f+1],s[l+1][f],s[l][f]):w(s[l][f+1],s[l+1][f+1],s[l+1][f])}}function M(e){return Math.atan2(e.z,-e.x)}function S(e,t,n){return n<0&&1===e.x&&(e=new Xt.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new Xt.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new Xt.Sphere(new Xt.Vector3,n)},Xt.PolyhedronGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.PolyhedronGeometry.prototype.constructor=Xt.PolyhedronGeometry,Xt.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Xt.PolyhedronGeometry.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)},Xt.DodecahedronGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.DodecahedronGeometry.prototype.constructor=Xt.DodecahedronGeometry,Xt.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Xt.PolyhedronGeometry.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},Xt.IcosahedronGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.IcosahedronGeometry.prototype.constructor=Xt.IcosahedronGeometry,Xt.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t},Xt.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},Xt.OctahedronGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.OctahedronGeometry.prototype.constructor=Xt.OctahedronGeometry,Xt.TetrahedronGeometry=function(e,t){Xt.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},Xt.TetrahedronGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.TetrahedronGeometry.prototype.constructor=Xt.TetrahedronGeometry,Xt.ParametricGeometry=function(e,t,n){Xt.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,a,s,l,u,c,h,p,f,d,m=this.vertices,g=this.faces,y=this.faceVertexUvs[0],v=t+1;for(r=0;r<=n;r++)for(a=r/n,i=0;i<=t;i++)o=e(i/t,a),m.push(o);for(r=0;r<n;r++)for(i=0;i<t;i++)l=(s=r*v+i)+1,u=(r+1)*v+i+1,c=(r+1)*v+i,h=new Xt.Vector2(i/t,r/n),p=new Xt.Vector2((i+1)/t,r/n),f=new Xt.Vector2((i+1)/t,(r+1)/n),d=new Xt.Vector2(i/t,(r+1)/n),g.push(new Xt.Face3(s,l,c)),y.push([h,p,d]),g.push(new Xt.Face3(l,u,c)),y.push([p.clone(),f,d.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},Xt.ParametricGeometry.prototype=Object.create(Xt.Geometry.prototype),Xt.ParametricGeometry.prototype.constructor=Xt.ParametricGeometry,Xt.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new Xt.BufferGeometry;r.addAttribute("position",new Xt.BufferAttribute(t,3)),r.addAttribute("color",new Xt.BufferAttribute(n,3));var i=new Xt.LineBasicMaterial({vertexColors:Xt.VertexColors});Xt.Line.call(this,r,i,Xt.LinePieces)},Xt.AxisHelper.prototype=Object.create(Xt.Line.prototype),Xt.AxisHelper.prototype.constructor=Xt.AxisHelper,Xt.ArrowHelper=function(){var e=new Xt.Geometry;e.vertices.push(new Xt.Vector3(0,0,0),new Xt.Vector3(0,1,0));var t=new Xt.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new Xt.Matrix4).makeTranslation(0,-.5,0)),function(n,r,i,o,a,s){Xt.Object3D.call(this),void 0===o&&(o=16776960),void 0===i&&(i=1),void 0===a&&(a=.2*i),void 0===s&&(s=.2*a),this.position.copy(r),this.line=new Xt.Line(e,new Xt.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xt.Mesh(t,new Xt.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,a,s)}}(),Xt.ArrowHelper.prototype=Object.create(Xt.Object3D.prototype),Xt.ArrowHelper.prototype.constructor=Xt.ArrowHelper,Xt.ArrowHelper.prototype.setDirection=(Rt=new Xt.Vector3,function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Rt.set(e.z,0,-e.x).normalize(),Lt=Math.acos(e.y),this.quaternion.setFromAxisAngle(Rt,Lt))}),Xt.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,e-t,1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Xt.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Xt.BoxHelper=function(e){var t=new Xt.BufferGeometry;t.addAttribute("position",new Xt.BufferAttribute(new Float32Array(72),3)),Xt.Line.call(this,t,new Xt.LineBasicMaterial({color:16776960}),Xt.LinePieces),void 0!==e&&this.update(e)},Xt.BoxHelper.prototype=Object.create(Xt.Line.prototype),Xt.BoxHelper.prototype.constructor=Xt.BoxHelper,Xt.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var n=t.boundingBox.min,r=t.boundingBox.max,i=this.geometry.attributes.position.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=n.x,i[4]=r.y,i[5]=r.z,i[6]=n.x,i[7]=r.y,i[8]=r.z,i[9]=n.x,i[10]=n.y,i[11]=r.z,i[12]=n.x,i[13]=n.y,i[14]=r.z,i[15]=r.x,i[16]=n.y,i[17]=r.z,i[18]=r.x,i[19]=n.y,i[20]=r.z,i[21]=r.x,i[22]=r.y,i[23]=r.z,i[24]=r.x,i[25]=r.y,i[26]=n.z,i[27]=n.x,i[28]=r.y,i[29]=n.z,i[30]=n.x,i[31]=r.y,i[32]=n.z,i[33]=n.x,i[34]=n.y,i[35]=n.z,i[36]=n.x,i[37]=n.y,i[38]=n.z,i[39]=r.x,i[40]=n.y,i[41]=n.z,i[42]=r.x,i[43]=n.y,i[44]=n.z,i[45]=r.x,i[46]=r.y,i[47]=n.z,i[48]=r.x,i[49]=r.y,i[50]=r.z,i[51]=r.x,i[52]=r.y,i[53]=n.z,i[54]=n.x,i[55]=r.y,i[56]=r.z,i[57]=n.x,i[58]=r.y,i[59]=n.z,i[60]=n.x,i[61]=n.y,i[62]=r.z,i[63]=n.x,i[64]=n.y,i[65]=n.z,i[66]=r.x,i[67]=n.y,i[68]=r.z,i[69]=r.x,i[70]=n.y,i[71]=n.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},Xt.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new Xt.Box3,Xt.Mesh.call(this,new Xt.BoxGeometry(1,1,1),new Xt.MeshBasicMaterial({color:n,wireframe:!0}))},Xt.BoundingBoxHelper.prototype=Object.create(Xt.Mesh.prototype),Xt.BoundingBoxHelper.prototype.constructor=Xt.BoundingBoxHelper,Xt.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},Xt.CameraHelper=function(e){var t=new Xt.Geometry,n=new Xt.LineBasicMaterial({color:16777215,vertexColors:Xt.FaceColors}),r={},i=16755200,o=16711680,a=3355443;function s(e,t,n){l(e,n),l(t,n)}function l(e,n){t.vertices.push(new Xt.Vector3),t.colors.push(new Xt.Color(n)),void 0===r[e]&&(r[e]=[]),r[e].push(t.vertices.length-1)}s("n1","n2",i),s("n2","n4",i),s("n4","n3",i),s("n3","n1",i),s("f1","f2",i),s("f2","f4",i),s("f4","f3",i),s("f3","f1",i),s("n1","f1",i),s("n2","f2",i),s("n3","f3",i),s("n4","f4",i),s("p","n1",o),s("p","n2",o),s("p","n3",o),s("p","n4",o),s("u1","u2",43775),s("u2","u3",43775),s("u3","u1",43775),s("c","t",16777215),s("p","c",a),s("cn1","cn2",a),s("cn3","cn4",a),s("cf1","cf2",a),s("cf3","cf4",a),Xt.Line.call(this,t,n,Xt.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update()},Xt.CameraHelper.prototype=Object.create(Xt.Line.prototype),Xt.CameraHelper.prototype.constructor=Xt.CameraHelper,Xt.CameraHelper.prototype.update=(Ft=new Xt.Vector3,Ut=new Xt.Camera,Dt=function(e,t,n,r){Ft.set(t,n,r).unproject(Ut);var i=Ot[e];if(void 0!==i)for(var o=0,a=i.length;o<a;o++)kt.vertices[i[o]].copy(Ft)},function(){kt=this.geometry,Ot=this.pointMap,Ut.projectionMatrix.copy(this.camera.projectionMatrix),Dt("c",0,0,-1),Dt("t",0,0,1),Dt("n1",-1,-1,-1),Dt("n2",1,-1,-1),Dt("n3",-1,1,-1),Dt("n4",1,1,-1),Dt("f1",-1,-1,1),Dt("f2",1,-1,1),Dt("f3",-1,1,1),Dt("f4",1,1,1),Dt("u1",.7,1.1,-1),Dt("u2",-.7,1.1,-1),Dt("u3",0,2,-1),Dt("cf1",-1,0,1),Dt("cf2",1,0,1),Dt("cf3",0,-1,1),Dt("cf4",0,1,1),Dt("cn1",-1,0,-1),Dt("cn2",1,0,-1),Dt("cn3",0,-1,-1),Dt("cn4",0,1,-1),kt.verticesNeedUpdate=!0}),Xt.DirectionalLightHelper=function(e,t){Xt.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new Xt.Geometry;n.vertices.push(new Xt.Vector3(-t,t,0),new Xt.Vector3(t,t,0),new Xt.Vector3(t,-t,0),new Xt.Vector3(-t,-t,0),new Xt.Vector3(-t,t,0));var r=new Xt.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new Xt.Line(n,r),this.add(this.lightPlane),(n=new Xt.Geometry).vertices.push(new Xt.Vector3,new Xt.Vector3),(r=new Xt.LineBasicMaterial({fog:!1})).color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new Xt.Line(n,r),this.add(this.targetLine),this.update()},Xt.DirectionalLightHelper.prototype=Object.create(Xt.Object3D.prototype),Xt.DirectionalLightHelper.prototype.constructor=Xt.DirectionalLightHelper,Xt.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Xt.DirectionalLightHelper.prototype.update=(Nt=new Xt.Vector3,Bt=new Xt.Vector3,zt=new Xt.Vector3,function(){Nt.setFromMatrixPosition(this.light.matrixWorld),Bt.setFromMatrixPosition(this.light.target.matrixWorld),zt.subVectors(Bt,Nt),this.lightPlane.lookAt(zt),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(zt),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}),Xt.EdgesHelper=function(e,t,n){var r=void 0!==t?t:16777215;n=void 0!==n?n:1;var i,o=Math.cos(Xt.Math.degToRad(n)),a=[0,0],s={},l=function(e,t){return e-t},u=["a","b","c"],c=new Xt.BufferGeometry;e.geometry instanceof Xt.BufferGeometry?(i=new Xt.Geometry).fromBufferGeometry(e.geometry):i=e.geometry.clone(),i.mergeVertices(),i.computeFaceNormals();for(var h=i.vertices,p=i.faces,f=0,d=0,m=p.length;d<m;d++)for(var g=p[d],y=0;y<3;y++)a[0]=g[u[y]],a[1]=g[u[(y+1)%3]],a.sort(l),void 0===s[x=a.toString()]?(s[x]={vert1:a[0],vert2:a[1],face1:d,face2:void 0},f++):s[x].face2=d;var v=new Float32Array(2*f*3),b=0;for(var x in s){var w=s[x];if(void 0===w.face2||p[w.face1].normal.dot(p[w.face2].normal)<=o){var _=h[w.vert1];v[b++]=_.x,v[b++]=_.y,v[b++]=_.z,_=h[w.vert2],v[b++]=_.x,v[b++]=_.y,v[b++]=_.z}}c.addAttribute("position",new Xt.BufferAttribute(v,3)),Xt.Line.call(this,c,new Xt.LineBasicMaterial({color:r}),Xt.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},Xt.EdgesHelper.prototype=Object.create(Xt.Line.prototype),Xt.EdgesHelper.prototype.constructor=Xt.EdgesHelper,Xt.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=new Xt.Geometry,s=0,l=this.object.geometry.faces.length;s<l;s++)a.vertices.push(new Xt.Vector3,new Xt.Vector3);Xt.Line.call(this,a,new Xt.LineBasicMaterial({color:i,linewidth:o}),Xt.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new Xt.Matrix3,this.update()},Xt.FaceNormalsHelper.prototype=Object.create(Xt.Line.prototype),Xt.FaceNormalsHelper.prototype.constructor=Xt.FaceNormalsHelper,Xt.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,n=t.geometry.vertices,r=t.geometry.faces,i=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=0,a=0,s=r.length;o<s;o++,a+=2){var l=r[o];e[a].copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(i),e[a+1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])}return this.geometry.verticesNeedUpdate=!0,this},Xt.GridHelper=function(e,t){var n=new Xt.Geometry,r=new Xt.LineBasicMaterial({vertexColors:Xt.VertexColors});this.color1=new Xt.Color(4473924),this.color2=new Xt.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new Xt.Vector3(-e,0,i),new Xt.Vector3(e,0,i),new Xt.Vector3(i,0,-e),new Xt.Vector3(i,0,e));var o=0===i?this.color1:this.color2;n.colors.push(o,o,o,o)}Xt.Line.call(this,n,r,Xt.LinePieces)},Xt.GridHelper.prototype=Object.create(Xt.Line.prototype),Xt.GridHelper.prototype.constructor=Xt.GridHelper,Xt.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},Xt.HemisphereLightHelper=function(e,t){Xt.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new Xt.Color,new Xt.Color];var n=new Xt.SphereGeometry(t,4,2);n.applyMatrix((new Xt.Matrix4).makeRotationX(-Math.PI/2));for(var r=0;r<8;r++)n.faces[r].color=this.colors[r<4?0:1];var i=new Xt.MeshBasicMaterial({vertexColors:Xt.FaceColors,wireframe:!0});this.lightSphere=new Xt.Mesh(n,i),this.add(this.lightSphere),this.update()},Xt.HemisphereLightHelper.prototype=Object.create(Xt.Object3D.prototype),Xt.HemisphereLightHelper.prototype.constructor=Xt.HemisphereLightHelper,Xt.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},Xt.HemisphereLightHelper.prototype.update=(Vt=new Xt.Vector3,function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(Vt.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}),Xt.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Xt.SphereGeometry(t,4,2),r=new Xt.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),Xt.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},Xt.PointLightHelper.prototype=Object.create(Xt.Mesh.prototype),Xt.PointLightHelper.prototype.constructor=Xt.PointLightHelper,Xt.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xt.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Xt.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new Xt.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof Xt.Bone&&(t.vertices.push(new Xt.Vector3),t.vertices.push(new Xt.Vector3),t.colors.push(new Xt.Color(0,0,1)),t.colors.push(new Xt.Color(0,1,0)));var r=new Xt.LineBasicMaterial({vertexColors:Xt.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});Xt.Line.call(this,t,r,Xt.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},Xt.SkeletonHelper.prototype=Object.create(Xt.Line.prototype),Xt.SkeletonHelper.prototype.constructor=Xt.SkeletonHelper,Xt.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof Xt.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},Xt.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new Xt.Matrix4).getInverse(this.root.matrixWorld),n=new Xt.Matrix4,r=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent instanceof Xt.Bone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},Xt.SpotLightHelper=function(e){Xt.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new Xt.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new Xt.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new Xt.Matrix4).makeRotationX(-Math.PI/2));var n=new Xt.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new Xt.Mesh(t,n),this.add(this.cone),this.update()},Xt.SpotLightHelper.prototype=Object.create(Xt.Object3D.prototype),Xt.SpotLightHelper.prototype.constructor=Xt.SpotLightHelper,Xt.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Xt.SpotLightHelper.prototype.update=(It=new Xt.Vector3,jt=new Xt.Vector3,function(){var e=this.light.distance?this.light.distance:1e4,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),It.setFromMatrixPosition(this.light.matrixWorld),jt.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jt.sub(It)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}),Xt.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=new Xt.Geometry,s=e.geometry.faces,l=0,u=s.length;l<u;l++)for(var c=0,h=s[l].vertexNormals.length;c<h;c++)a.vertices.push(new Xt.Vector3,new Xt.Vector3);Xt.Line.call(this,a,new Xt.LineBasicMaterial({color:i,linewidth:o}),Xt.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new Xt.Matrix3,this.update()},Xt.VertexNormalsHelper.prototype=Object.create(Xt.Line.prototype),Xt.VertexNormalsHelper.prototype.constructor=Xt.VertexNormalsHelper,Xt.VertexNormalsHelper.prototype.update=(Ht=new Xt.Vector3,function(e){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=i.length;s<l;s++)for(var u=i[s],c=0,h=u.vertexNormals.length;c<h;c++){var p=r[u[t[c]]],f=u.vertexNormals[c];n[a].copy(p).applyMatrix4(o),Ht.copy(f).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),Ht.add(n[a]),n[a+=1].copy(Ht),a+=1}return this.geometry.verticesNeedUpdate=!0,this}),Xt.VertexTangentsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==n?n:255,o=void 0!==r?r:1,a=new Xt.Geometry,s=e.geometry.faces,l=0,u=s.length;l<u;l++)for(var c=0,h=s[l].vertexTangents.length;c<h;c++)a.vertices.push(new Xt.Vector3),a.vertices.push(new Xt.Vector3);Xt.Line.call(this,a,new Xt.LineBasicMaterial({color:i,linewidth:o}),Xt.LinePieces),this.matrixAutoUpdate=!1,this.update()},Xt.VertexTangentsHelper.prototype=Object.create(Xt.Line.prototype),Xt.VertexTangentsHelper.prototype.constructor=Xt.VertexTangentsHelper,Xt.VertexTangentsHelper.prototype.update=(Wt=new Xt.Vector3,function(e){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,o=this.object.matrixWorld,a=0,s=0,l=i.length;s<l;s++)for(var u=i[s],c=0,h=u.vertexTangents.length;c<h;c++){var p=r[u[t[c]]],f=u.vertexTangents[c];n[a].copy(p).applyMatrix4(o),Wt.copy(f).transformDirection(o).multiplyScalar(this.size),Wt.add(n[a]),n[a+=1].copy(Wt),a+=1}return this.geometry.verticesNeedUpdate=!0,this}),Xt.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],i={},o=function(e,t){return e-t},a=["a","b","c"],s=new Xt.BufferGeometry;if(e.geometry instanceof Xt.Geometry){for(var l=e.geometry.vertices,u=e.geometry.faces,c=0,h=new Uint32Array(6*u.length),p=0,f=u.length;p<f;p++)for(var d=u[p],m=0;m<3;m++)r[0]=d[a[m]],r[1]=d[a[(m+1)%3]],r.sort(o),void 0===i[T=r.toString()]&&(h[2*c]=r[0],h[2*c+1]=r[1],i[T]=!0,c++);var g=new Float32Array(2*c*3);for(p=0,f=c;p<f;p++)for(m=0;m<2;m++){var y=l[h[2*p+m]];g[0+(S=6*p+3*m)]=y.x,g[S+1]=y.y,g[S+2]=y.z}s.addAttribute("position",new Xt.BufferAttribute(g,3))}else if(e.geometry instanceof Xt.BufferGeometry)if(void 0!==e.geometry.attributes.index){l=e.geometry.attributes.position.array;var v=e.geometry.attributes.index.array,b=e.geometry.drawcalls;c=0,0===b.length&&(b=[{count:v.length,index:0,start:0}]),h=new Uint32Array(2*v.length);for(var x=0,w=b.length;x<w;++x)for(var _=b[x].start,M=b[x].count,S=b[x].index,E=(p=_,_+M);p<E;p+=3)for(m=0;m<3;m++){var T;r[0]=S+v[p+m],r[1]=S+v[p+(m+1)%3],r.sort(o),void 0===i[T=r.toString()]&&(h[2*c]=r[0],h[2*c+1]=r[1],i[T]=!0,c++)}for(g=new Float32Array(2*c*3),p=0,f=c;p<f;p++)for(m=0;m<2;m++){S=6*p+3*m;var C=3*h[2*p+m];g[S+0]=l[C],g[S+1]=l[C+1],g[S+2]=l[C+2]}s.addAttribute("position",new Xt.BufferAttribute(g,3))}else{var A=(c=(l=e.geometry.attributes.position.array).length/3)/3;for(g=new Float32Array(2*c*3),p=0,f=A;p<f;p++)for(m=0;m<3;m++){var P=9*p+3*m;g[0+(S=18*p+6*m)]=l[P],g[S+1]=l[P+1],g[S+2]=l[P+2],C=9*p+(m+1)%3*3,g[S+3]=l[C],g[S+4]=l[C+1],g[S+5]=l[C+2]}s.addAttribute("position",new Xt.BufferAttribute(g,3))}Xt.Line.call(this,s,new Xt.LineBasicMaterial({color:n}),Xt.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},Xt.WireframeHelper.prototype=Object.create(Xt.Line.prototype),Xt.WireframeHelper.prototype.constructor=Xt.WireframeHelper,Xt.ImmediateRenderObject=function(){Xt.Object3D.call(this),this.render=function(e){}},Xt.ImmediateRenderObject.prototype=Object.create(Xt.Object3D.prototype),Xt.ImmediateRenderObject.prototype.constructor=Xt.ImmediateRenderObject,Xt.MorphBlendMesh=function(e,t){Xt.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r=n-1,i=n/1;this.createAnimation("__default",0,r,i),this.setAnimationWeight("__default",1)},Xt.MorphBlendMesh.prototype=Object.create(Xt.Mesh.prototype),Xt.MorphBlendMesh.prototype.constructor=Xt.MorphBlendMesh,Xt.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){var i={startFrame:t,endFrame:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},Xt.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o].name.match(n);s&&1<s.length&&(r[l=s[1]]||(r[l]={start:1/0,end:-1/0}),o<(u=r[l]).start&&(u.start=o),o>u.end&&(u.end=o),t||(t=l))}for(var l in r){var u=r[l];this.createAnimation(l,u.start,u.end,e)}this.firstAnimation=t},Xt.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},Xt.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},Xt.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},Xt.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},Xt.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},Xt.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},Xt.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},Xt.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},Xt.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):Xt.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},Xt.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},Xt.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.startFrame+Xt.Math.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%i/i;r.directionBackwards&&(s=1-s),this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a}}},e.exports&&(t=e.exports=Xt),t.THREE=Xt},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",function(){return a}),n.d(t,"combineReducers",function(){return s}),n.d(t,"bindActionCreators",function(){return u}),n.d(t,"applyMiddleware",function(){return h}),n.d(t,"compose",function(){return c}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return o});var r=n(13),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,l=t,u=[],c=u,h=!1;function p(){c===u&&(c=u.slice())}function f(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),c.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var n=c.indexOf(e);c.splice(n,1)}}}function m(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,l=s(l,e)}finally{h=!1}for(var t=u=c,n=0;n<t.length;n++)(0,t[n])();return e}return m({type:o.INIT}),(i={dispatch:m,subscribe:d,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,m({type:o.REPLACE})}})[r.a]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e},i}function s(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,s,l=Object.keys(n);try{s=n,Object.keys(s).forEach(function(e){var t=s[e];if(void 0===t(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r,i,o,s=!1,u={},c=0;c<l.length;c++){var h=l[c],p=n[h],f=e[h],d=p(f,t);if(void 0===d){var m=(r=h,"Given "+((o=(i=t)&&i.type)&&'action "'+String(o)+'"'||"an action")+', reducer "'+r+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(m)}u[h]=d,s=s||d!==f}return s?u:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=l(a,t))}return r}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,i,o;r=e,o=n[i=t],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})}return e}({},n,{dispatch:r=c.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){var r=n(31);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],o=0;o<t.length;o++)i.push(e(t[o],n,r).source);return u(new RegExp("(?:"+i.join("|")+")",c(r)),n)}(t,n,i):(a=n,h(o(t,s=i),a,s));var a,s},e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r,o=[],a=0,s=0,u="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],p=n[1],f=n.index;if(u+=e.slice(s,f),s=f+h.length,p)u+=p[1];else{var d=e[s],m=n[2],g=n[3],y=n[4],v=n[5],b=n[6],x=n[7];u&&(o.push(u),u="");var w=null!=m&&null!=d&&d!==m,_="+"===b||"*"===b,M="?"===b||"*"===b,S=n[2]||c,E=y||v;o.push({name:g||a++,prefix:m||"",delimiter:S,optional:M,repeat:_,partial:w,asterisk:!!x,pattern:E?(r=E,r.replace(/([=!:$\/()])/g,"\\$1")):x?".*":"[^"+l(S)+"]+?"})}}return s<e.length&&(u+=e.substr(s)),u&&o.push(u),o}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",s=n||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var h,p=s[c.name];if(null==p){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<p.length;f++){if(h=l(p[f]),!t[u].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(p).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):l(p),!t[u].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');o+=c.prefix+h}}else o+=c}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e,t){return e.keys=t,e}function c(e){return e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var h=e[s];if("string"==typeof h)a+=l(h);else{var p=l(h.prefix),f="(?:"+h.pattern+")";t.push(h),h.repeat&&(f+="(?:"+p+f+")*"),a+=f=h.optional?h.partial?p+"("+f+")?":"(?:"+p+"("+f+"))?":p+"("+f+")"}}var d=l(n.delimiter||"/"),m=a.slice(-d.length)===d;return i||(a=(m?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+d+"|$)",u(new RegExp("^"+a,c(n)),t)}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(26)},function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){"use strict";(function(e,r){var i,o=n(23);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(15),n(33)(e))},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TOGGLE_NAV="core/redux/common/TOGGLE_NAV",t.TOGGLE_THEME="core/redux/common/TOGGLE_THEME"},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=s(n(1)),o=s(n(11)),a=n(18);function s(e){return e&&e.__esModule?e:{default:e}}n(19);var l="unmounted";t.UNMOUNTED=l;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var h="entered";t.ENTERED=h;var p="exiting";t.EXITING=p;var f=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=u,r.appearStatus=c):i=h:i=t.unmountOnExit||t.mountOnEnter?l:u,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==h&&(t=c):n!==c&&n!==h||(t=p)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=r.appear),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();t||r?(this.props.onEnter(e,i),this.safeSetState({status:c},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:h},function(){n.props.onEntered(e,i)})})})):this.safeSetState({status:h},function(){n.props.onEntered(e)})},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:p},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:u},function(){t.props.onExited(e)})})})):this.safeSetState({status:u},function(){t.props.onExited(e)})},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function d(){}f.contextTypes={transitionGroup:r.object},f.childContextTypes={transitionGroup:function(){}},f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},f.UNMOUNTED=0,f.EXITED=1,f.ENTERING=2,f.ENTERED=3,f.EXITING=4;var m=(0,a.polyfill)(f);t.default=m},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",function(){return a}),o.__suppressDeprecationWarning=i.__suppressDeprecationWarning=r.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";t.__esModule=!0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},t.classNamesShape=t.timeoutsShape=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=i.default.oneOfType([i.default.number,i.default.shape({enter:i.default.number,exit:i.default.number}).isRequired]);t.timeoutsShape=o;var a=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,exit:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterDone:i.default.string,enterActive:i.default.string,exit:i.default.string,exitDone:i.default.string,exitActive:i.default.string})]);t.classNamesShape=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(0)),i=s(n(1)),o=n(18),a=n(53);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},h=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},o.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["component","childFactory"]),o=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var p=(0,o.polyfill)(h);t.default=p,e.exports=t.default},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,h){if("string"==typeof n)return t;if(c){var p=u(n);p&&p!==c&&e(t,p,h)}var f=a(n);s&&(f=f.concat(s(n)));for(var d=0;d<f.length;++d){var m=f[d];if(!(r[m]||i[m]||h&&h[m])){var g=l(n,m);try{o(t,m,g)}catch(e){}}}return t}},function(e,t,n){"use strict";var r=n(12),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={};a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var s=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"==typeof n)return t;if(p){var f=h(n);f&&f!==p&&e(t,f,r)}var d=l(n);u&&(d=d.concat(u(n)));for(var m=a[t.$$typeof]||i,g=a[n.$$typeof]||i,y=0;y<d.length;++y){var v=d[y];if(!(o[v]||r&&r[v]||g&&g[v]||m&&m[v])){var b=c(n,v);try{s(t,v,b)}catch(e){}}}return t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r,i=p(n(1)),o=p(n(11)),a=n(5),s=n(6),l=p(n(34)),u=p(n(40)),c=p(n(45)),h=p(n(63));function p(e){return e&&e.__esModule?e:{default:e}}n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(89),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&document.body.classList.add("isMobile"),"navigator"in window&&window.navigator.standalone&&document.body.classList.add("isStandalone"),"serviceWorker"in navigator&&(navigator.serviceWorker.register("service-worker.js"),console.log("Service worker registered")),(0,h.default)(document),r=i.default.createElement(s.Provider,{store:l.default},i.default.createElement(a.BrowserRouter,null,i.default.createElement(u.default,null,i.default.createElement(c.default,null)))),o.default.render(r,document.getElementById("Root"))},function(e,t,n){"use strict";
/** @license React v16.6.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(14),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,void 0,void 0,void 0,void 0,void 0],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function w(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}function _(){}function M(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=w.prototype;var S=M.prototype=new _;S.constructor=M,r(S,w.prototype),S.isPureReactComponent=!0;var E={current:null,currentDispatcher:null},T=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:E.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var L=/\/+/g,R=[];function k(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,R.length<10&&R.push(e)}function F(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return r(i,t,""===n?"."+U(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+U(s=t[u],u);l+=e(s,c,r,i)}else if("function"==typeof(c=null===t||"object"!=typeof t?null:"function"==typeof(c=y&&t[y]||t["@@iterator"])?c:null))for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+U(s,u++),r,i);else"object"===s&&v("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return l}(e,"",t,n)}function U(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function D(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,n){var r,i,a=e.result,s=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,a,n,function(e){return e}):null!=e&&(P(e)&&(i=s+(!(r=e).key||t&&t.key===e.key?"":(""+e.key).replace(L,"$&/")+"/")+n,e={$$typeof:o,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),a.push(e))}function B(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(L,"$&/")+"/"),F(e,N,t=k(t,o,r,i)),O(t)}var z={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,D,t=k(null,null,t,n)),O(t)},count:function(e){return F(e,function(){return null},null)},toArray:function(e){var t=[];return B(e,t,null,function(e){return e}),t},only:function(e){return P(e)||v("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:M,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},Fragment:s,StrictMode:l,Suspense:d,createElement:A,cloneElement:function(e,t,n){null==e&&v("267",e);var i=void 0,a=r({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=E.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)T.call(t,i)&&!C.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1==(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var h=0;h<i;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.6.3",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:E,assign:r}};z.unstable_ConcurrentMode=p,z.unstable_Profiler=u;var V=z||{default:z};e.exports=V.default||V},function(e,t,n){"use strict";
/** @license React v16.6.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1),i=n(14),o=n(27);function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,void 0,void 0,void 0,void 0,void 0],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,l=null,u=!1,c=null,h={onError:function(e){s=!0,l=e}};function p(e,t,n,r,i,o,a,u,c){s=!1,l=null,function(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}.apply(h,arguments)}var f=null,d={};function m(){if(f)for(var e in d){var t=d[e],n=f.indexOf(e);if(-1<n||a("96",e),!y[n])for(var r in t.extractEvents||a("97",e),n=(y[n]=t).eventTypes){var i=void 0,o=n[r],s=t,l=r;v.hasOwnProperty(l)&&a("99",l);var u=(v[l]=o).phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&g(u[i],s,l);i=!0}else i=!!o.registrationName&&(g(o.registrationName,s,l),!0);i||a("98",r,e)}}}function g(e,t,n){b[e]&&a("100",e),b[e]=t,x[e]=t.eventTypes[n].dependencies}var y=[],v={},b={},x={},w=null,_=null,M=null;function S(e,t,n){var r=e.type||"unknown-event";e.currentTarget=M(n),function(e,t,n,r,i,o,h,f,d){if(p.apply(this,arguments),s){if(s){var m=l;s=!1,l=null}else a("198"),m=void 0;u||(u=!0,c=m)}}(r,t,void 0,e),e.currentTarget=null}function E(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function T(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var C=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)S(e,t[r],n[r]);else t&&S(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var P={injectEventPluginOrder:function(e){f&&a("101"),f=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];d.hasOwnProperty(t)&&d[t]===r||(d[t]&&a("102",t),d[t]=r,n=!0)}n&&m()}};function L(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&a("231",t,typeof n),n)}function R(e){if(null!==e&&(C=E(C,e)),e=C,C=null,e&&(T(e,A),C&&a("95"),u))throw e=c,u=!1,c=null,e}var k=Math.random().toString(36).slice(2),O="__reactInternalInstance$"+k,F="__reactEventHandlers$"+k;function U(e){if(e[O])return e[O];for(;!e[O];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[O]).tag||6===e.tag?e:null}function D(e){return!(e=e[O])||5!==e.tag&&6!==e.tag?null:e}function N(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function B(e){return e[F]||null}function z(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function V(e,t,n){(t=L(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function I(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=z(t);for(t=n.length;0<t--;)V(n[t],"captured",e);for(t=0;t<n.length;t++)V(n[t],"bubbled",e)}}function j(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=L(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function H(e){e&&e.dispatchConfig.registrationName&&j(e._targetInst,null,e)}function W(e){T(e,I)}var G=!("undefined"==typeof window||!window.document||!window.document.createElement);function X(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var q={animationend:X("Animation","AnimationEnd"),animationiteration:X("Animation","AnimationIteration"),animationstart:X("Animation","AnimationStart"),transitionend:X("Transition","TransitionEnd")},Y={},K={};function Q(e){if(Y[e])return Y[e];if(!q[e])return e;var t,n=q[e];for(t in n)if(n.hasOwnProperty(t)&&t in K)return Y[e]=n[t];return e}G&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);var Z=Q("animationend"),$=Q("animationiteration"),J=Q("animationstart"),ee=Q("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function oe(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function ae(){return!0}function se(){return!1}function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:se,this.isPropagationStopped=se,this}function ue(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function ce(e){e instanceof this||a("279"),e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=ue,e.release=ce}i(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),((n.prototype=o).constructor=n).Interface=i({},r.Interface,e),n.extend=r.extend,he(n),n},he(le);var pe=le.extend({data:null}),fe=le.extend({data:null}),de=[9,13,27,32],me=G&&"CompositionEvent"in window,ge=null;G&&"documentMode"in document&&(ge=document.documentMode);var ye=G&&"TextEvent"in window&&!ge,ve=G&&(!me||ge&&8<ge&&ge<=11),be=String.fromCharCode(32),xe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function _e(e,t){switch(e){case"keyup":return-1!==de.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Me(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Se=!1,Ee={eventTypes:xe,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(me)e:{switch(e){case"compositionstart":i=xe.compositionStart;break e;case"compositionend":i=xe.compositionEnd;break e;case"compositionupdate":i=xe.compositionUpdate;break e}i=void 0}else Se?_e(e,n)&&(i=xe.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=xe.compositionStart);return o=i?(ve&&"ko"!==n.locale&&(Se||i!==xe.compositionStart?i===xe.compositionEnd&&Se&&(o=oe()):(re="value"in(ne=r)?ne.value:ne.textContent,Se=!0)),i=pe.getPooled(i,t,n,r),o?i.data=o:null!==(o=Me(n))&&(i.data=o),W(i),i):null,(e=ye?function(e,t){switch(e){case"compositionend":return Me(t);case"keypress":return 32!==t.which?null:(we=!0,be);case"textInput":return(e=t.data)===be&&we?null:e;default:return null}}(e,n):function(e,t){if(Se)return"compositionend"===e||!me&&_e(e,t)?(e=oe(),ie=re=ne=null,Se=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=fe.getPooled(xe.beforeInput,t,n,r)).data=e,W(t)):t=null,null===o?t:null===t?o:[o,t]}},Te=null,Ce=null,Ae=null;function Pe(e){if(e=_(e)){"function"!=typeof Te&&a("280");var t=w(e.stateNode);Te(e.stateNode,e.type,t)}}function Le(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function ke(e,t){return e(t)}function Oe(e,t,n){return e(t,n)}function Fe(){}var Ue=!1;function De(e,t){if(Ue)return e(t);Ue=!0;try{return ke(e,t)}finally{Ue=!1,(null!==Ce||null!==Ae)&&(Fe(),Re())}}var Ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ne[e.type]:"textarea"===t}function ze(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ve(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ie(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function je(e){e._valueTracker||(e._valueTracker=function(e){var t=Ie(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ie(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var We=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ge=/^(.*)[\\\/]/,Xe="function"==typeof Symbol&&Symbol.for,qe=Xe?Symbol.for("react.element"):60103,Ye=Xe?Symbol.for("react.portal"):60106,Ke=Xe?Symbol.for("react.fragment"):60107,Qe=Xe?Symbol.for("react.strict_mode"):60108,Ze=Xe?Symbol.for("react.profiler"):60114,$e=Xe?Symbol.for("react.provider"):60109,Je=Xe?Symbol.for("react.context"):60110,et=Xe?Symbol.for("react.concurrent_mode"):60111,tt=Xe?Symbol.for("react.forward_ref"):60112,nt=Xe?Symbol.for("react.suspense"):60113,rt=Xe?Symbol.for("react.memo"):60115,it=Xe?Symbol.for("react.lazy"):60116,ot="function"==typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ke:return"Fragment";case Ye:return"Portal";case Ze:return"Profiler";case Qe:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Je:return"Context.Consumer";case $e:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var n=e._debugOwner,r=e._debugSource,i=st(e.type),o=null;n&&(o=st(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Ge,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break e;default:o=""}t+=o,e=e.return}while(e);return t}var ut=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ct=Object.prototype.hasOwnProperty,ht={},pt={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new ft(e,3,!0,e,null)}),["capture","download"].forEach(function(e){dt[e]=new ft(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){dt[e]=new ft(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){dt[e]=new ft(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function yt(e,t,n,r){var i,o=dt.hasOwnProperty(t)?dt[t]:null;(null!==o?0===o.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}(t,n,o,r)&&(n=null),r||null===o?(i=t,(ct.call(pt,i)||!ct.call(ht,i)&&(ut.test(i)?pt[i]=!0:!(ht[i]=!0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=vt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&yt(e,"checked",t,!1)}function _t(e,t){wt(e,t);var n=vt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?St(e,t.type,n):t.hasOwnProperty("defaultValue")&&St(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Mt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function St(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,gt);dt[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,gt);dt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,gt);dt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),dt.tabIndex=new ft("tabIndex",1,!1,"tabindex",null);var Et={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Tt(e,t,n){return(e=le.getPooled(Et.change,e,t,n)).type="change",Le(n),W(e),e}var Ct=null,At=null;function Pt(e){R(e)}function Lt(e){if(He(N(e)))return e}function Rt(e,t){if("change"===e)return t}var kt=!1;function Ot(){Ct&&(Ct.detachEvent("onpropertychange",Ft),At=Ct=null)}function Ft(e){"value"===e.propertyName&&Lt(At)&&De(Pt,e=Tt(At,e,ze(e)))}function Ut(e,t,n){"focus"===e?(Ot(),At=n,(Ct=t).attachEvent("onpropertychange",Ft)):"blur"===e&&Ot()}function Dt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Lt(At)}function Nt(e,t){if("click"===e)return Lt(t)}function Bt(e,t){if("input"===e||"change"===e)return Lt(t)}G&&(kt=Ve("input")&&(!document.documentMode||9<document.documentMode));var zt={eventTypes:Et,_isInputEventSupported:kt,extractEvents:function(e,t,n,r){var i=t?N(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Rt:Be(i)?kt?o=Bt:(o=Dt,a=Ut):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Nt),o&&(o=o(e,t)))return Tt(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&St(i,"number",i.value)}},Vt=le.extend({view:null,detail:null}),It={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=It[e])&&!!t[e]}function Ht(){return jt}var Wt=0,Gt=0,Xt=!1,qt=!1,Yt=Vt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ht,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,Xt?"mousemove"===e.type?e.screenX-t:0:(Xt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Gt;return Gt=e.screenY,qt?"mousemove"===e.type?e.screenY-t:0:(qt=!0,0)}}),Kt=Yt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zt={eventTypes:Qt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?U(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=Yt,s=Qt.mouseLeave,l=Qt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Kt,s=Qt.pointerLeave,l=Qt.pointerEnter,u="pointer");var c=null==o?i:N(o);if(i=null==t?i:N(t),(e=a.getPooled(s,o,n,r)).type=u+"leave",e.target=c,e.relatedTarget=i,(n=a.getPooled(l,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=c,r=t,o&&r)e:{for(i=r,u=0,a=t=o;a;a=z(a))u++;for(a=0,l=i;l;l=z(l))a++;for(;0<u-a;)t=z(t),u--;for(;0<a-u;)i=z(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=z(t),i=z(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=z(o);for(o=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)o.push(r),r=z(r);for(r=0;r<t.length;r++)j(t[r],"bubbled",e);for(r=o.length;0<r--;)j(o[r],"captured",n);return[e,n]}},$t=Object.prototype.hasOwnProperty;function Jt(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function en(e,t){if(Jt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!$t.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=Vt.extend({relatedTarget:null});function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=Vt.extend({key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ht,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pn=Yt.extend({dataTransfer:null}),fn=Vt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ht}),dn=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Yt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[Z,"animationEnd"],[$,"animationIteration"],[J,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],yn={},vn={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},yn[e]=t,vn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),gn.forEach(function(e){bn(e,!1)});var xn={eventTypes:yn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=vn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=vn[e];if(!i)return null;switch(e){case"keypress":if(0===ln(n))return null;case"keydown":case"keyup":e=hn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Yt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fn;break;case Z:case $:case J:e=on;break;case ee:e=dn;break;case"scroll":e=Vt;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Kt;break;default:e=le}return W(t=e.getPooled(i,t,n,r)),t}},wn=xn.isInteractiveTopLevelEventType,_n=[];function Mn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=U(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ze(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<y.length;s++){var l=y[s];l&&(l=l.extractEvents(r,t,o,i))&&(a=E(a,l))}R(a)}}var Sn=!0;function En(e,t){if(!t)return null;var n=(wn(e)?Cn:An).bind(null,e);t.addEventListener(e,n,!1)}function Tn(e,t){if(!t)return null;var n=(wn(e)?Cn:An).bind(null,e);t.addEventListener(e,n,!0)}function Cn(e,t){Oe(An,e,t)}function An(e,t){if(Sn){var n=ze(t);if(null===(n=U(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),_n.length){var r=_n.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{De(Mn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,_n.length<10&&_n.push(e)}}}var Pn={},Ln=0,Rn="_reactListenersID"+(""+Math.random()).slice(2);function kn(e){return Object.prototype.hasOwnProperty.call(e,Rn)||(e[Rn]=Ln++,Pn[e[Rn]]={}),Pn[e[Rn]]}function On(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Un(e,t){var n,r=Fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fn(r)}}function Dn(){for(var e=window,t=On();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=On(e.document)}return t}function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Bn=G&&"documentMode"in document&&document.documentMode<=11,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Vn=null,In=null,jn=null,Hn=!1;function Wn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hn||null==Vn||Vn!==On(n)?null:(n="selectionStart"in(n=Vn)&&Nn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},jn&&en(jn,n)?null:(jn=n,(e=le.getPooled(zn.select,In,e,t)).type="select",e.target=Vn,W(e),e))}var Gn={eventTypes:zn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=kn(o),i=x.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?N(t):window,e){case"focus":(Be(o)||"true"===o.contentEditable)&&(Vn=o,In=t,jn=null);break;case"blur":jn=In=Vn=null;break;case"mousedown":Hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hn=!1,Wn(n,r);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return Wn(n,r)}return null}};function Xn(e,t){var n,o;return e=i({children:void 0},t),n=t.children,o="",r.Children.forEach(n,function(e){null!=e&&(o+=e)}),(t=o)&&(e.children=t),e}function qn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Yn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(t.length<=1||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:vt(n)}}function Qn(e,t){var n=vt(t.value),r=vt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Zn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=B,_=D,M=N,P.injectEventPluginsByName({SimpleEventPlugin:xn,EnterLeaveEventPlugin:Zt,ChangeEventPlugin:zt,SelectEventPlugin:Gn,BeforeInputEventPlugin:Ee});var $n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Jn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Jn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var tr,nr=void 0,rr=(tr=function(e,t){if(e.namespaceURI!==$n.svg||"innerHTML"in e)e.innerHTML=t;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=nr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return tr(e,t)})}:tr);function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];function sr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function lr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=sr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(or).forEach(function(e){ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var ur=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cr(e,t){t&&(ur[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!=typeof t.style&&a("62",""))}function hr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pr(e,t){var n=kn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Tn("scroll",e);break;case"focus":case"blur":Tn("focus",e),Tn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ve(i)&&Tn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&En(i,e)}n[i]=!0}}}function fr(){}var dr=null,mr=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vr="function"==typeof setTimeout?setTimeout:void 0,br="function"==typeof clearTimeout?clearTimeout:void 0;function xr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function wr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var _r=[],Mr=-1;function Sr(e){Mr<0||(e.current=_r[Mr],_r[Mr]=null,Mr--)}function Er(e,t){_r[++Mr]=e.current,e.current=t}var Tr={},Cr={current:Tr},Ar={current:!1},Pr=Tr;function Lr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!=e.childContextTypes}function kr(e){Sr(Ar),Sr(Cr)}function Or(e){Sr(Ar),Sr(Cr)}function Fr(e,t,n){Cr.current!==Tr&&a("168"),Er(Cr,t),Er(Ar,n)}function Ur(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||a("108",st(t)||"Unknown",o);return i({},n,r)}function Dr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Tr,Pr=Cr.current,Er(Cr,t),Er(Ar,Ar.current),!0}function Nr(e,t,n){var r=e.stateNode;r||a("169"),n?(t=Ur(e,t,Pr),r.__reactInternalMemoizedMergedChildContext=t,Sr(Ar),Sr(Cr),Er(Cr,t)):Sr(Ar),Er(Ar,n)}var Br=null,zr=null;function Vr(e){return function(t){try{return e(t)}catch(t){}}}function Ir(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function jr(e,t,n,r){return new Ir(e,t,n,r)}function Hr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wr(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.firstContextDependency=e.firstContextDependency,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gr(e,t,n,r,i,o){var s=2;if("function"==typeof(r=e))Hr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ke:return Xr(n.children,i,o,t);case et:return qr(n,3|i,o,t);case Qe:return qr(n,2|i,o,t);case Ze:return(e=jr(12,n,t,4|i)).elementType=Ze,e.type=Ze,e.expirationTime=o,e;case nt:return(e=jr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case $e:s=10;break e;case Je:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=jr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Xr(e,t,n,r){return(e=jr(7,e,r,t)).expirationTime=n,e}function qr(e,t,n,r){return e=jr(8,e,r,t),t=0==(1&t)?Qe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Yr(e,t,n){return(e=jr(6,e,null,t)).expirationTime=n,e}function Kr(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),Jr(t,e)}function Zr(e,t){e.didError=!1;var n=e.latestPingedTime;0!==n&&t<=n&&(e.latestPingedTime=0),n=e.earliestPendingTime;var r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:t<r&&(e.latestSuspendedTime=t),Jr(t,e)}function $r(e,t){var n=e.earliestPendingTime;return t<n&&(t=n),t<(e=e.earliestSuspendedTime)&&(t=e),t}function Jr(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&e<n&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}var ei=!1;function ti(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ni(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ri(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ii(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function oi(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=ti(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=ti(e.memoizedState),i=n.updateQueue=ti(n.memoizedState)):r=e.updateQueue=ni(i):null===i&&(i=n.updateQueue=ni(r));null===i||r===i?ii(r,t):null===r.lastUpdate||null===i.lastUpdate?(ii(r,t),ii(i,t)):(ii(r,t),i.lastUpdate=t)}function ai(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=ti(e.memoizedState):si(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function si(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ni(t)),t}function li(e,t,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(o="function"==typeof(e=n.payload)?e.call(a,r,o):e))break;return i({},r,o);case 2:ei=!0}return r}function ui(e,t,n,r,i){ei=!1;for(var o=(t=si(e,t)).baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=li(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===c&&(c=l,null===a&&(o=u)),s<h&&(s=h)):(u=li(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function ci(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),hi(t.firstEffect,n),t.firstEffect=t.lastEffect=null,hi(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function hi(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function pi(e,t){return{value:e,source:t,stack:lt(t)}}var fi={current:null},di=null,mi=null,gi=null;function yi(e,t){var n=e.type._context;Er(fi,n._currentValue),n._currentValue=t}function vi(e){var t=fi.current;Sr(fi),e.type._context._currentValue=t}function bi(e){gi=mi=null,(di=e).firstContextDependency=null}function xi(e,t){return gi!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(gi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===mi?(null===di&&a("293"),di.firstContextDependency=mi=t):mi=mi.next=t),e._currentValue}var wi={},_i={current:wi},Mi={current:wi},Si={current:wi};function Ei(e){return e===wi&&a("174"),e}function Ti(e,t){Er(Si,t),Er(Mi,e),Er(_i,wi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:er(null,"");break;default:t=er(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Sr(_i),Er(_i,t)}function Ci(e){Sr(_i),Sr(Mi),Sr(Si)}function Ai(e){Ei(Si.current);var t=Ei(_i.current),n=er(t,e.type);t!==n&&(Er(Mi,e),Er(_i,n))}function Pi(e){Mi.current===e&&(Sr(_i),Sr(Mi))}function Li(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Ri=We.ReactCurrentOwner,ki=(new r.Component).refs;function Oi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var Fi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ma(),i=ri(r=Ko(r,e));i.payload=t,null!=n&&(i.callback=n),Wo(),oi(e,i),$o(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ma(),i=ri(r=Ko(r,e));i.tag=1,i.payload=t,null!=n&&(i.callback=n),Wo(),oi(e,i),$o(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ma(),r=ri(n=Ko(n,e));r.tag=2,null!=t&&(r.callback=t),Wo(),oi(e,r),$o(e,n)}};function Ui(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&en(n,r)&&en(i,o))}function Di(e,t,n){var r=!1,i=Tr,o=t.contextType;return t=new t(n,o="object"==typeof o&&null!==o?Ri.currentDispatcher.readContext(o):(i=Rr(t)?Pr:Cr.current,(r=null!=(r=t.contextTypes))?Lr(e,i):Tr)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fi,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ni(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fi.enqueueReplaceState(t,t.state,null)}function Bi(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ki;var o=t.contextType;i.context="object"==typeof o&&null!==o?Ri.currentDispatcher.readContext(o):Lr(e,o=Rr(t)?Pr:Cr.current),null!==(o=e.updateQueue)&&(ui(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Oi(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Fi.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(ui(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var zi=Array.isArray;function Vi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("289"),r=n.stateNode),r||a("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ki&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&a("284"),n._owner||a("290",e)}return e}function Ii(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function ji(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Wr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?(t=Yr(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function u(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props)).ref=Vi(e,t,n):(r=Gr(n.type,n.key,n.props,null,e.mode,r)).ref=Vi(e,t,n),r.return=e,r}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Kr(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function h(e,t,n,r,o){return null===t||7!==t.tag?(t=Xr(n,e.mode,r,o)).return=e:(t=i(t,n)).return=e,t}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Yr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case qe:return(n=Gr(t.type,t.key,t.props,null,e.mode,n)).ref=Vi(e,null,t),n.return=e,n;case Ye:return(t=Kr(t,e.mode,n)).return=e,t}if(zi(t)||at(t))return(t=Xr(t,e.mode,n,null)).return=e,t;Ii(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case qe:return n.key===i?n.type===Ke?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case Ye:return n.key===i?c(e,t,n,r):null}if(zi(n)||at(n))return null!==i?null:h(e,t,n,r,null);Ii(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case qe:return e=e.get(null===r.key?n:r.key)||null,r.type===Ke?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case Ye:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(zi(r)||at(r))return h(t,e=e.get(n)||null,r,i,null);Ii(t,r)}return null}return function(l,u,c,h){var m="object"==typeof c&&null!==c&&c.type===Ke&&null===c.key;m&&(c=c.props.children);var g="object"==typeof c&&null!==c;if(g)switch(c.$$typeof){case qe:e:{for(g=c.key,m=u;null!==m;){if(m.key===g){if(7===m.tag?c.type===Ke:m.elementType===c.type){n(l,m.sibling),(u=i(m,c.type===Ke?c.props.children:c.props)).ref=Vi(l,m,c),u.return=l,l=u;break e}n(l,m);break}t(l,m),m=m.sibling}l=c.type===Ke?((u=Xr(c.props.children,l.mode,h,c.key)).return=l,u):((h=Gr(c.type,c.key,c.props,null,l.mode,h)).ref=Vi(l,u,c),h.return=l,h)}return s(l);case Ye:e:{for(m=c.key;null!==u;){if(u.key===m){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=i(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=Kr(c,l.mode,h)).return=l,l=u}return s(l)}if("string"==typeof c||"number"==typeof c)return c=""+c,s(((u=null!==u&&6===u.tag?(n(l,u.sibling),i(u,c)):(n(l,u),Yr(c,l.mode,h))).return=l,l=u));if(zi(c))return function(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===s.length)return n(i,h),u;if(null===h){for(;m<s.length;m++)(h=p(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<s.length;m++)(g=d(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),u}(l,u,c,h);if(at(c))return function(i,s,l,u){var c=at(l);"function"!=typeof c&&a("150"),null==(l=c.call(l))&&a("151");for(var h=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){m||(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(i,v.value,u))&&(s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=d(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),c}(l,u,c,h);if(g&&Ii(l,c),void 0===c&&!m)switch(l.tag){case 1:case 0:a("152",(h=l.type).displayName||h.name||"Component")}return n(l,u)}}var Hi=ji(!0),Wi=ji(!1),Gi=null,Xi=null,qi=!1;function Yi(e,t){var n=jr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ki(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Qi(e){if(qi){var t=Xi;if(t){var n=t;if(!Ki(e,t)){if(!(t=xr(n))||!Ki(e,t))return e.effectTag|=2,qi=!1,void(Gi=e);Yi(Gi,n)}Gi=e,Xi=wr(t)}else e.effectTag|=2,qi=!1,Gi=e}}function Zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Gi=e}function $i(e){if(e!==Gi)return!1;if(!qi)return Zi(e),!(qi=!0);var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yr(t,e.memoizedProps))for(t=Xi;t;)Yi(e,t),t=xr(t);return Zi(e),Xi=Gi?xr(e.stateNode):null,!0}function Ji(){Xi=Gi=null,qi=!1}var eo=We.ReactCurrentOwner;function to(e,t,n,r){t.child=null===e?Wi(t,null,n,r):Hi(t,e.child,n,r)}function no(e,t,n,r,i){n=n.render;var o=t.ref;return bi(t),r=n(r,o),t.effectTag|=1,to(e,t,r,i),t.child}function ro(e,t,n,r,i,o){if(null!==e)return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?ho(e,t,o):(t.effectTag|=1,(e=Wr(a,r)).ref=t.ref,(e.return=t).child=e);var a=n.type;return"function"!=typeof a||Hr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Gr(n.type,null,r,null,t.mode,o)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,io(e,t,a,r,i,o))}function io(e,t,n,r,i,o){return null!==e&&i<o&&en(e.memoizedProps,r)&&e.ref===t.ref?ho(e,t,o):ao(e,t,n,r,o)}function oo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function ao(e,t,n,r,i){var o=Rr(n)?Pr:Cr.current;return o=Lr(t,o),bi(t),n=n(r,o),t.effectTag|=1,to(e,t,n,i),t.child}function so(e,t,n,r,i){if(Rr(n)){var o=!0;Dr(t)}else o=!1;if(bi(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Di(t,n,r),Bi(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?Ri.currentDispatcher.readContext(u):Lr(t,u=Rr(n)?Pr:Cr.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Ni(t,a,r,u),ei=!1;var p=t.memoizedState;l=a.state=p;var f=t.updateQueue;null!==f&&(ui(t,f,r,a,i),l=t.memoizedState),r=s!==r||p!==l||Ar.current||ei?("function"==typeof c&&(Oi(t,n,c,r),l=t.memoizedState),(s=ei||Ui(t,n,s,r,p,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Li(t.type,s),l=a.context,u="object"==typeof(u=n.contextType)&&null!==u?Ri.currentDispatcher.readContext(u):Lr(t,u=Rr(n)?Pr:Cr.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Ni(t,a,r,u),ei=!1,l=t.memoizedState,p=a.state=l,null!==(f=t.updateQueue)&&(ui(t,f,r,a,i),p=t.memoizedState),r=s!==r||l!==p||Ar.current||ei?("function"==typeof c&&(Oi(t,n,c,r),p=t.memoizedState),(c=ei||Ui(t,n,s,r,l,p,u))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),!1);return lo(e,t,n,r,o,i)}function lo(e,t,n,r,i,o){oo(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Nr(t,n,!1),ho(e,t,o);r=t.stateNode,eo.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Hi(t,e.child,null,o),t.child=Hi(t,null,s,o)):to(e,t,s,o),t.memoizedState=r.state,i&&Nr(t,n,!0),t.child}function uo(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),Ti(e,t.containerInfo)}function co(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;return null===e?a?(a=i.fallback,i=Xr(null,r,0,null),0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),r=Xr(a,r,n,null),i.sibling=r,(n=i).return=r.return=t):n=r=Wi(t,null,i.children,n):null!==e.memoizedState?(e=(r=e.child).sibling,a?(n=i.fallback,i=Wr(r,r.pendingProps),0==(1&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a),r=i.sibling=Wr(e,n,e.expirationTime),(n=i).childExpirationTime=0,n.return=r.return=t):n=r=Hi(t,r.child,i.children,n)):(e=e.child,a?(a=i.fallback,(i=Xr(null,r,0,null)).child=e,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Xr(a,r,n,null)).effectTag|=2,(n=i).childExpirationTime=0,n.return=r.return=t):r=n=Hi(t,e,i.children,n)),t.memoizedState=o,t.child=n,r}function ho(e,t,n){if(null!==e&&(t.firstContextDependency=e.firstContextDependency),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=Wr(e=t.child,e.pendingProps,e.expirationTime),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function po(e){e.effectTag|=4}var fo=void 0,mo=void 0,go=void 0,yo=void 0;function vo(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=lt(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function bo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Yo(e,t)}else t.current=null}function xo(e){switch("function"==typeof zr&&zr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(null!==r){var i=e;try{r()}catch(t){Yo(i,t)}}n=n.next}while(n!==t)}break;case 1:if(bo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Yo(e,t)}break;case 5:bo(e);break;case 4:Mo(e)}}function wo(e){return 5===e.tag||3===e.tag||4===e.tag}function _o(e){e:{for(var t=e.return;null!==t;){if(wo(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,l=n;8===o.nodeType?o.parentNode.insertBefore(s,l):o.insertBefore(s,l)}else t.insertBefore(i.stateNode,n);else r?(s=t,l=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(l,s):(o=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=fr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Mo(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(xo(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag?(r=t.stateNode.containerInfo,i=!0):xo(t),null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function So(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if((t.updateQueue=null)!==o){for(n[F]=r,"input"===e&&"radio"===r.type&&null!=r.name&&wt(n,r),hr(e,i),t=hr(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?lr(n,l):"dangerouslySetInnerHTML"===s?rr(n,l):"children"===s?ir(n,l):yt(n,s,l,t)}switch(e){case"input":_t(n,r);break;case"textarea":Qn(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?qn(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?qn(n,!!r.multiple,r.defaultValue,!0):qn(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(null===(n=(e=t).memoizedState)?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Ma())),null!==e)e:for(t=n=e;;){if(5===t.tag)(e=t.stateNode).style.display=r?"none":(e=t.stateNode,sr("display",o=null!=(o=t.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(e=t.child.sibling).return=t,t=e;continue}if(null!==t.child){t=(t.child.return=t).child;continue}}if(t===n)break e;for(;null===t.sibling;){if(null===t.return||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}break;case 17:break;default:a("163")}}function Eo(e,t,n){(n=ri(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Oa(r),vo(e,t)},n}function To(e,t,n){(n=ri(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===jo?jo=new Set([this]):jo.add(this));var n=t.value,i=t.stack;vo(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Co(e){switch(e.tag){case 1:Rr(e.type)&&kr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Ci(),Or(),0!=(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Pi(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 4:return Ci(),null;case 10:return vi(e),null;default:return null}}fo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},mo=function(){},go=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s=t.stateNode;switch(Ei(_i.current),e=null,n){case"input":a=bt(s,a),r=bt(s,r),e=[];break;case"option":a=Xn(s,a),r=Xn(s,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Yn(s,a),r=Yn(s,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(s.onclick=fr)}cr(n,r),s=n=void 0;var l=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var u=a[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(e||(e=[]),e.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&pr(o,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}l&&(e=e||[]).push("style",l),o=e,(t.updateQueue=o)&&po(t)}},yo=function(e,t,n,r){n!==r&&po(t)};var Ao={readContext:xi},Po=We.ReactCurrentOwner,Lo=1073741822,Ro=0,ko=!1,Oo=null,Fo=null,Uo=0,Do=-1,No=!1,Bo=null,zo=!1,Vo=null,Io=null,jo=null;function Ho(){if(null!==Oo)for(var e=Oo.return;null!==e;){var t=e;switch(t.tag){case 1:null!=t.type.childContextTypes&&kr();break;case 3:Ci(),Or();break;case 5:Pi(t);break;case 4:Ci();break;case 10:vi(t)}e=e.return}Uo=0,No=!(Do=-1),Oo=Fo=null}function Wo(){null!==Io&&(o.unstable_cancelCallback(Vo),Io())}function Go(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){e:{var o=t,s=Uo,l=(t=Oo=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rr(t.type)&&kr();break;case 3:Ci(),Or(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==o&&null!==o.child||($i(t),t.effectTag&=-3),mo(t);break;case 5:Pi(t);var u=Ei(Si.current);if(s=t.type,null!==o&&null!=t.stateNode)go(o,t,s,l,u),o.ref!==t.ref&&(t.effectTag|=128);else if(l){var c=Ei(_i.current);if($i(t)){o=(l=t).stateNode;var h=l.type,p=l.memoizedProps,f=u;switch(o[O]=l,o[F]=p,s=void 0,u=h){case"iframe":case"object":En("load",o);break;case"video":case"audio":for(h=0;h<te.length;h++)En(te[h],o);break;case"source":En("error",o);break;case"img":case"image":case"link":En("error",o),En("load",o);break;case"form":En("reset",o),En("submit",o);break;case"details":En("toggle",o);break;case"input":xt(o,p),En("invalid",o),pr(f,"onChange");break;case"select":o._wrapperState={wasMultiple:!!p.multiple},En("invalid",o),pr(f,"onChange");break;case"textarea":Kn(o,p),En("invalid",o),pr(f,"onChange")}for(s in cr(u,p),h=null,p)p.hasOwnProperty(s)&&(c=p[s],"children"===s?"string"==typeof c?o.textContent!==c&&(h=["children",c]):"number"==typeof c&&o.textContent!==""+c&&(h=["children",""+c]):b.hasOwnProperty(s)&&null!=c&&pr(f,s));switch(u){case"input":je(o),Mt(o,p,!0);break;case"textarea":je(o),Zn(o);break;case"select":case"option":break;default:"function"==typeof p.onClick&&(o.onclick=fr)}s=h,l.updateQueue=s,(l=null!==s)&&po(t)}else{p=t,o=s,f=l,h=9===u.nodeType?u:u.ownerDocument,c===$n.html&&(c=Jn(o)),c===$n.html?"script"===o?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"==typeof f.is?h=h.createElement(o,{is:f.is}):(h=h.createElement(o),"select"===o&&f.multiple&&(h.multiple=!0)):h=h.createElementNS(c,o),(o=h)[O]=p,o[F]=l,fo(o,t,!1,!1),f=o;var d=u,m=hr(h=s,p=l);switch(h){case"iframe":case"object":En("load",f),u=p;break;case"video":case"audio":for(u=0;u<te.length;u++)En(te[u],f);u=p;break;case"source":En("error",f),u=p;break;case"img":case"image":case"link":En("error",f),En("load",f),u=p;break;case"form":En("reset",f),En("submit",f),u=p;break;case"details":En("toggle",f),u=p;break;case"input":xt(f,p),u=bt(f,p),En("invalid",f),pr(d,"onChange");break;case"option":u=Xn(f,p);break;case"select":f._wrapperState={wasMultiple:!!p.multiple},u=i({},p,{value:void 0}),En("invalid",f),pr(d,"onChange");break;case"textarea":Kn(f,p),u=Yn(f,p),En("invalid",f),pr(d,"onChange");break;default:u=p}cr(h,u),c=void 0;var g=h,y=f,v=u;for(c in v)if(v.hasOwnProperty(c)){var x=v[c];"style"===c?lr(y,x):"dangerouslySetInnerHTML"===c?null!=(x=x?x.__html:void 0)&&rr(y,x):"children"===c?"string"==typeof x?("textarea"!==g||""!==x)&&ir(y,x):"number"==typeof x&&ir(y,""+x):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=x&&pr(d,c):null!=x&&yt(y,c,x,m))}switch(h){case"input":je(f),Mt(f,p,!1);break;case"textarea":je(f),Zn(f);break;case"option":null!=p.value&&f.setAttribute("value",""+vt(p.value));break;case"select":(u=f).multiple=!!p.multiple,null!=(f=p.value)?qn(u,!!p.multiple,f,!1):null!=p.defaultValue&&qn(u,!!p.multiple,p.defaultValue,!0);break;default:"function"==typeof u.onClick&&(f.onclick=fr)}(l=gr(s,l))&&po(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?yo(o,t,o.memoizedProps,l):("string"!=typeof l&&null===t.stateNode&&a("166"),o=Ei(Si.current),Ei(_i.current),$i(t)?(s=(l=t).stateNode,o=l.memoizedProps,s[O]=l,(l=s.nodeValue!==o)&&po(t)):(s=t,(l=(9===o.nodeType?o:o.ownerDocument).createTextNode(l))[O]=t,s.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,Oo=t;break e}l=null!==l,s=null!==o&&null!==o.memoizedState,null!==o&&!l&&s&&null!==(o=o.child.sibling)&&(u=t.firstEffect,o.nextEffect=null!==u?(t.firstEffect=o,u):(t.firstEffect=t.lastEffect=o,null),o.effectTag=8),(l!==s||0==(1&t.effectTag)&&l)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ci(),mo(t);break;case 10:vi(t);break;case 9:case 14:break;case 17:Rr(t.type)&&kr();break;default:a("156")}Oo=null}if(t=e,1===Uo||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)l<(o=s.expirationTime)&&(l=o),l<(u=s.childExpirationTime)&&(l=u),s=s.sibling;t.childExpirationTime=l}if(null!==Oo)return Oo;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Co(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Xo(e){var t=function(e,t,n){var r=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!Ar.current&&r<n){switch(t.tag){case 3:uo(t),Ji();break;case 5:Ai(t);break;case 1:Rr(t.type)&&Dr(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:yi(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&n<=r?co(e,t,n):null!==(t=ho(e,t,n))?t.sibling:null}return ho(e,t,n)}switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Lr(t,Cr.current);if(bi(t),i=r(e,i),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Rr(r)){var o=!0;Dr(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&Oi(t,r,s,e),i.updater=Fi,Bi((t.stateNode=i)._reactInternalFiber=t,r,e,n),t=lo(null,t,r,!0,o,n)}else t.tag=0,to(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Hr(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),o=Li(e,o),s=void 0,i){case 0:s=ao(null,t,e,o,n);break;case 1:s=so(null,t,e,o,n);break;case 11:s=no(null,t,e,o,n);break;case 14:s=ro(null,t,e,Li(e.type,o),r,n);break;default:a("283",e)}return s;case 0:return r=t.type,i=t.pendingProps,ao(e,t,r,i=t.elementType===r?i:Li(r,i),n);case 1:return r=t.type,i=t.pendingProps,so(e,t,r,i=t.elementType===r?i:Li(r,i),n);case 3:return uo(t),null===(r=t.updateQueue)&&a("282"),i=null!==(i=t.memoizedState)?i.element:null,ui(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(Ji(),ho(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Xi=wr(t.stateNode.containerInfo),Gi=t,i=qi=!0),i?(t.effectTag|=2,t.child=Wi(t,null,r,n)):(to(e,t,r,n),Ji()),t.child);case 5:return Ai(t),null===e&&Qi(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,yr(r,i)?s=null:null!==o&&yr(r,o)&&(t.effectTag|=16),oo(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=1,null):(to(e,t,s,n),t.child);case 6:return null===e&&Qi(t),null;case 13:return co(e,t,n);case 4:return Ti(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Hi(t,null,r,n):to(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,no(e,t,r,i=t.elementType===r?i:Li(r,i),n);case 7:return to(e,t,t.pendingProps,n),t.child;case 8:case 12:return to(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,yi(t,o=i.value),null!==s){var l=s.value;if(0==(o=l===o&&(0!==l||1/l==1/o)||l!=l&&o!=o?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!Ar.current){t=ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){if(null!==(l=s.firstContextDependency))do{if(l.context===r&&0!=(l.observedBits&o)){if(1===s.tag){var u=ri(n);u.tag=2,oi(s,u)}s.expirationTime<n&&(s.expirationTime=n),null!==(u=s.alternate)&&u.expirationTime<n&&(u.expirationTime=n);for(var c=s.return;null!==c;){if(u=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==u&&u.childExpirationTime<n&&(u.childExpirationTime=n);else{if(!(null!==u&&u.childExpirationTime<n))break;u.childExpirationTime=n}c=c.return}}u=s.child,l=l.next}while(null!==l);else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}to(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,bi(t),r=r(i=xi(i,o.unstable_observedBits)),t.effectTag|=1,to(e,t,r,n),t.child;case 14:return ro(e,t,i=t.type,o=Li(i.type,t.pendingProps),r,n);case 15:return io(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Li(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rr(r)?(e=!0,Dr(t)):e=!1,bi(t),Di(t,r,i),Bi(t,r,i,n),lo(null,t,r,!0,e,n);default:a("156")}}(e.alternate,e,Uo);return e.memoizedProps=e.pendingProps,null===t&&(t=Go(e)),Po.current=null,t}function qo(e,t){ko&&a("243"),Wo(),ko=!0,Po.currentDispatcher=Ao;var n=e.nextExpirationTimeToWorkOn;n===Uo&&e===Fo&&null!==Oo||(Ho(),Uo=n,Oo=Wr((Fo=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==Oo&&!Ca();)Oo=Xo(Oo);else for(;null!==Oo;)Oo=Xo(Oo)}catch(t){if(gi=mi=di=null,null===Oo)r=!0,Oa(t);else{null===Oo&&a("271");var i=Oo,o=i.return;if(null!==o){e:{var s=e,l=o,u=i,c=t;if(o=Uo,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c;c=l;var p=-1,f=-1;do{if(13===c.tag){var d=c.alternate;if(null!==d&&null!==(d=d.memoizedState)){f=10*(1073741822-d.timedOutAt);break}"number"==typeof(d=c.pendingProps.maxDuration)&&(d<=0?p=0:(-1===p||d<p)&&(p=d))}c=c.return}while(null!==c);c=l;do{if((d=13===c.tag)&&(d=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),d){if(l=Qo.bind(null,s,c,u,0==(1&c.mode)?1073741823:o),h.then(l,l),0==(1&c.mode)){c.effectTag|=64,u.effectTag&=-1957,1===u.tag&&null===u.alternate&&(u.tag=17),u.expirationTime=o;break e}0<=(s=-1===p?1073741823:(-1===f&&(f=10*(1073741822-$r(s,o))-5e3),f+p))&&Do<s&&(Do=s),c.effectTag|=2048,c.expirationTime=o;break e}c=c.return}while(null!==c);c=Error((st(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(u))}No=!0,c=pi(c,u),s=l;do{switch(s.tag){case 3:u=c,s.effectTag|=2048,s.expirationTime=o,ai(s,o=Eo(s,u,o));break e;case 1:if(u=c,l=s.type,h=s.stateNode,0==(64&s.effectTag)&&("function"==typeof l.getDerivedStateFromError||null!==h&&"function"==typeof h.componentDidCatch&&(null===jo||!jo.has(h)))){s.effectTag|=2048,s.expirationTime=o,ai(s,o=To(s,u,o));break e}}s=s.return}while(null!==s)}Oo=Go(i);continue}r=!0,Oa(t)}}break}if(ko=!1,gi=mi=di=Po.currentDispatcher=null,r)Fo=null,e.finishedWork=null;else if(null!==Oo)e.finishedWork=null;else{if(null===(r=e.current.alternate)&&a("281"),Fo=null,No){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<n||0!==o&&o<n||0!==s&&s<n)return Zr(e,n),void _a(e,r,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,void _a(e,r,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,-1)}t&&-1!==Do?(Zr(e,n),(t=10*(1073741822-$r(e,n)))<Do&&(Do=t),t=10*(1073741822-Ma()),t=Do-t,_a(e,r,n,e.expirationTime,t<0?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=r)}}function Yo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===jo||!jo.has(r)))return oi(n,e=To(n,e=pi(t,e),1073741823)),void $o(n,1073741823);break;case 3:return oi(n,e=Eo(n,e=pi(t,e),1073741823)),void $o(n,1073741823)}n=n.return}3===e.tag&&(oi(e,n=Eo(e,n=pi(t,e),1073741823)),$o(e,1073741823))}function Ko(e,t){return 0!==Ro?e=Ro:ko?e=zo?1073741823:Uo:1&t.mode?(e=pa?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==Fo&&e===Uo&&--e):e=1073741823,pa&&(0===sa||e<sa)&&(sa=e),e}function Qo(e,t,n,r){var i=e.earliestSuspendedTime,o=e.latestSuspendedTime;if(0!==i&&r<=i&&o<=r){o=i=r,e.didError=!1;var a=e.latestPingedTime;(0===a||o<a)&&(e.latestPingedTime=o),Jr(o,e)}else Qr(e,i=Ko(i=Ma(),t));0!=(1&t.mode)&&e===Fo&&Uo===r&&(Fo=null),Zo(t,i),0==(1&t.mode)&&(Zo(n,i),1===n.tag&&null!==n.stateNode&&((t=ri(i)).tag=2,oi(n,t))),0!==(n=e.expirationTime)&&Sa(e,n)}function Zo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function $o(e,t){null!==(e=Zo(e,t))&&(!ko&&0!==Uo&&Uo<t&&Ho(),Qr(e,t),ko&&!zo&&Fo===e||Sa(e,e.expirationTime),ya<va&&(va=0,a("185")))}function Jo(e,t,n,r,i){var o=Ro;Ro=1073741823;try{return e(t,n,r,i)}finally{Ro=o}}var ea=null,ta=null,na=0,ra=void 0,ia=!1,oa=null,aa=0,sa=0,la=!1,ua=null,ca=!1,ha=!1,pa=!1,fa=null,da=o.unstable_now(),ma=1073741822-(da/10|0),ga=ma,ya=50,va=0,ba=null;function xa(){ma=1073741822-((o.unstable_now()-da)/10|0)}function wa(e,t){if(0!==na){if(t<na)return;null!==ra&&o.unstable_cancelCallback(ra)}na=t,e=o.unstable_now()-da,ra=o.unstable_scheduleCallback(Aa,{timeout:10*(1073741822-t)-e})}function _a(e,t,n,r,i){e.expirationTime=r,0!==i||Ca()?0<i&&(e.timeoutHandle=vr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,xa(),ga=ma,La(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Ma(){return ia||(Ea(),0!==aa&&1!==aa||(xa(),ga=ma)),ga}function Sa(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ta?(ea=ta=e,e.nextScheduledRoot=e):(ta=ta.nextScheduledRoot=e).nextScheduledRoot=ea):t>e.expirationTime&&(e.expirationTime=t),ia||(ca?ha&&Ra(oa=e,aa=1073741823,!1):1073741823===t?Pa(1073741823,!1):wa(e,t))}function Ea(){var e=0,t=null;if(null!==ta)for(var n=ta,r=ea;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ta)&&a("244"),r===r.nextScheduledRoot){ea=ta=r.nextScheduledRoot=null;break}if(r===ea)ea=i=r.nextScheduledRoot,ta.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ta){(ta=n).nextScheduledRoot=ea,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(e<i&&(e=i,t=r),r===ta)break;if(1073741823===e)break;r=(n=r).nextScheduledRoot}}oa=t,aa=e}var Ta=!1;function Ca(){return!!Ta||!!o.unstable_shouldYield()&&(Ta=!0)}function Aa(){try{if(!Ca()&&null!==ea){xa();var e=ea;do{var t=e.expirationTime;0!==t&&ma<=t&&(e.nextExpirationTimeToWorkOn=ma),e=e.nextScheduledRoot}while(e!==ea)}Pa(0,!0)}finally{Ta=!1}}function Pa(e,t){if(Ea(),t)for(xa(),ga=ma;null!==oa&&0!==aa&&e<=aa&&!(Ta&&aa<ma);)Ra(oa,aa,aa<ma),Ea(),xa(),ga=ma;else for(;null!==oa&&0!==aa&&e<=aa;)Ra(oa,aa,!1),Ea();if(t&&(na=0,ra=null),0!==aa&&wa(oa,aa),va=0,(ba=null)!==fa)for(e=fa,fa=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){la||(la=!0,ua=e)}}if(la)throw e=ua,ua=null,la=!1,e}function La(e,t){ia&&a("253"),Ra(oa=e,aa=t,!1),Pa(1073741823,!1)}function Ra(e,t,n){if(ia&&a("245"),ia=!0,n){var r=e.finishedWork;null!==r?ka(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),qo(e,n),null!==(r=e.finishedWork)&&(Ca()?e.finishedWork=r:ka(e,r,t)))}else null!==(r=e.finishedWork)?ka(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),qo(e,n),null!==(r=e.finishedWork)&&ka(e,r,t));ia=!1}function ka(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===fa?fa=[r]:fa.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===ba?va++:(ba=e,va=0),zo=ko=!0,e.current===t&&a("177"),0===(n=e.pendingCommitExpirationTime)&&a("261"),e.pendingCommitExpirationTime=0,r=t.expirationTime;var i=t.childExpirationTime;if(r=r<i?i:r,e.didError=!1,0===r?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(0!==(i=e.latestPendingTime)&&(r<i?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>r&&(e.earliestPendingTime=e.latestPendingTime)),0===(i=e.earliestSuspendedTime)?Qr(e,r):r<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Qr(e,r)):i<r&&Qr(e,r)),Jr(0,e),Po.current=null,r=1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t).firstEffect:t:t.firstEffect,dr=Sn,Nn(i=Dn())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{var s=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(s&&0!==s.rangeCount){o=s.anchorNode;var l=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{o.nodeType,u.nodeType}catch(e){o=null;break e}var c=0,h=-1,p=-1,f=0,d=0,m=i,g=null;t:for(;;){for(var y;m!==o||0!==l&&3!==m.nodeType||(h=c+l),m!==u||0!==s&&3!==m.nodeType||(p=c+s),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===i)break t;if(g===o&&++f===l&&(h=c),g===u&&++d===s&&(p=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}o=-1===h||-1===p?null:{start:h,end:p}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sn=!(mr={focusedElem:i,selectionRange:o}),Bo=r;null!==Bo;){i=!1,o=void 0;try{for(;null!==Bo;){if(256&Bo.effectTag)e:{var v=Bo.alternate;switch((l=Bo).tag){case 0:case 11:case 15:break e;case 1:if(256&l.effectTag&&null!==v){var b=v.memoizedProps,x=v.memoizedState,w=l.stateNode,_=w.getSnapshotBeforeUpdate(l.elementType===l.type?b:Li(l.type,b),x);w.__reactInternalSnapshotBeforeUpdate=_}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Bo=Bo.nextEffect}}catch(e){i=!0,o=e}i&&(null===Bo&&a("178"),Yo(Bo,o),null!==Bo&&(Bo=Bo.nextEffect))}for(Bo=r;null!==Bo;){v=!1,b=void 0;try{for(;null!==Bo;){var M=Bo.effectTag;if(16&M&&ir(Bo.stateNode,""),128&M){var S=Bo.alternate;if(null!==S){var E=S.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(14&M){case 2:_o(Bo),Bo.effectTag&=-3;break;case 6:_o(Bo),Bo.effectTag&=-3,So(Bo.alternate,Bo);break;case 4:So(Bo.alternate,Bo);break;case 8:Mo(x=Bo),x.return=null,x.child=null,x.alternate&&(x.alternate.child=null,x.alternate.return=null)}Bo=Bo.nextEffect}}catch(e){v=!0,b=e}v&&(null===Bo&&a("178"),Yo(Bo,b),null!==Bo&&(Bo=Bo.nextEffect))}if(E=mr,S=Dn(),M=E.focusedElem,b=E.selectionRange,S!==M&&M&&M.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(M.ownerDocument.documentElement,M)){null!==b&&Nn(M)&&(S=b.start,void 0===(E=b.end)&&(E=S),"selectionStart"in M?(M.selectionStart=S,M.selectionEnd=Math.min(E,M.value.length)):(E=(S=M.ownerDocument||document)&&S.defaultView||window).getSelection&&(E=E.getSelection(),x=M.textContent.length,v=Math.min(b.start,x),b=void 0===b.end?v:Math.min(b.end,x),!E.extend&&b<v&&(x=b,b=v,v=x),x=Un(M,v),w=Un(M,b),x&&w&&(1!==E.rangeCount||E.anchorNode!==x.node||E.anchorOffset!==x.offset||E.focusNode!==w.node||E.focusOffset!==w.offset)&&((S=S.createRange()).setStart(x.node,x.offset),E.removeAllRanges(),b<v?(E.addRange(S),E.extend(w.node,w.offset)):(S.setEnd(w.node,w.offset),E.addRange(S))))),S=[];for(E=M;E=E.parentNode;)1===E.nodeType&&S.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof M.focus&&M.focus(),M=0;M<S.length;M++)(E=S[M]).element.scrollLeft=E.left,E.element.scrollTop=E.top}for(Sn=!!dr,dr=mr=null,e.current=t,Bo=r;null!==Bo;){r=!1,M=void 0;try{for(S=n;null!==Bo;){var T=Bo.effectTag;if(36&T){var C=Bo.alternate;switch(v=S,(E=Bo).tag){case 0:case 11:case 15:break;case 1:var A=E.stateNode;if(4&E.effectTag)if(null===C)A.componentDidMount();else{var P=E.elementType===E.type?C.memoizedProps:Li(E.type,C.memoizedProps);A.componentDidUpdate(P,C.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var L=E.updateQueue;null!==L&&ci(0,L,A);break;case 3:var R=E.updateQueue;if(null!==R){if((b=null)!==E.child)switch(E.child.tag){case 5:b=E.child.stateNode;break;case 1:b=E.child.stateNode}ci(0,R,b)}break;case 5:var k=E.stateNode;null===C&&4&E.effectTag&&gr(E.type,E.memoizedProps)&&k.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}if(128&T){var O=Bo.ref;if(null!==O){var F=Bo.stateNode;switch(Bo.tag){case 5:var U=F;break;default:U=F}"function"==typeof O?O(U):O.current=U}}Bo=Bo.nextEffect}}catch(e){r=!0,M=e}r&&(null===Bo&&a("178"),Yo(Bo,M),null!==Bo&&(Bo=Bo.nextEffect))}ko=zo=!1,"function"==typeof Br&&Br(t.stateNode),0===(t=(T=t.expirationTime)<(t=t.childExpirationTime)?t:T)&&(jo=null),e.expirationTime=t,e.finishedWork=null}function Oa(e){null===oa&&a("246"),oa.expirationTime=0,la||(la=!0,ua=e)}function Fa(e,t){if(ca&&!ha){ha=!0;try{return e(t)}finally{ha=!1}}return e(t)}function Ua(e,t,n,r,i){var o=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var l=n.type;if(Rr(l)){n=Ur(n,l,s);break e}}n=s}else n=Tr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=ri(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Wo(),oi(o,i),$o(o,r),r}function Da(e,t,n,r){var i=t.current;return Ua(e,t,n,i=Ko(Ma(),i),r)}function Na(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ba(e){var t=1073741822-25*(1+((1073741822-Ma()+500)/25|0));Lo<=t&&(t=Lo-1),this._expirationTime=Lo=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function za(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Va(e,t,n){e={current:t=jr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Ia(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ja(e,t,n,r,i){Ia(n)||a("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var e=Na(o._internalRoot);s.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Va(e,!1,t)}(n,r),"function"==typeof i){var l=i;i=function(){var e=Na(o._internalRoot);l.call(e)}}Fa(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Na(o._internalRoot)}function Ha(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ia(t)||a("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ye,key:null==r?null:""+r,children:e,containerInfo:t,implementation:null}}(e,t,null,n)}Te=function(e,t,n){switch(t){case"input":if(_t(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=B(r);i||a("90"),He(r),_t(r,i)}}}break;case"textarea":Qn(e,n);break;case"select":null!=(t=n.value)&&qn(e,!!n.multiple,t,!1)}},Ba.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new za;return Ua(e,t,null,n,r._onCommit),r},Ba.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ba.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)i=(r=i)._next;null===r&&a("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,La(e,n),t=this._next,(this._next=null)!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ba.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},za.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},za.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&a("191",n),n()}}},Va.prototype.render=function(e,t){var n=this._internalRoot,r=new za;return null!==(t=void 0===t?null:t)&&r.then(t),Da(e,n,null,r._onCommit),r},Va.prototype.unmount=function(e){var t=this._internalRoot,n=new za;return null!==(e=void 0===e?null:e)&&n.then(e),Da(null,t,null,n._onCommit),n},Va.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new za;return null!==(n=void 0===n?null:n)&&i.then(n),Da(t,r,e,i._onCommit),i},Va.prototype.createBatch=function(){var e=new Ba(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)(n.firstBatch=e)._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)r=(n=r)._next;e._next=r,null!==n&&(n._next=e)}return e},Fe=function(){ia||0===sa||(Pa(sa,!1),sa=0)};var Wa,Ga,Xa={createPortal:Ha,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?a("188"):a("268",Object.keys(e))),null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return ja(null,e,t,!0,n)},render:function(e,t,n){return ja(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&a("38"),ja(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Ia(e)||a("40"),!!e._reactRootContainer&&(Fa(function(){ja(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ha.apply(void 0,arguments)},unstable_batchedUpdates:ke=function(e,t){var n=ca;ca=!0;try{return e(t)}finally{(ca=n)||ia||Pa(1073741823,!1)}},unstable_interactiveUpdates:Oe=function(e,t,n){if(pa)return e(t,n);ca||ia||0===sa||(Pa(sa,!1),sa=0);var r=pa,i=ca;ca=pa=!0;try{return e(t,n)}finally{pa=r,(ca=i)||ia||Pa(1073741823,!1)}},flushSync:function(e,t){ia&&a("187");var n=ca;ca=!0;try{return Jo(e,t)}finally{ca=n,Pa(1073741823,!1)}},unstable_flushControlled:function(e){var t=ca;ca=!0;try{Jo(e)}finally{(ca=t)||ia||Pa(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[D,N,B,P.injectEventPluginsByName,v,W,function(e){T(e,H)},Le,Re,An,R]},unstable_createRoot:function(e,t){return Ia(e)||a("299","unstable_createRoot"),new Va(e,!0,null!=t&&!0===t.hydrate)}};Ga=(Wa={findFiberByHostInstance:U,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{var n=t.inject(e);Br=Vr(function(e){return t.onCommitFiberRoot(n,e)}),zr=Vr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}}}(i({},Wa,{findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Ga?Ga(e):null}}));var qa=Xa;e.exports=qa.default||qa},function(e,t,n){"use strict";e.exports=n(28)},function(e,t,n){"use strict";(function(e){
/** @license React v0.11.3
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,l=!1;function u(){if(!s){var e=n.expirationTime;l?M():l=!0,_(p,e)}}function c(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,s=a;i=e,a=t;try{var l=r()}finally{i=o,a=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,u()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{for(;c(),null!==n&&1===n.priorityLevel;);}finally{s=!1,null!==n?u():l=!1}}}function p(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;for(;c(),null!==n&&n.expirationTime<=o;);}else if(null!==n)for(;c(),null!==n&&!S(););}finally{s=!1,r=i,null!==n?u():l=!1,h()}}var f,d,m=Date,g="function"==typeof setTimeout?setTimeout:void 0,y="function"==typeof clearTimeout?clearTimeout:void 0,v="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(e){f=v(function(t){y(d),e(t)}),d=g(function(){b(f),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return m.now()};var _,M,S,E=null;if("undefined"!=typeof window?E=window:void 0!==e&&(E=e),E&&E._schedMock){var T=E._schedMock;_=T[0],M=T[1],S=T[2],t.unstable_now=T[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var C=null,A=function(e){if(null!==C)try{C(e)}finally{C=null}};_=function(e){null!==C?setTimeout(_,0,e):(C=e,setTimeout(A,0,!1))},M=function(){C=null},S=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,L=!1,R=-1,k=!1,O=!1,F=0,U=33,D=33;S=function(){return F<=t.unstable_now()};var N=new MessageChannel,B=N.port2;N.port1.onmessage=function(){L=!1;var e=P,n=R;P=null,R=-1;var r=t.unstable_now(),i=!1;if(F-r<=0){if(!(-1!==n&&n<=r))return k||(k=!0,x(z)),P=e,void(R=n);i=!0}if(null!==e){O=!0;try{e(i)}finally{O=!1}}};var z=function(e){if(null!==P){x(z);var t=e-F+D;t<D&&U<D?(t<8&&(t=8),D=t<U?U:t):U=t,F=e+D,L||(L=!0,B.postMessage(void 0))}else k=!1};_=function(e,t){P=e,R=t,O||t<0?B.postMessage(void 0):k||(k=!0,x(z))},M=function(){P=null,L=!1,R=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,a=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=a,h()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,u();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=e,u()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;(r.next=t).previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,a=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=a,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||S())}}).call(this,n(15))},function(e,t,n){"use strict";var r=n(30);function i(){}e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";
/** @license React v16.6.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case p:case a:case l:case s:return e;default:switch(e=e&&e.$$typeof){case c:case f:case u:return e;default:return t}}case o:return t}}}function v(e){return y(e)===p}t.typeOf=y,t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=f,t.Fragment=a,t.Profiler=l,t.Portal=o,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===l||e===s||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f)},t.isAsyncMode=function(e){return v(e)||y(e)===h},t.isConcurrentMode=v,t.isContextConsumer=function(e){return y(e)===c},t.isContextProvider=function(e){return y(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return y(e)===f},t.isFragment=function(e){return y(e)===a},t.isProfiler=function(e){return y(e)===l},t.isPortal=function(e){return y(e)===o},t.isStrictMode=function(e){return y(e)===s}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=l(n(35)),o=n(36),a=l(n(37)),s=n(39);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,s.getCache)("state")||{},c=(0,r.createStore)(a.default,u,(0,r.applyMiddleware)(i.default));c.subscribe((0,o.throttle)(function(){var e=c.getState();(0,s.setCache)("state",e)}),2e3),t.default=c},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}n.r(t);var i=r();i.withExtraArgument=r,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,n){for(var r=arguments.length,i=Array(3<r?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=void 0;return function(){var r=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(void 0,i)},t),r&&e.apply(void 0,i)}},t.throttle=function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=!1,a=void 0,s=void 0;return function n(){if(o)return a=r,void(s=this);o=!0,e.apply(this,r),setTimeout(function(){o=!1,a&&(n.apply(s,a),s=a=null)},t)}},t.transformProperty="string"==typeof("undefined"!=typeof window&&window.document.documentElement.style.transform)?"transform":"WebkitTransform"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8),o=(r=n(38))&&r.__esModule?r:{default:r},a=(0,i.combineReducers)({common:o.default});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(16),o={theme:!0,navbar:!1};t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o;switch(arguments[1].type){case i.TOGGLE_NAV:return console.log("eee"),r({},e,{navbar:!e.navbar});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCache=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.warn("Error setting storage",e)}},t.getCache=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(e){return}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=c(i),a=c(n(0)),s=n(5),l=n(6),u=c(n(41));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n,r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={menuOpened:!1,showInstallMessage:(n=window.navigator.userAgent.toLowerCase(),/iphone|ipad|ipod/.test(n)&&!("standalone"in window.navigator&&window.navigator.standalone))},r.isStandalone=window.navigator.standalone||!!window.cordova,r.toggleMenu=r.toggleMenu.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.isStandalone&&document.body.classList.add("isStandalone")}},{key:"toggleMenu",value:function(){var e=this.state.menuOpened;this.setState({menuOpened:e})}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.showInstallMessage;return o.default.createElement("div",{id:"Layout",className:"app__layout fill"},this.isStandalone&&o.default.createElement("div",{className:"app__statusbar"}),t,n&&o.default.createElement(u.default,{id:"addhome",onClick:function(){return e.setState({showInstallMessage:!1})}}))}}]),t}();h.propTypes={children:a.default.oneOfType([a.default.arrayOf(a.default.element),a.default.object,a.default.arrayOf(a.default.any)]).isRequired},t.default=(0,s.withRouter)((0,l.connect)(function(e){return{common:e.common}},{})(h))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(1)),i=l(n(0)),o=l(n(42)),a=l(n(43)),s=l(n(44));function l(e){return e&&e.__esModule?e:{default:e}}n(82);var u=function(e){var t=e.id,n=e.onClick;return r.default.createElement(o.default,{id:t,onClick:n,className:"addhome"},r.default.createElement("div",{className:"addhome__close-icon"},""),r.default.createElement("h4",null,"Install Web App"),r.default.createElement("p",null,"Tap",r.default.createElement(s.default,null),"and then",r.default.createElement(a.default,null),"for offline mode!"))};u.defaultProps={id:""},u.propTypes={onClick:i.default.func.isRequired,id:i.default.string},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.id,n=e.className,i=e.children,o=e.onClick;return r.default.createElement("button",{type:"button",id:t,className:n,onClick:o},i)};a.defaultProps={children:"",className:"",id:""},a.propTypes={children:i.default.oneOfType([i.default.element,i.default.string,i.default.arrayOf(i.default.element)]),onClick:i.default.func.isRequired,id:i.default.string,className:i.default.string},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};t.default=function(){return i.default.createElement("svg",{width:"36px",height:"35px",viewBox:"0 0 36 35",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"svg-home"},i.default.createElement("defs",null),i.default.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{id:"Add_icon"},i.default.createElement("g",null,i.default.createElement("rect",{id:"Rectangle-2",fill:"#686871",x:"0",y:"0",width:"36",height:"35",rx:"8"}),i.default.createElement("rect",{id:"Rectangle-3",fill:"#FFFFFF",x:"17",y:"10",width:"2",height:"15",rx:"1"}),i.default.createElement("rect",{id:"Rectangle-3",fill:"#FFFFFF",transform:"translate(18.000000, 17.500000) rotate(90.000000) translate(-18.000000, -17.500000) ",x:"17",y:"10",width:"2",height:"15",rx:"1"})))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};t.default=function(){return i.default.createElement("svg",{width:"20px",height:"26px",viewBox:"0 0 20 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"svg-share"},i.default.createElement("defs",null),i.default.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{id:"Safari_add_icon",stroke:"#007AFF"},i.default.createElement("g",null,i.default.createElement("path",{d:"M10.5,0.5 L10.5,15.5",id:"Line",strokeLinecap:"square"}),i.default.createElement("path",{d:"M14.0355339,0.5 L10.5,4.03553391",id:"Line-2",transform:"translate(12.267767, 2.267767) scale(-1, 1) translate(-12.267767, -2.267767) "}),i.default.createElement("path",{d:"M10.5,0.5 L6.96446609,4.03553391",id:"Line-2"}),i.default.createElement("path",{d:"M1,25.5 L19,25.5 L19,7.5 L1,7.5 L1,25.5 Z",id:"Rectangle",transform:"translate(10.000000, 16.500000) rotate(90.000000) translate(-10.000000, -16.500000) "})))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(1)),i=c(n(0)),o=n(5),a=n(6),s=n(46),l=n(54),u=c(n(55));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.history.location,n=t.pathname.split("/")[1]||"/";return r.default.createElement("section",{id:"Router",className:"app__router fill"},r.default.createElement(s.TransitionGroup,{id:"Transition",className:"app__group fill"},r.default.createElement(s.CSSTransition,{key:n,timeout:{enter:1e3,exit:1e3},classNames:"fade",appear:!0},r.default.createElement(o.Switch,{location:t},u.default.map(function(e){return r.default.createElement(o.Route,{key:e.url,path:e.url,exact:!0,component:e.component})}),r.default.createElement(o.Route,{path:"*",component:u.default[0].component})))))};h.propTypes={history:i.default.oneOfType([i.default.arrayOf(i.default.element),i.default.object,i.default.arrayOf(i.default.any)]).isRequired};var p={navbarToggle:l.toggleNavBar};t.default=(0,o.withRouter)((0,a.connect)(function(e){return{location:e.location,common:e.common}},p)(h))},function(e,t,n){"use strict";var r=s(n(47)),i=s(n(52)),o=s(n(20)),a=s(n(17));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,function(e){if(!e||!e.__esModule){var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}}(n(0));var r=s(n(48)),i=s(n(51)),o=s(n(1)),a=s(n(17));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(19);var u=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,r.default)(e,t)})},c=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,i.default)(e,t)})},h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),u(e,r),t.props.onEnter&&t.props.onEnter(e)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e)},t.onEntered=function(e,n){var r=t.getClassNames("enter").doneClassName;t.removeClasses(e,n?"appear":"enter"),u(e,r),t.props.onEntered&&t.props.onEntered(e)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),u(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),u(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"!=typeof n?n[e]:n+"-"+e;return{className:r,activeClassName:"string"!=typeof n?n[e+"Active"]:r+"-active",doneClassName:"string"!=typeof n?n[e+"Done"]:r+"-done"}},t}n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&c(e,r),i&&c(e,i),o&&c(e,o)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,u(e,t))},i.render=function(){var e=l({},this.props);return delete e.classNames,o.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.propTypes={};var p=h;t.default=p,e.exports=t.default},function(e,t,n){"use strict";var r=n(49);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(50));e.exports=t.default},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,a(n(0));var r=a(n(1)),i=n(11),o=a(n(20));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o,t.getInitialChildMapping=function(e,t){return i(e.children,function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})})},t.getNextChildMapping=function(e,t,n){var s=i(e.children),l=o(t,s);return Object.keys(l).forEach(function(i){var o=l[i];if((0,r.isValidElement)(o)){var u=i in t,c=i in s,h=t[i],p=(0,r.isValidElement)(h)&&!h.props.in;!c||u&&!p?c||!u||p?c&&u&&(0,r.isValidElement)(h)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",e),enter:a(o,"enter",e)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",e),enter:a(o,"enter",e)})}}),l};var r=n(1);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){var i;n[e.key]=(i=e,t&&(0,r.isValidElement)(i)?t(i):i)}),n}function o(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleTheme=t.toggleNavBar=void 0;var r=n(16);t.toggleNavBar=function(e){return{type:r.TOGGLE_NAV,payload:e}},t.toggleTheme=function(e){return{type:r.TOGGLE_THEME,payload:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(56))&&r.__esModule?r:{default:r};t.default=[{url:"/",component:i.default,name:"Home"},{url:"/visuals",component:i.default,name:"Visuals"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=f(i),a=n(5),s=n(6),l=f(n(57)),u=f(n(58)),c=f(n(60)),h=f(n(61)),p=f(n(62));function f(e){return e&&e.__esModule?e:{default:e}}n(87);var d=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.components=[o.default.createElement(l.default,null),o.default.createElement(u.default,null),o.default.createElement(c.default,null),o.default.createElement(h.default,null),o.default.createElement(p.default,null)],n.labels=[o.default.createElement("h1",null,"24/Se7en"),o.default.createElement("h1",null,"BeSounder")],n.state={index:Math.floor(Math.random()*n.components.length),labelIndex:Math.floor(Math.random()*n.labels.length)},n.bpm=120,n.tick=n.tick.bind(n),n.randomize=n.randomize.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.visual.addEventListener("animationiteration",this.tick)}},{key:"componentWillUnmount",value:function(){this.visual.removeEventListener("animationiteration",this.tick)}},{key:"tick",value:function(){var e=this;this.setState({index:Math.floor(Math.random()*this.components.length)}),setTimeout(function(){var t=Math.floor(Math.random()*e.labels.length);console.log("rand",t),e.setState({labelIndex:t})},1e4)}},{key:"randomize",value:function(e){return this.components[e]}},{key:"render",value:function(){var e=this,t=this.state,n=t.index,r=t.visible,i=t.labelIndex;return o.default.createElement("div",{id:"Three",className:"app__three",onClick:function(){e.setState({visible:!r})}},o.default.createElement("div",{className:"app__banner"},this.labels[i]),o.default.createElement("div",{className:"app__visual",ref:function(t){e.visual=t}},this.randomize(n)),o.default.createElement("span",{className:"app__info",ref:function(t){e.label=t}}))}}]),t}();d.propTypes={},t.default=(0,a.withRouter)((0,s.connect)(function(){return{}},{})(d))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(5),l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(87);var h=function(){function e(t){c(this,e),this.uniforms=null,this.plane_mesh=null,this.plane_geometry=null,this.groundMaterial=null,this.clock=new u.Clock(!0),this.options={elevation:0,noise_range:-4.4,sombrero_amplitude:-.2,sombrero_frequency:10,speed:1.72,segments:324,wireframe_color:"#e25cfe",perlin_passes:2,wireframe:!0,floor_visible:!0},this.scene=null,this.init=this.init.bind(this),this.buildPlanes=this.buildPlanes.bind(this),this.update=this.update.bind(this),this.scene=t,this.init()}return i(e,[{key:"init",value:function(){this.uniforms={time:{type:"f",value:0},speed:{type:"f",value:this.options.speed},elevation:{type:"f",value:this.options.elevation},noise_range:{type:"f",value:this.options.noise_range},offset:{type:"f",value:this.options.elevation},perlin_passes:{type:"f",value:this.options.perlin_passes},sombrero_amplitude:{type:"f",value:this.options.sombrero_amplitude},sombrero_frequency:{type:"f",value:this.options.sombrero_frequency},line_color:{type:"c",value:new u.Color(this.options.wireframe_color)}},this.buildPlanes(this.options.segments)}},{key:"buildPlanes",value:function(e){this.plane_geometry=new u.PlaneBufferGeometry(20,20,e,e),this.plane_material=new u.ShaderMaterial({vertexShader:document.getElementById("shader-vertex-terrain-perlinsombrero").textContent,fragmentShader:document.getElementById("shader-fragment-terrain").textContent,wireframe:this.options.wireframe,wireframeLinewidth:1,transparent:!0,uniforms:this.uniforms}),this.groundMaterial=new u.MeshPhongMaterial({ambient:16777215,color:16777215,specular:328965}),this.groundMaterial.color.setHSL(.095,1,.75),this.materials=[this.groundMaterial,this.plane_material],this.plane_mesh=u.SceneUtils.createMultiMaterialObject(this.plane_geometry,this.materials),this.plane_mesh.rotation.x=-Math.PI/2,this.plane_mesh.position.y=-.5}},{key:"update",value:function(e){this.uniforms.sombrero_amplitude.value=e,this.plane_material.uniforms.time.value=this.clock.getElapsedTime()}}]),e}(),p=function(e){function t(e){c(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bpm=120,n.millis=60/n.bpm*1e3,n.now=0,n.isRunning=!0,n.then=0,n.window={innerWidth:window.innerWidth,innerHeight:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},n.canvasGL=null,n.visuals=null,n.scene=null,n.camera=null,n.renderer=null,n.geometry=null,n.material=null,n.mesh=null,n.gui=null,n.terrain=null,n.composer=null,n.render_pass=null,n.fxaa_pass=null,n.posteffect=!1,n.meteo=null,n.skybox=null,n.update=n.update.bind(n),n.renderScene=n.renderScene.bind(n),n.resize=n.resize.bind(n),n.onWindowResize=n.onWindowResize.bind(n),n.loop=n.loop.bind(n),n.stopLoop=n.stopLoop.bind(n),n.pauseLoop=n.pauseLoop.bind(n),n.w=window.innerWidth,n.h=window.innerHeight,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,null,[{key:"convertRange",value:function(e,t,n){return(e-0)/127*(t-n)+n}},{key:"reverseNumber",value:function(e,t,n){return n+t-e}}]),i(t,[{key:"componentDidMount",value:function(){this.scene=new u.Scene,this.camera=new u.PerspectiveCamera(60,this.w/this.h,.1,1e5),this.camera.position.z=7,this.camera.position.y=1,this.renderer=new u.WebGLRenderer({width:this.w,height:this.h,scale:1,antialias:!1}),this.renderer.setSize(this.w,this.h),this.visuals.appendChild(this.renderer.domElement),this.camera.lookAt(new u.Vector3),this.terrain=new h(this.scene),this.scene.add(this.terrain.plane_mesh),window.addEventListener("resize",this.onWindowResize,!1),this.loop()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1),this.stopLoop()}},{key:"onWindowResize",value:function(){this.window={innerWidth:window.innerWidth,innerHeight:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},this.camera.aspect=this.window.innerWidth/this.window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.innerWidth,this.window.innerHeight)}},{key:"resize",value:function(e,t){return this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"loop",value:function(e){this.reset&&(console.log("reset"),this.then=e,this.reset=!1),this.isRunning&&(this.frameId=window.requestAnimationFrame(this.loop),this.update(e),(!this.now||e-this.now>=this.millis)&&(this.now=e,console.log("sombrero tick",this.bpm,this.millis)))}},{key:"pauseLoop",value:function(){this.isRunning=!this.isRunning,this.isRunning&&this.loop()}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"update",value:function(e){var t=Math.abs(Math.sin((e-this.then)/this.millis*Math.PI));return this.terrain.update(t),this.renderScene()}},{key:"renderScene",value:function(){return this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{ref:function(t){e.visuals=t}})}}]),t}();p.propTypes={},t.default=(0,s.withRouter)((0,l.connect)(function(e){return{common:e.common}},{})(p))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(5),l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));n(87);var c=n(59)(u),h=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.styles=["solid","wireframe","pointcloud"],n.geometries=["sphere","cylinder","cube","torus","icosahedron","tetrahedron","octahedron"],n.bpm=120,n.millis=60/n.bpm*1e3,n.now=0,n.isRunning=!0,n.then=0,n.window={innerWidth:window.innerWidth,innerHeight:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},n.settings={},n.settings.style=n.styles[1],n.settings.geometry=n.geometries[0],n.settings.speed=.05,n.settings.waves=8,n.settings.damping=.95,n.settings.dotSize=1,n.settings.factorX=1,n.settings.factorY=1,n.settings.factorZ=1,n.settings.fuzzyness=.4,n.sphereSettings={},n.sphereSettings.radius=100,n.sphereSettings.segmentsW=128,n.sphereSettings.segmentsH=128,n.cylinderSettings={},n.cylinderSettings.radiusTop=100,n.cylinderSettings.radiusBottom=100,n.cylinderSettings.height=200,n.cylinderSettings.segmentsW=128,n.cylinderSettings.segmentsH=128,n.cylinderSettings.openEnded=!0,n.cubeSettings={},n.cubeSettings.width=100,n.cubeSettings.height=100,n.cubeSettings.depth=100,n.cubeSettings.segmentsW=128,n.cubeSettings.segmentsH=128,n.cubeSettings.segmentsD=128,n.torusSettings={},n.torusSettings.radius=100,n.torusSettings.diameter=100,n.torusSettings.segmentsW=256,n.torusSettings.segmentsH=256,n.torusSettings.arc=2*Math.PI,n.tetrahedronSettings={},n.tetrahedronSettings.radius=100,n.tetrahedronSettings.detail=4,n.icosahedronSettings={},n.icosahedronSettings.radius=100,n.icosahedronSettings.detail=4,n.octahedronSettings={},n.octahedronSettings.radius=100,n.octahedronSettings.detail=4,n.animationTime=0,n.createScene=n.createScene.bind(n),n.createControls=n.createControls.bind(n),n.createParticleSystem=n.createParticleSystem.bind(n),n.onWindowResize=n.onWindowResize.bind(n),n.loop=n.loop.bind(n),n.stopLoop=n.stopLoop.bind(n),n.pauseLoop=n.pauseLoop.bind(n),n.update=n.update.bind(n),n.draw=n.draw.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,null,[{key:"convertRange",value:function(e,t,n){return(e-0)/127*(t-n)+n}},{key:"reverseNumber",value:function(e,t,n){return n+t-e}}]),i(t,[{key:"componentDidMount",value:function(){var e=this;this.createScene(),this.createControls(),this.createParticleSystem(),this.visuals.addEventListener("click",function(t){console.log("click",t),e.reset=!0;var n=new u.BoxGeometry(2,2,2),r=new u.MeshBasicMaterial({color:1048560,wireframe:!0,wireframeLinewidth:2}),i=new u.Mesh(n,r);i.position.set((t.pageX-e.window.oX)/2,(e.window.oY-t.pageY)/2,0),e.scene.add(i)},!1),window.addEventListener("resize",this.onWindowResize,!1),this.loop()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1),this.stopLoop()}},{key:"onWindowResize",value:function(){this.window={innerWidth:window.innerWidth,innerHeight:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},this.camera.aspect=this.window.innerWidth/this.window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.innerWidth,this.window.innerHeight)}},{key:"update",value:function(){this.shaderUniforms.time.value=this.animationTime,this.animationTime+=this.settings.speed,this.controls.update()}},{key:"draw",value:function(){this.renderer.render(this.scene,this.camera);var e=.001*Date.now();this.camera.position.x+=-2*Math.sin(e),this.camera.position.y+=-5*Math.cos(e),this.camera.position.z+=2*Math.sin(e),this.camera.lookAt(this.scene.position)}},{key:"loop",value:function(e){if(this.reset&&(console.log("reset"),this.then=e,this.reset=!1),this.isRunning){this.frameId=window.requestAnimationFrame(this.loop),this.update(),this.draw();var t=(e-this.then)/this.millis*Math.PI;this.shaderUniforms.damping.value=.1*Math.sin(t)+.1,this.shaderUniforms.damping.needsUpdate=!0,this.shaderUniforms.modifiers.value.w=Math.abs(1.5*Math.sin(t)),this.shaderUniforms.modifiers.needsUpdate=!0,(!this.now||e-this.now>=this.millis)&&(this.now=e,console.log("blob tick",this.bpm,this.millis))}}},{key:"pauseLoop",value:function(){this.isRunning=!this.isRunning,this.isRunning&&this.loop()}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"createScene",value:function(){this.scene=new u.Scene,this.camera=new u.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=600,this.camera.lookAt(this.scene.position),this.renderer=new u.WebGLRenderer({antialias:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(0,1),this.visuals.appendChild(this.renderer.domElement)}},{key:"createControls",value:function(){this.controls=new c(this.camera,this.renderer.domElement),this.controls.noPan=!0}},{key:"createParticleSystem",value:function(){switch(this.particleSystem&&(this.geometry.dispose(),this.material.dispose(),this.scene.remove(this.particleSystem)),this.animationTime=0,this.shaderAttributes={index:{type:"f",value:[]},random:{type:"f",value:[]}},this.shaderUniforms={delta:{type:"f",value:0},time:{type:"f",value:0},damping:{type:"f",value:1-this.settings.damping},dotSize:{type:"f",value:this.settings.dotSize},modifiers:{type:"v4",value:new u.Vector4(this.settings.factorX,this.settings.factorY,this.settings.factorZ,this.settings.fuzzyness)},resolution:{type:"v2",value:new u.Vector2(window.innerWidth,window.innerHeight)}},this.material=new u.ShaderMaterial({attributes:this.shaderAttributes,uniforms:this.shaderUniforms,vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,wireframe:"wireframe"===this.settings.style}),this.settings.geometry){case"sphere":this.geometry=new u.SphereGeometry(this.sphereSettings.radius,this.sphereSettings.segmentsW,this.sphereSettings.segmentsH);break;case"cylinder":this.geometry=new u.CylinderGeometry(this.cylinderSettings.radiusTop,this.cylinderSettings.radiusBottom,this.cylinderSettings.height,this.cylinderSettings.segmentsW,this.cylinderSettings.segmentsH,this.cylinderSettings.openEnded);break;case"cube":this.geometry=new u.CubeGeometry(this.cubeSettings.width,this.cubeSettings.height,this.cubeSettings.depth,this.cubeSettings.segmentsW,this.cubeSettings.segmentsH,this.cubeSettings.segmentsD);break;case"torus":this.geometry=new u.TorusGeometry(this.torusSettings.radius,this.torusSettings.diameter,this.torusSettings.segmentsW,this.torusSettings.segmentsH,this.torusSettings.arc);break;case"icosahedron":this.geometry=new u.IcosahedronGeometry(this.icosahedronSettings.radius,this.icosahedronSettings.detail);break;case"tetrahedron":this.geometry=new u.TetrahedronGeometry(this.tetrahedronSettings.radius,this.tetrahedronSettings.detail);break;case"octahedron":this.geometry=new u.OctahedronGeometry(this.octahedronSettings.radius,this.octahedronSettings.detail)}var e=Math.PI*this.settings.waves/this.geometry.vertices.length;this.shaderUniforms.delta.value=e;for(var t=0;t<this.geometry.vertices.length;t+=1)this.shaderAttributes.index.value[t]=t,this.shaderAttributes.random.value[t]=.5+1*Math.random();switch(this.settings.style){case"solid":case"wireframe":this.particleSystem=new u.Mesh(this.geometry,this.material);break;case"pointcloud":this.particleSystem=new u.PointCloud(this.geometry,this.material)}this.scene.add(this.particleSystem)}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{ref:function(t){e.visuals=t}})}}]),t}();h.propTypes={},t.default=(0,s.withRouter)((0,l.connect)(function(){return{}},{})(h))},function(e,t){e.exports=function(e){var t=e.MOUSE;function n(n,r){this.object=n,this.domElement=void 0!==r?r:document,this.enabled=!0,this.target=new e.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.LEFT,ZOOM:t.MIDDLE,PAN:t.RIGHT};var i,o,a=this,s=new e.Vector2,l=new e.Vector2,u=new e.Vector2,c=new e.Vector2,h=new e.Vector2,p=new e.Vector2,f=new e.Vector3,d=new e.Vector3,m=new e.Vector2,g=new e.Vector2,y=new e.Vector2,v=0,b=0,x=1,w=new e.Vector3,_=new e.Vector3,M=new e.Quaternion,S={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},E=S.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var T=(new e.Quaternion).setFromUnitVectors(n.up,new e.Vector3(0,1,0)),C=T.clone().inverse(),A={type:"change"},P={type:"start"},L={type:"end"};function R(){return 2*Math.PI/60/60*a.autoRotateSpeed}function k(){return Math.pow(.95,a.zoomSpeed)}function O(e){if(!1!==a.enabled){e.preventDefault();var t=a.domElement===document?a.domElement.body:a.domElement;if(E===S.ROTATE){if(!0===a.noRotate)return;l.set(e.clientX,e.clientY),u.subVectors(l,s),a.rotateLeft(2*Math.PI*u.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*u.y/t.clientHeight*a.rotateSpeed),s.copy(l)}else if(E===S.DOLLY){if(!0===a.noZoom)return;g.set(e.clientX,e.clientY),y.subVectors(g,m),0<y.y?a.dollyIn():y.y<0&&a.dollyOut(),m.copy(g)}else if(E===S.PAN){if(!0===a.noPan)return;h.set(e.clientX,e.clientY),p.subVectors(h,c),a.pan(p.x,p.y),c.copy(h)}E!==S.NONE&&a.update()}}function F(){!1!==a.enabled&&(document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",F,!1),a.dispatchEvent(L),E=S.NONE)}function U(e){if(!1!==a.enabled&&!0!==a.noZoom&&E===S.NONE){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),0<t?a.dollyOut():t<0&&a.dollyIn(),a.update(),a.dispatchEvent(P),a.dispatchEvent(L)}}this.rotateLeft=function(e){void 0===e&&(e=R()),b-=e},this.rotateUp=function(e){void 0===e&&(e=R()),v-=e},this.panLeft=function(e){var t=this.object.matrix.elements;f.set(t[0],t[1],t[2]),f.multiplyScalar(-e),w.add(f)},this.panUp=function(e){var t=this.object.matrix.elements;f.set(t[4],t[5],t[6]),f.multiplyScalar(e),w.add(f)},this.pan=function(t,n){var r=a.domElement===document?a.domElement.body:a.domElement;if(a.object instanceof e.PerspectiveCamera){var i=a.object.position.clone().sub(a.target).length();i*=Math.tan(a.object.fov/2*Math.PI/180),a.panLeft(2*t*i/r.clientHeight),a.panUp(2*n*i/r.clientHeight)}else a.object instanceof e.OrthographicCamera?(a.panLeft(t*(a.object.right-a.object.left)/r.clientWidth),a.panUp(n*(a.object.top-a.object.bottom)/r.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=k()),a.object instanceof e.PerspectiveCamera?x/=t:a.object instanceof e.OrthographicCamera?(a.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),a.object.updateProjectionMatrix(),a.dispatchEvent(A)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=k()),a.object instanceof e.PerspectiveCamera?x*=t:a.object instanceof e.OrthographicCamera?(a.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),a.object.updateProjectionMatrix(),a.dispatchEvent(A)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var e=this.object.position;d.copy(e).sub(this.target),d.applyQuaternion(T),i=Math.atan2(d.x,d.z),o=Math.atan2(Math.sqrt(d.x*d.x+d.z*d.z),d.y),this.autoRotate&&E===S.NONE&&this.rotateLeft(R()),i+=b,o+=v,i=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,i)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(1e-6,Math.min(Math.PI-1e-6,o));var t=d.length()*x;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(w),d.x=t*Math.sin(o)*Math.sin(i),d.y=t*Math.cos(o),d.z=t*Math.sin(o)*Math.cos(i),d.applyQuaternion(C),e.copy(this.target).add(d),this.object.lookAt(this.target),v=b=0,x=1,w.set(0,0,0),(1e-6<_.distanceToSquared(this.object.position)||1e-6<8*(1-M.dot(this.object.quaternion)))&&(this.dispatchEvent(A),_.copy(this.object.position),M.copy(this.object.quaternion))},this.reset=function(){E=S.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(A),this.update()},this.getPolarAngle=function(){return o},this.getAzimuthalAngle=function(){return i},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",function(e){if(!1!==a.enabled){if(e.preventDefault(),e.button===a.mouseButtons.ORBIT){if(!0===a.noRotate)return;E=S.ROTATE,s.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.ZOOM){if(!0===a.noZoom)return;E=S.DOLLY,m.set(e.clientX,e.clientY)}else if(e.button===a.mouseButtons.PAN){if(!0===a.noPan)return;E=S.PAN,c.set(e.clientX,e.clientY)}E!==S.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",F,!1),a.dispatchEvent(P))}},!1),this.domElement.addEventListener("mousewheel",U,!1),this.domElement.addEventListener("MozMousePixelScroll",U,!1),this.domElement.addEventListener("touchstart",function(e){if(!1!==a.enabled){switch(e.touches.length){case 1:if(!0===a.noRotate)return;E=S.TOUCH_ROTATE,s.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===a.noZoom)return;E=S.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);m.set(0,r);break;case 3:if(!0===a.noPan)return;E=S.TOUCH_PAN,c.set(e.touches[0].pageX,e.touches[0].pageY);break;default:E=S.NONE}E!==S.NONE&&a.dispatchEvent(P)}},!1),this.domElement.addEventListener("touchend",function(){!1!==a.enabled&&(a.dispatchEvent(L),E=S.NONE)},!1),this.domElement.addEventListener("touchmove",function(e){if(!1!==a.enabled){e.preventDefault(),e.stopPropagation();var t=a.domElement===document?a.domElement.body:a.domElement;switch(e.touches.length){case 1:if(!0===a.noRotate)return;if(E!==S.TOUCH_ROTATE)return;l.set(e.touches[0].pageX,e.touches[0].pageY),u.subVectors(l,s),a.rotateLeft(2*Math.PI*u.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*u.y/t.clientHeight*a.rotateSpeed),s.copy(l),a.update();break;case 2:if(!0===a.noZoom)return;if(E!==S.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(n*n+r*r);g.set(0,i),y.subVectors(g,m),0<y.y?a.dollyOut():y.y<0&&a.dollyIn(),m.copy(g),a.update();break;case 3:if(!0===a.noPan)return;if(E!==S.TOUCH_PAN)return;h.set(e.touches[0].pageX,e.touches[0].pageY),p.subVectors(h,c),a.pan(p.x,p.y),c.copy(h),a.update();break;default:E=S.NONE}}},!1),window.addEventListener("keydown",function(e){if(!1!==a.enabled&&!0!==a.noKeys&&!0!==a.noPan)switch(e.keyCode){case a.keys.UP:a.pan(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:a.pan(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:a.pan(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:a.pan(-a.keyPanSpeed,0),a.update()}},!1),this.update()}return t||(t={LEFT:0,MIDDLE:1,RIGHT:2}),(n.prototype=Object.create(e.EventDispatcher.prototype)).constructor=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(5),l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));n(87);var c=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bpm=120,n.millis=60/n.bpm*1e3,n.now=0,n.isRunning=!0,n.then=0,n.w=window.innerWidth,n.h=window.innerHeight,n.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},n.vertShader=null,n.fragShader=null,n.renderer=null,n.camera=null,n.scene=null,n.ammount=null,n.material=null,n.geometry=null,n.planet=null,n.start=null,n.onWindowResize=n.onWindowResize.bind(n),n.loop=n.loop.bind(n),n.stopLoop=n.stopLoop.bind(n),n.pauseLoop=n.pauseLoop.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){this.vertShader=document.querySelector("#vertexshaderXP").innerHTML,this.fragShader=document.querySelector("#fragmentshaderXP").innerHTML,this.renderer=new u.WebGLRenderer({canvas:this.visuals,antialiasing:!0}),this.renderer.setClearColor(1118481),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera=new u.PerspectiveCamera(55,this.w/this.h,.1,5e3),this.camera.position.z=400,this.scene=new u.Scene,this.ammount=1,this.material=new u.ShaderMaterial({uniforms:{time:{type:"f",value:0}},vertexShader:this.vertShader,fragmentShader:this.fragShader}),this.geometry=new u.SphereGeometry(30,30,100),this.planet=new u.Mesh(this.geometry,this.material),this.scene.add(this.planet),this.planet.position.x=0,this.planet.position.y=0,this.planet.position.z=0,this.planet.modifier=Math.random(),this.planet.material.transparent=!0,this.planet.material.opacity=Math.random(),window.addEventListener("resize",this.onWindowResize,!1),this.loop()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1),this.stopLoop()}},{key:"onWindowResize",value:function(){this.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},this.camera.aspect=this.window.w/this.window.h,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.w,this.window.h)}},{key:"loop",value:function(e){this.reset&&(console.log("reset"),this.then=e,this.reset=!1),this.isRunning&&(this.frameId=window.requestAnimationFrame(this.loop),this.update(e),(!this.now||e-this.now>=this.millis)&&(this.now=e,console.log("sombrero tick",this.bpm,this.millis)))}},{key:"pauseLoop",value:function(){this.isRunning=!this.isRunning,this.isRunning&&this.loop()}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"update",value:function(e){var t=Math.abs(Math.sin(e/this.millis*Math.PI)),n=Math.abs(Math.sin(.005*e));this.material.uniforms.time.value=5e-5*t*(1e3*n),this.scene.rotation.y+=.015,this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=100,this.renderer.render(this.scene,this.camera)}},{key:"renderScene",value:function(){return this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return a.default.createElement("canvas",{ref:function(t){e.visuals=t}})}}]),t}();c.propTypes={},t.default=(0,s.withRouter)((0,l.connect)(function(e){return{common:e.common}},{})(c))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(5),l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));n(87);var c=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bpm=120,n.millis=60/n.bpm*1e3,n.now=0,n.isRunning=!0,n.then=0,n.w=window.innerWidth,n.h=window.innerHeight,n.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},n.scene=null,n.aspectRatio=null,n.camera=null,n.renderer=null,n.uTime=null,n.triangles=null,n.cantidad_triangles=null,n.group=null,n.onWindowResize=n.onWindowResize.bind(n),n.loop=n.loop.bind(n),n.stopLoop=n.stopLoop.bind(n),n.pauseLoop=n.pauseLoop.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,null,[{key:"fancyTriangle",value:function(e){var t=new u.Object3D,n=new u.Geometry,r=new u.MeshBasicMaterial({vertexColors:u.VertexColors,side:u.DoubleSide}),i=new u.Color("#E3F22C"),o=new u.Color("#D53C78"),a=new u.Color("#5DEFFD");n.vertices.push(new u.Vector3(e,0,0)),n.vertices.push(new u.Vector3(0,e,0)),n.vertices.push(new u.Vector3(0,0,0)),n.faces.push(new u.Face3(0,1,2)),n.faces[0].vertexColors=[i,o,a];var s=new u.Mesh(n,r),l=new u.MeshBasicMaterial({color:"#D53C78",wireframe:!0,transparent:!0,opacity:.04});Math.random()<.5&&(l=new u.MeshBasicMaterial({color:"#E3F22C",wireframe:!0,transparent:!0,opacity:.04}));var c=new u.BoxGeometry(2*e,2*e,2*e),h=new u.Mesh(c,l);return t.add(h),t.add(s),t}}]),i(t,[{key:"componentDidMount",value:function(){this.scene=new u.Scene,this.aspectRatio=window.innerWidth/window.innerHeight,this.camera=new u.PerspectiveCamera(75,this.aspectRatio,.1,1e3),this.renderer=new u.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.visuals.appendChild(this.renderer.domElement),this.renderer.setClearColor("#441A58"),this.camera.position.z=100,this.camera.position.y=30,this.uTime=0,this.triangles=[],this.cantidad_triangles=100,this.group=new u.Group,this.group.position.y=50,this.scene.add(this.group);for(var e=0;e<this.cantidad_triangles;e+=1)this.triangles.push(t.fancyTriangle(40*Math.random())),this.triangles[e].position.x=100*Math.random()-50,this.triangles[e].position.y=100*Math.random()-50,this.triangles[e].position.z=40*Math.random()-20,this.triangles[e].rotation.y=100*Math.random()-50,this.triangles[e].rotation.x=100*Math.random()-50,this.triangles[e].speedVelocityX=.02*Math.random(),this.triangles[e].speedVelocityY=.02*Math.random(),this.group.add(this.triangles[e]);window.addEventListener("resize",this.onWindowResize,!1),this.loop()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1),this.stopLoop()}},{key:"onWindowResize",value:function(){this.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},this.camera.aspect=this.window.w/this.window.h,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.w,this.window.h)}},{key:"loop",value:function(e){this.reset&&(console.log("reset"),this.then=e,this.reset=!1),this.isRunning&&(this.frameId=window.requestAnimationFrame(this.loop),this.update(e),(!this.now||e-this.now>=this.millis)&&(this.now=e,console.log("sombrero tick",this.bpm,this.millis)))}},{key:"pauseLoop",value:function(){this.isRunning=!this.isRunning,this.isRunning&&this.loop()}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"update",value:function(e){var t=.5*Math.abs(Math.sin(e/this.millis*Math.PI))+.8;this.uTime+=1;for(var n=0;n<this.cantidad_triangles;n+=1)this.triangles[n].rotation.x+=this.triangles[n].speedVelocityX,this.triangles[n].rotation.y+=this.triangles[n].speedVelocityY,this.triangles[n].position.y+=.4,this.triangles[n].position.z=40*Math.sin(.01*(.01*this.uTime+n))-20,50<this.triangles[n].position.y&&(this.triangles[n].position.y=100*Math.random()-100),this.triangles[n].scale.set(t,t,t);this.renderer.render(this.scene,this.camera)}},{key:"renderScene",value:function(){return this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{ref:function(t){e.visuals=t}})}}]),t}();c.propTypes={},t.default=(0,s.withRouter)((0,l.connect)(function(){return{}},{})(c))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(5),l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));n(87);var c=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bpm=120,n.millis=60/n.bpm*1e3,n.now=0,n.isRunning=!0,n.then=0,n.w=window.innerWidth,n.h=window.innerHeight,n.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},n.renderer=null,n.camera=null,n.scene=null,n.normalMaterial=null,n.coloredMaterial=null,n.pointLight=null,n.light=null,n.Geo=null,n.Sun=null,n.onWindowResize=n.onWindowResize.bind(n),n.loop=n.loop.bind(n),n.stopLoop=n.stopLoop.bind(n),n.pauseLoop=n.pauseLoop.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){function e(){this.geo=new u.SphereGeometry(Math.floor(5*Math.random()+1),Math.floor(6*Math.random()+1),Math.floor(5*Math.random()+1)),this.ptl=new u.Mesh(this.geo,new u.MeshNormalMaterial({})),this.ptl.position.y=-10+Math.floor(20*Math.random()+1),this.speed=Math.floor(50*Math.random()+5)/100,this.dia=Math.floor(200*Math.random()+1)}this.renderer=new u.WebGLRenderer({antialias:!1}),this.camera=new u.PerspectiveCamera(70,this.w/this.h,.1,1e4),this.scene=new u.Scene,this.scene.add(this.camera),this.renderer.setSize(this.w,this.h),this.visuals.append(this.renderer.domElement),this.camera.position.z=200,this.normalMaterial=new u.MeshNormalMaterial({}),this.coloredMaterial=new u.MeshLambertMaterial({color:11195391}),this.pointLight=new u.HemisphereLight(65280,255,.5),this.pointLight.position.x=100,this.pointLight.position.y=100,this.pointLight.position.z=130,this.light=new u.PointLight(16765696,12,100),this.light.position.set(50,50,50),this.scene.add(this.light),this.scene.add(this.pointLight),this.Geo=new u.SphereGeometry(10,15,25),this.Sun=new u.Mesh(this.Geo,this.normalMaterial),this.numParts=2e3,this.tabParts=[];for(var t=0;t<this.numParts;t+=1)this.tabParts.push(new e),this.scene.add(this.tabParts[t].ptl);this.scene.add(this.Sun),this.inc=0,window.addEventListener("resize",this.onWindowResize,!1),this.loop()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1),this.stopLoop()}},{key:"onWindowResize",value:function(){this.window={w:window.innerWidth,h:window.innerHeight,oX:window.innerWidth/2,oY:window.innerHeight/2},this.camera.aspect=this.window.w/this.window.h,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.window.w,this.window.h)}},{key:"loop",value:function(e){this.reset&&(console.log("reset"),this.then=e,this.reset=!1),this.isRunning&&(this.frameId=window.requestAnimationFrame(this.loop),this.update(e),(!this.now||e-this.now>=this.millis)&&(this.now=e,console.log("sombrero tick",this.bpm,this.millis)))}},{key:"pauseLoop",value:function(){this.isRunning=!this.isRunning,this.isRunning&&this.loop()}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"update",value:function(e){var t=Math.abs(Math.sin(e/this.millis*Math.PI));this.camera.lookAt(this.Sun.position),this.camera.position.y=60,this.inc+=.025,this.Sun.rotation.y=-this.inc;for(var n=0;n<this.numParts;n+=1)this.tabParts[n].ptl.position.x=(this.Sun.position.x-(70+this.tabParts[n].dia))*Math.cos(this.tabParts[n].speed*this.inc+n/100),this.tabParts[n].ptl.position.z=(this.Sun.position.z-(70+this.tabParts[n].dia))*Math.sin(this.tabParts[n].speed*this.inc+n/100),this.tabParts[n].ptl.position.y=this.Sun.position.y+this.tabParts[n].dia*Math.tan(this.tabParts[n].speed*this.inc),this.tabParts[n].ptl.rotation.z=this.tabParts[n].speed*this.inc*8,this.tabParts[n].ptl.rotation.y=this.tabParts[n].speed*this.inc*9,this.tabParts[n].ptl.rotation.x=this.tabParts[n].speed*this.inc,this.tabParts[n].ptl.scale.set(t,t,t);this.Sun.scale.set(2*t,2*t,2*t),this.renderer.render(this.scene,this.camera)}},{key:"renderScene",value:function(){return this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{ref:function(t){e.visuals=t}})}}]),t}();c.propTypes={},t.default=(0,s.withRouter)((0,l.connect)(function(){return{}},{})(c))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t,n){var r=e.createEvent("CustomEvent");return r.initCustomEvent(n,!0,!0,t.target),t.target.dispatchEvent(r),r=null,1},n=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?"touch":"mouse",r=1,i=0,o=void 0,a=void 0,s=void 0,l=void 0,u=Math,c=u.abs,h=u.max,p=void 0,f=void 0,d=void 0,m=void 0,g={touch:{touchstart:function(e){return t(e,(o=e.touches[0].pageX,a=e.touches[0].pageY,"sfc"))},touchmove:function(e){return r=0,s=e.touches[0].pageX,l=e.touches[0].pageY,1},touchend:function(e){return t(e,r?"fc":(d=c(p=s-o),m=c(f=l-a),r=1,40<h(d,m)?m<d?p<0?"swl":"swr":f<0?"swu":"swd":"fc"))},touchcancel:function(){return r=0,1}},mouse:{mousedown:function(e){i=1,o=e.x,a=e.y;var n=t(e,"sfc");return e.button||n},mousemove:function(e){return r=0,s=e.x,l=e.y,!i||1},mouseup:function(e){i=0;var n=t(e,r?"fc":(r=1,d=c(p=s-o),m=c(f=l-a),40<h(d,m)?m<d?p<0?"swl":"swr":f<0?"swu":"swd":"fc"));return e.button||n}}};for(var y in g[n])e.addEventListener(y,g[n][y],!1)}},function(e,t){e.exports="/favicon.ico"},function(e,t){e.exports="/images/icon-57-2x.png"},function(e,t){e.exports="/images/icon-57.png"},function(e,t){e.exports="/images/icon-60-2x.png"},function(e,t){e.exports="/images/icon-60.png"},function(e,t){e.exports="/images/icon-72-2x.png"},function(e,t){e.exports="/images/icon-72.png"},function(e,t){e.exports="/images/icon-76-2x.png"},function(e,t){e.exports="/images/icon-76.png"},function(e,t){e.exports="/images/favicon-16x16.png"},function(e,t){e.exports="/images/favicon-32x32.png"},function(e,t){e.exports="/images/favicon-96x96.png"},function(e,t){e.exports="/images/android-icon-192x192.png"},function(e,t){e.exports="/images/preview.png"},function(e,t){e.exports="/images/apple_splash_1242.png"},function(e,t){e.exports="/images/apple_splash_2048.png"},function(e,t){e.exports="/images/apple_splash_640.png"},function(e,t){e.exports="/images/apple_splash_750.png"},function(e,t,n){},,,,,function(e,t,n){},,function(e,t,n){}]);
//# sourceMappingURL=bundle.js.map